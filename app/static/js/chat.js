/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@easepick/bundle/dist/index.esm.js":
/*!*********************************************************!*\
  !*** ./node_modules/@easepick/bundle/dist/index.esm.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AmpPlugin": () => (/* binding */ d),
/* harmony export */   "DateTime": () => (/* binding */ t),
/* harmony export */   "KbdPlugin": () => (/* binding */ h),
/* harmony export */   "LockPlugin": () => (/* binding */ a),
/* harmony export */   "PresetPlugin": () => (/* binding */ r),
/* harmony export */   "RangePlugin": () => (/* binding */ c),
/* harmony export */   "TimePlugin": () => (/* binding */ l),
/* harmony export */   "create": () => (/* binding */ n),
/* harmony export */   "easepick": () => (/* binding */ s)
/* harmony export */ });
class t extends Date{static parseDateTime(e,i="YYYY-MM-DD",n="en-US"){if(!e)return new Date((new Date).setHours(0,0,0,0));if(e instanceof t)return e.toJSDate();if(e instanceof Date)return e;if(/^-?\d{10,}$/.test(String(e)))return new Date(Number(e));if("string"==typeof e){const s=[];let o=null;for(;null!=(o=t.regex.exec(i));)"\\"!==o[1]&&s.push(o);if(s.length){const i={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};s[0].index>0&&(i.value+=".*?");for(const[e,o]of Object.entries(s)){const s=Number(e),{group:a,pattern:r}=t.formatPatterns(o[0],n);i[a]=s+1,i.value+=r,i.value+=".*?"}const o=new RegExp(`^${i.value}$`);if(o.test(e)){const s=o.exec(e),a=Number(s[i.year]);let r=null;i.month?r=Number(s[i.month])-1:i.shortMonth?r=t.shortMonths(n).indexOf(s[i.shortMonth]):i.longMonth&&(r=t.longMonths(n).indexOf(s[i.longMonth]));const c=Number(s[i.day])||1,l=Number(s[i.hour]);let h=Number.isNaN(l)?0:l;const d=Number(s[i.minute]),p=Number.isNaN(d)?0:d,u=Number(s[i.second]),g=Number.isNaN(u)?0:u,m=s[i.ampm];return m&&"PM"===m&&(h+=12,24===h&&(h=0)),new Date(a,r,c,h,p,g,0)}}}return new Date((new Date).setHours(0,0,0,0))}static regex=/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g;static MONTH_JS=[0,1,2,3,4,5,6,7,8,9,10,11];static shortMonths(e){return t.MONTH_JS.map((t=>new Date(2019,t).toLocaleString(e,{month:"short"})))}static longMonths(e){return t.MONTH_JS.map((t=>new Date(2019,t).toLocaleString(e,{month:"long"})))}static formatPatterns(e,i){switch(e){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${e.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${t.shortMonths(i).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${t.longMonths(i).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}lang;constructor(e=null,i="YYYY-MM-DD",n="en-US"){super(t.parseDateTime(e,i,n)),this.lang=n}getWeek(t){const e=new Date(this.midnight_ts(this)),i=(this.getDay()+(7-t))%7;e.setDate(e.getDate()-i);const n=e.getTime();return e.setMonth(0,1),e.getDay()!==t&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((n-e.getTime())/6048e5)}clone(){return new t(this)}toJSDate(){return new Date(this)}inArray(t,e="[]"){return t.some((t=>t instanceof Array?this.isBetween(t[0],t[1],e):this.isSame(t,"day")))}isBetween(t,e,i="()"){switch(i){default:case"()":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(e);case"[)":return this.midnight_ts(this)>=this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(e);case"(]":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<=this.midnight_ts(e);case"[]":return this.midnight_ts()>=this.midnight_ts(t)&&this.midnight_ts()<=this.midnight_ts(e)}}isBefore(t,e="days"){switch(e){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return t.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(t,e="days"){switch(e){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(t.getFullYear(),t.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>t.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(t,e="days"){switch(e){case"day":case"days":this.setDate(this.getDate()+t);break;case"month":case"months":this.setMonth(this.getMonth()+t)}return this}subtract(t,e="days"){switch(e){case"day":case"days":this.setDate(this.getDate()-t);break;case"month":case"months":this.setMonth(this.getMonth()-t)}return this}diff(t,e="days"){switch(e){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(t))/864e5);case"month":case"months":let e=12*(t.getFullYear()-this.getFullYear());return e-=t.getMonth(),e+=this.getMonth(),e}}format(e,i="en-US"){let n="";const s=[];let o=null;for(;null!=(o=t.regex.exec(e));)"\\"!==o[1]&&s.push(o);if(s.length){s[0].index>0&&(n+=e.substring(0,s[0].index));for(const[t,o]of Object.entries(s)){const a=Number(t);n+=this.formatTokens(o[0],i),s[a+1]&&(n+=e.substring(o.index+o[0].length,s[a+1].index)),a===s.length-1&&(n+=e.substring(o.index+o[0].length))}}return n.replace(/\\/g,"")}midnight_ts(t){return t?new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(e,i){switch(e){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return t.shortMonths(i)[this.getMonth()];case"MMMM":return t.longMonths(i)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||24===this.getHours()?"am":"pm";case"A":return this.getHours()<12||24===this.getHours()?"AM":"PM";default:return""}}}class e{picker;constructor(t){this.picker=t}render(e,i){e||(e=new t),e.setDate(1),e.setHours(0,0,0,0),"function"==typeof this[`get${i}View`]&&this[`get${i}View`](e)}getContainerView(t){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:t.clone(),view:"Header"}),this.picker.trigger("render",{date:t.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:t.clone(),view:"Footer"})}getHeaderView(t){const e=document.createElement("header");this.picker.options.header instanceof HTMLElement&&e.appendChild(this.picker.options.header),"string"==typeof this.picker.options.header&&(e.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{target:e,date:t.clone(),view:"Header"})}getMainView(t){const e=document.createElement("main");this.picker.ui.container.appendChild(e);const i=document.createElement("div");i.className=`calendars grid-${this.picker.options.grid}`;for(let e=0;e<this.picker.options.calendars;e++){const n=document.createElement("div");n.className="calendar",i.appendChild(n);const s=this.getCalendarHeaderView(t.clone());n.appendChild(s),this.picker.trigger("view",{date:t.clone(),view:"CalendarHeader",index:e,target:s});const o=this.getCalendarDayNamesView();n.appendChild(o),this.picker.trigger("view",{date:t.clone(),view:"CalendarDayNames",index:e,target:o});const a=this.getCalendarDaysView(t.clone());n.appendChild(a),this.picker.trigger("view",{date:t.clone(),view:"CalendarDays",index:e,target:a});const r=this.getCalendarFooterView(this.picker.options.lang,t.clone());n.appendChild(r),this.picker.trigger("view",{date:t.clone(),view:"CalendarFooter",index:e,target:r}),this.picker.trigger("view",{date:t.clone(),view:"CalendarItem",index:e,target:n}),t.add(1,"month")}e.appendChild(i),this.picker.trigger("view",{date:t.clone(),view:"Calendars",target:i}),this.picker.trigger("view",{date:t.clone(),view:"Main",target:e})}getFooterView(t){const e=document.createElement("footer"),i=document.createElement("div");i.className="footer-buttons";const n=document.createElement("button");n.className="cancel-button unit",n.innerHTML=this.picker.options.locale.cancel,i.appendChild(n);const s=document.createElement("button");s.className="apply-button unit",s.innerHTML=this.picker.options.locale.apply,s.disabled=!0,i.appendChild(s),e.appendChild(i),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{date:t,target:e,view:"Footer"})}getCalendarHeaderView(t){const e=document.createElement("div");e.className="header";const i=document.createElement("div");i.className="month-name",i.innerHTML=`<span>${t.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${t.format("YYYY")}`,e.appendChild(i);const n=document.createElement("button");n.className="previous-button unit",n.innerHTML=this.picker.options.locale.previousMonth,e.appendChild(n);const s=document.createElement("button");return s.className="next-button unit",s.innerHTML=this.picker.options.locale.nextMonth,e.appendChild(s),e}getCalendarDayNamesView(){const t=document.createElement("div");t.className="daynames-row";for(let e=1;e<=7;e++){const i=3+this.picker.options.firstDay+e,n=document.createElement("div");n.className="dayname",n.innerHTML=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),n.title=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),t.appendChild(n),this.picker.trigger("view",{dayIdx:i,view:"CalendarDayName",target:n})}return t}getCalendarDaysView(t){const e=document.createElement("div");e.className="days-grid";const i=this.calcOffsetDays(t,this.picker.options.firstDay),n=32-new Date(t.getFullYear(),t.getMonth(),32).getDate();for(let t=0;t<i;t++){const t=document.createElement("div");t.className="offset",e.appendChild(t)}for(let i=1;i<=n;i++){t.setDate(i);const n=this.getCalendarDayView(t);e.appendChild(n),this.picker.trigger("view",{date:t,view:"CalendarDay",target:n})}return e}getCalendarDayView(e){const i=this.picker.options.date?new t(this.picker.options.date):null,n=new t,s=document.createElement("div");return s.className="day unit",s.innerHTML=e.format("D"),s.dataset.time=String(e.getTime()),e.isSame(n,"day")&&s.classList.add("today"),[0,6].includes(e.getDay())&&s.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(e,"day")&&s.classList.add("selected"):i&&e.isSame(i,"day")&&s.classList.add("selected"),this.picker.trigger("view",{date:e,view:"CalendarDay",target:s}),s}getCalendarFooterView(t,e){const i=document.createElement("div");return i.className="footer",i}calcOffsetDays(t,e){let i=t.getDay()-e;return i<0&&(i+=7),i}}class i{picker;instances={};constructor(t){this.picker=t}initialize(){const t=[];this.picker.options.plugins.forEach((e=>{"function"==typeof e?t.push(new e):"string"==typeof e&&"undefined"!=typeof easepick&&Object.prototype.hasOwnProperty.call(easepick,e)?t.push(new easepick[e]):console.warn(`easepick: ${e} not found.`)})),t.sort(((t,e)=>t.priority>e.priority?-1:t.priority<e.priority||t.dependencies.length>e.dependencies.length?1:t.dependencies.length<e.dependencies.length?-1:0)),t.forEach((t=>{t.attach(this.picker),this.instances[t.getName()]=t}))}getInstance(t){return this.instances[t]}addInstance(t){if(Object.prototype.hasOwnProperty.call(this.instances,t))console.warn(`easepick: ${t} already added.`);else{if("undefined"!=typeof easepick&&Object.prototype.hasOwnProperty.call(easepick,t)){const e=new easepick[t];return e.attach(this.picker),this.instances[e.getName()]=e,e}if("undefined"!==this.getPluginFn(t)){const e=new(this.getPluginFn(t));return e.attach(this.picker),this.instances[e.getName()]=e,e}console.warn(`easepick: ${t} not found.`)}return null}removeInstance(t){return t in this.instances&&this.instances[t].detach(),delete this.instances[t]}reloadInstance(t){return this.removeInstance(t),this.addInstance(t)}getPluginFn(t){return[...this.picker.options.plugins].filter((e=>"function"==typeof e&&(new e).getName()===t)).shift()}}class n{Calendar=new e(this);PluginManager=new i(this);calendars=[];datePicked=[];cssLoaded=0;binds={hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)};options={doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]};ui={container:null,shadowRoot:null,wrapper:null};version="1.2.1";constructor(t){const e={...this.options.locale,...t.locale};this.options={...this.options,...t},this.options.locale=e,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),"function"==typeof this.options.setup&&this.options.setup(this),this.on("click",this.onClick.bind(this));const i=this.options.scrollToDate?this.getDate():null;this.renderAll(i)}on(t,e,i={}){this.ui.container.addEventListener(t,e,i)}off(t,e,i={}){this.ui.container.removeEventListener(t,e,i)}trigger(t,e={}){return this.ui.container.dispatchEvent(new CustomEvent(t,{detail:e}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),"function"==typeof this.options.documentClick&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach((t=>{this.PluginManager.removeInstance(t)})),this.ui.wrapper.remove()}onRender(t){const{view:e,date:i}=t.detail;this.Calendar.render(i,e)}onView(t){const{view:e,target:i}=t.detail;"Footer"===e&&this.datePicked.length&&(i.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(t){this.isCalendarHeaderButton(t)&&(t.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(e){if(this.isCalendarDay(e)){const i=new t(e.dataset.time);this.options.autoApply?(this.setDate(i),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=i,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(t){if(this.isApplyButton(t)){if(this.datePicked[0]instanceof Date){const t=this.datePicked[0].clone();this.setDate(t)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(t){this.isCancelButton(t)&&this.hide()}onClick(t){const e=t.target;if(e instanceof HTMLElement){const t=e.closest(".unit");if(!(t instanceof HTMLElement))return;this.onClickHeaderButton(t),this.onClickCalendarDay(t),this.onClickApplyButton(t),this.onClickCancelButton(t)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(t){if(this.isShown())return;const e=t&&"target"in t?t.target:this.options.element,{top:i,left:n}=this.adjustPosition(e);this.ui.container.style.top=`${i}px`,this.ui.container.style.left=`${n}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:e})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(e){const i=new t(e,this.options.format);this.options.date=i.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof t?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){const t=this.getDate(),e=t instanceof Date?t.format(this.options.format,this.options.lang):"",i=this.options.element;i instanceof HTMLInputElement?i.value=e:i instanceof HTMLElement&&(i.innerText=e)}hidePicker(t){let e=t.target,i=null;e.shadowRoot&&(e=t.composedPath()[0],i=e.getRootNode().host),this.isShown()&&i!==this.ui.wrapper&&e!==this.options.element&&this.hide()}renderAll(t){this.trigger("render",{view:"Container",date:(t||this.calendars[0]).clone()})}isCalendarHeaderButton(t){return["previous-button","next-button"].some((e=>t.classList.contains(e)))}isCalendarDay(t){return t.classList.contains("day")}isApplyButton(t){return t.classList.contains("apply-button")}isCancelButton(t){return t.classList.contains("cancel-button")}gotoDate(e){const i=new t(e,this.options.format);i.setDate(1),this.calendars[0]=i.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),"function"==typeof this.options.documentClick&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new t(this.options.date,this.options.format):this.calendars[0]=new t}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach((t=>{const e=document.createElement("link");e.href=t,e.rel="stylesheet";const i=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};e.addEventListener("load",i),e.addEventListener("error",i),this.ui.shadowRoot.append(e)}));else if("string"==typeof this.options.css){const t=document.createElement("style"),e=document.createTextNode(this.options.css);t.appendChild(e),this.ui.shadowRoot.append(t),this.ui.wrapper.style.display=""}else"function"==typeof this.options.css&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(t){const e=t.getBoundingClientRect(),i=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");const n=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let s=e.bottom-i.bottom,o=e.left-i.left;return"undefined"!=typeof window&&(window.innerHeight<s+n.height&&s-n.height>=0&&(s=e.top-i.top-n.height),window.innerWidth<o+n.width&&e.right-n.width>=0&&(o=e.right-i.right-n.width)),{left:o,top:s}}}var s=Object.freeze({__proto__:null,Core:n,create:n});class o{picker;options;priority=0;dependencies=[];attach(t){const e=this.getName(),i={...this.options};this.options={...this.options,...t.options[e]||{}};for(const n of Object.keys(i))if(null!==i[n]&&"object"==typeof i[n]&&Object.keys(i[n]).length&&e in t.options&&n in t.options[e]){const s={...t.options[e][n]};null!==s&&"object"==typeof s&&Object.keys(s).length&&Object.keys(s).every((t=>Object.keys(i[n]).includes(t)))&&(this.options[n]={...i[n],...s})}if(this.picker=t,this.dependenciesNotFound()){const t=this.dependencies.filter((t=>!this.pluginsAsStringArray().includes(t)));return void console.warn(`${this.getName()}: required dependencies (${t.join(", ")}).`)}const n=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.add(n),this.onAttach()}detach(){const t=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.remove(t),"function"==typeof this.onDetach&&this.onDetach()}dependenciesNotFound(){return this.dependencies.length&&!this.dependencies.every((t=>this.pluginsAsStringArray().includes(t)))}pluginsAsStringArray(){return this.picker.options.plugins.map((t=>"function"==typeof t?(new t).getName():t))}camelCaseToKebab(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}}class a extends o{priority=1;binds={onView:this.onView.bind(this)};options={minDate:null,maxDate:null,minDays:null,maxDays:null,selectForward:null,selectBackward:null,presets:!0,inseparable:!1,filter:null};getName(){return"LockPlugin"}onAttach(){if(this.options.minDate&&(this.options.minDate=new t(this.options.minDate,this.picker.options.format,this.picker.options.lang)),this.options.maxDate&&(this.options.maxDate=new t(this.options.maxDate,this.picker.options.format,this.picker.options.lang),this.options.maxDate instanceof t&&this.picker.options.calendars>1&&this.picker.calendars[0].isSame(this.options.maxDate,"month"))){const t=this.picker.calendars[0].clone().subtract(1,"month");this.picker.gotoDate(t)}if((this.options.minDays||this.options.maxDays||this.options.selectForward||this.options.selectBackward)&&!this.picker.options.plugins.includes("RangePlugin")){const t=["minDays","maxDays","selectForward","selectBackward"];console.warn(`${this.getName()}: options ${t.join(", ")} required RangePlugin.`)}this.picker.on("view",this.binds.onView)}onDetach(){this.picker.off("view",this.binds.onView)}onView(e){const{view:i,target:n,date:s}=e.detail;if("CalendarHeader"===i&&(this.options.minDate instanceof t&&s.isSameOrBefore(this.options.minDate,"month")&&n.classList.add("no-previous-month"),this.options.maxDate instanceof t&&s.isSameOrAfter(this.options.maxDate,"month")&&n.classList.add("no-next-month")),"CalendarDay"===i){const t=this.picker.datePicked.length?this.picker.datePicked[0]:null;if(this.testFilter(s))return void n.classList.add("locked");if(this.options.inseparable){if(this.options.minDays){const t=s.clone().subtract(this.options.minDays-1,"day"),e=s.clone().add(this.options.minDays-1,"day");let i=!1,o=!1;for(;t.isBefore(s,"day");){if(this.testFilter(t)){i=!0;break}t.add(1,"day")}for(;e.isAfter(s,"day");){if(this.testFilter(e)){o=!0;break}e.subtract(1,"day")}i&&o&&n.classList.add("not-available")}this.rangeIsNotAvailable(s,t)&&n.classList.add("not-available")}this.dateIsNotAvailable(s,t)&&n.classList.add("not-available")}if(this.options.presets&&"PresetPluginButton"===i){const e=new t(Number(n.dataset.start)),i=new t(Number(n.dataset.end)),s=i.diff(e,"day"),o=this.options.minDays&&s<this.options.minDays,a=this.options.maxDays&&s>this.options.maxDays;(o||a||this.lockMinDate(e)||this.lockMaxDate(e)||this.lockMinDate(i)||this.lockMaxDate(i)||this.rangeIsNotAvailable(e,i))&&n.setAttribute("disabled","disabled")}}dateIsNotAvailable(t,e){return this.lockMinDate(t)||this.lockMaxDate(t)||this.lockMinDays(t,e)||this.lockMaxDays(t,e)||this.lockSelectForward(t)||this.lockSelectBackward(t)}rangeIsNotAvailable(t,e){if(!t||!e)return!1;const i=(t.isSameOrBefore(e,"day")?t:e).clone(),n=(e.isSameOrAfter(t,"day")?e:t).clone();for(;i.isSameOrBefore(n,"day");){if(this.testFilter(i))return!0;i.add(1,"day")}return!1}lockMinDate(e){return this.options.minDate instanceof t&&e.isBefore(this.options.minDate,"day")}lockMaxDate(e){return this.options.maxDate instanceof t&&e.isAfter(this.options.maxDate,"day")}lockMinDays(t,e){if(this.options.minDays&&e){const i=e.clone().subtract(this.options.minDays-1,"day"),n=e.clone().add(this.options.minDays-1,"day");return t.isBetween(i,n)}return!1}lockMaxDays(t,e){if(this.options.maxDays&&e){const i=e.clone().subtract(this.options.maxDays,"day"),n=e.clone().add(this.options.maxDays,"day");return!t.isBetween(i,n)}return!1}lockSelectForward(t){if(1===this.picker.datePicked.length&&this.options.selectForward){const e=this.picker.datePicked[0].clone();return t.isBefore(e,"day")}return!1}lockSelectBackward(t){if(1===this.picker.datePicked.length&&this.options.selectBackward){const e=this.picker.datePicked[0].clone();return t.isAfter(e,"day")}return!1}testFilter(t){return"function"==typeof this.options.filter&&this.options.filter(t,this.picker.datePicked)}}class r extends o{dependencies=["RangePlugin"];binds={onView:this.onView.bind(this),onClick:this.onClick.bind(this)};options={customLabels:["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month"],customPreset:{},position:"left"};getName(){return"PresetPlugin"}onAttach(){if(!Object.keys(this.options.customPreset).length){const e=new t,i=()=>{const i=e.clone();i.setDate(1);const n=new Date(e.getFullYear(),e.getMonth()+1,0);return[new t(i),new t(n)]},n=()=>{const i=e.clone();i.setMonth(i.getMonth()-1),i.setDate(1);const n=new Date(e.getFullYear(),e.getMonth(),0);return[new t(i),new t(n)]},s=[[e.clone(),e.clone()],[e.clone().subtract(1,"day"),e.clone().subtract(1,"day")],[e.clone().subtract(6,"day"),e.clone()],[e.clone().subtract(29,"day"),e.clone()],i(),n()];Object.values(this.options.customLabels).forEach(((t,e)=>{this.options.customPreset[t]=s[e]}))}this.picker.on("view",this.binds.onView),this.picker.on("click",this.binds.onClick)}onDetach(){this.picker.off("view",this.binds.onView),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:i}=t.detail;if("Main"===e){const t=document.createElement("div");t.className="preset-plugin-container",Object.keys(this.options.customPreset).forEach((e=>{if(Object.prototype.hasOwnProperty.call(this.options.customPreset,e)){const i=this.options.customPreset[e],n=document.createElement("button");n.className="preset-button unit",n.innerHTML=e,n.dataset.start=i[0].getTime(),n.dataset.end=i[1].getTime(),t.appendChild(n),this.picker.trigger("view",{view:"PresetPluginButton",target:n})}})),i.appendChild(t),i.classList.add(`preset-${this.options.position}`),this.picker.trigger("view",{view:"PresetPluginContainer",target:t})}}onClick(e){const i=e.target;if(i instanceof HTMLElement){const e=i.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.isPresetButton(e)){const i=new t(Number(e.dataset.start)),n=new t(Number(e.dataset.end));this.picker.options.autoApply?(this.picker.setDateRange(i,n),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.picker.datePicked=[i,n],this.picker.renderAll())}}}isPresetButton(t){return t.classList.contains("preset-button")}}class c extends o{tooltipElement;triggerElement;binds={setStartDate:this.setStartDate.bind(this),setEndDate:this.setEndDate.bind(this),setDateRange:this.setDateRange.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onShow:this.onShow.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClickCalendarDay:this.onClickCalendarDay.bind(this),onClickApplyButton:this.onClickApplyButton.bind(this),parseValues:this.parseValues.bind(this),updateValues:this.updateValues.bind(this),clear:this.clear.bind(this)};options={elementEnd:null,startDate:null,endDate:null,repick:!1,strict:!0,delimiter:" - ",tooltip:!0,tooltipNumber:t=>t,locale:{zero:"",one:"day",two:"",few:"",many:"",other:"days"},documentClick:this.hidePicker.bind(this)};getName(){return"RangePlugin"}onAttach(){this.binds._setStartDate=this.picker.setStartDate,this.binds._setEndDate=this.picker.setEndDate,this.binds._setDateRange=this.picker.setDateRange,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,this.binds._parseValues=this.picker.parseValues,this.binds._updateValues=this.picker.updateValues,this.binds._clear=this.picker.clear,this.binds._onClickCalendarDay=this.picker.onClickCalendarDay,this.binds._onClickApplyButton=this.picker.onClickApplyButton,Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds.setStartDate},setEndDate:{configurable:!0,value:this.binds.setEndDate},setDateRange:{configurable:!0,value:this.binds.setDateRange},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},parseValues:{configurable:!0,value:this.binds.parseValues},updateValues:{configurable:!0,value:this.binds.updateValues},clear:{configurable:!0,value:this.binds.clear},onClickCalendarDay:{configurable:!0,value:this.binds.onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds.onClickApplyButton}}),this.options.elementEnd&&(this.options.elementEnd instanceof HTMLElement||(this.options.elementEnd=this.picker.options.doc.querySelector(this.options.elementEnd)),this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.readOnly=this.picker.options.readonly),"function"==typeof this.picker.options.documentClick&&(document.removeEventListener("click",this.picker.options.documentClick,!0),"function"==typeof this.options.documentClick&&document.addEventListener("click",this.options.documentClick,!0)),this.options.elementEnd.addEventListener("click",this.picker.show.bind(this.picker))),this.options.repick=this.options.repick&&this.options.elementEnd instanceof HTMLElement,this.picker.options.date=null,this.picker.on("view",this.binds.onView),this.picker.on("show",this.binds.onShow),this.picker.on("mouseenter",this.binds.onMouseEnter,!0),this.picker.on("mouseleave",this.binds.onMouseLeave,!0),this.checkIntlPluralLocales()}onDetach(){Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds._setStartDate},setEndDate:{configurable:!0,value:this.binds._setEndDate},setDateRange:{configurable:!0,value:this.binds._setDateRange},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate},parseValues:{configurable:!0,value:this.binds._parseValues},updateValues:{configurable:!0,value:this.binds._updateValues},clear:{configurable:!0,value:this.binds._clear},onClickCalendarDay:{configurable:!0,value:this.binds._onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds._onClickApplyButton}}),this.picker.off("view",this.binds.onView),this.picker.off("show",this.binds.onShow),this.picker.off("mouseenter",this.binds.onMouseEnter,!0),this.picker.off("mouseleave",this.binds.onMouseLeave,!0)}parseValues(){if(this.options.startDate||this.options.endDate)this.options.strict?this.options.startDate&&this.options.endDate?this.setDateRange(this.options.startDate,this.options.endDate):(this.options.startDate=null,this.options.endDate=null):(this.options.startDate&&this.setStartDate(this.options.startDate),this.options.endDate&&this.setEndDate(this.options.endDate));else if(this.options.elementEnd)this.options.strict?this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setDateRange(this.picker.options.element.value,this.options.elementEnd.value):(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.setStartDate(this.picker.options.element.value),this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setEndDate(this.options.elementEnd.value));else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[t,e]=this.picker.options.element.value.split(this.options.delimiter);this.options.strict?t&&e&&this.setDateRange(t,e):(t&&this.setStartDate(t),e&&this.setEndDate(e))}}updateValues(){const t=this.picker.options.element,e=this.options.elementEnd,i=this.picker.getStartDate(),n=this.picker.getEndDate(),s=i instanceof Date?i.format(this.picker.options.format,this.picker.options.lang):"",o=n instanceof Date?n.format(this.picker.options.format,this.picker.options.lang):"";if(e)t instanceof HTMLInputElement?t.value=s:t instanceof HTMLElement&&(t.innerText=s),e instanceof HTMLInputElement?e.value=o:e instanceof HTMLElement&&(e.innerText=o);else{const e=`${s}${s||o?this.options.delimiter:""}${o}`;t instanceof HTMLInputElement?t.value=e:t instanceof HTMLElement&&(t.innerText=e)}}clear(){this.options.startDate=null,this.options.endDate=null,this.picker.datePicked.length=0,this.updateValues(),this.picker.renderAll(),this.picker.trigger("clear")}onShow(t){const{target:e}=t.detail;this.triggerElement=e,this.picker.options.scrollToDate&&this.getStartDate()instanceof Date&&this.picker.gotoDate(this.getStartDate()),this.initializeRepick()}onView(e){const{view:i,target:n}=e.detail;if("Main"===i&&(this.tooltipElement=document.createElement("span"),this.tooltipElement.className="range-plugin-tooltip",n.appendChild(this.tooltipElement)),"CalendarDay"===i){const e=new t(n.dataset.time),i=this.picker.datePicked,s=i.length?this.picker.datePicked[0]:this.getStartDate(),o=i.length?this.picker.datePicked[1]:this.getEndDate();s&&s.isSame(e,"day")&&n.classList.add("start"),s&&o&&(o.isSame(e,"day")&&n.classList.add("end"),e.isBetween(s,o)&&n.classList.add("in-range"))}if("Footer"===i){const t=1===this.picker.datePicked.length&&!this.options.strict||2===this.picker.datePicked.length;n.querySelector(".apply-button").disabled=!t}}hidePicker(t){let e=t.target,i=null;e.shadowRoot&&(e=t.composedPath()[0],i=e.getRootNode().host),this.picker.isShown()&&i!==this.picker.ui.wrapper&&e!==this.picker.options.element&&e!==this.options.elementEnd&&this.picker.hide()}setStartDate(e){const i=new t(e,this.picker.options.format);this.options.startDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setEndDate(e){const i=new t(e,this.picker.options.format);this.options.endDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setDateRange(e,i){const n=new t(e,this.picker.options.format),s=new t(i,this.picker.options.format);this.options.startDate=n?n.clone():null,this.options.endDate=s?s.clone():null,this.updateValues(),this.picker.renderAll()}getStartDate(){return this.options.startDate instanceof Date?this.options.startDate.clone():null}getEndDate(){return this.options.endDate instanceof Date?this.options.endDate.clone():null}onMouseEnter(e){const i=e.target;if(i instanceof HTMLElement){this.isContainer(i)&&this.initializeRepick();const e=i.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.picker.isCalendarDay(e)){if(1!==this.picker.datePicked.length)return;let i=this.picker.datePicked[0].clone(),n=new t(e.dataset.time),s=!1;if(i.isAfter(n,"day")){const t=i.clone();i=n.clone(),n=t.clone(),s=!0}if([...this.picker.ui.container.querySelectorAll(".day")].forEach((o=>{const a=new t(o.dataset.time),r=this.picker.Calendar.getCalendarDayView(a);a.isBetween(i,n)&&r.classList.add("in-range"),a.isSame(this.picker.datePicked[0],"day")&&(r.classList.add("start"),r.classList.toggle("flipped",s)),o===e&&(r.classList.add("end"),r.classList.toggle("flipped",s)),o.className=r.className})),this.options.tooltip){const t=this.options.tooltipNumber(n.diff(i,"day")+1);if(t>0){const i=new Intl.PluralRules(this.picker.options.lang).select(t),n=`${t} ${this.options.locale[i]}`;this.showTooltip(e,n)}else this.hideTooltip()}}}}onMouseLeave(t){if(this.isContainer(t.target)&&this.options.repick){const t=this.getStartDate(),e=this.getEndDate();t&&e&&(this.picker.datePicked.length=0,this.picker.renderAll())}}onClickCalendarDay(e){if(this.picker.isCalendarDay(e)){2===this.picker.datePicked.length&&(this.picker.datePicked.length=0);const i=new t(e.dataset.time);if(this.picker.datePicked[this.picker.datePicked.length]=i,2===this.picker.datePicked.length&&this.picker.datePicked[0].isAfter(this.picker.datePicked[1])){const t=this.picker.datePicked[1].clone();this.picker.datePicked[1]=this.picker.datePicked[0].clone(),this.picker.datePicked[0]=t.clone()}1!==this.picker.datePicked.length&&this.picker.options.autoApply||this.picker.trigger("preselect",{start:this.picker.datePicked[0]instanceof Date?this.picker.datePicked[0].clone():null,end:this.picker.datePicked[1]instanceof Date?this.picker.datePicked[1].clone():null}),1===this.picker.datePicked.length&&(!this.options.strict&&this.picker.options.autoApply&&(this.picker.options.element===this.triggerElement&&this.setStartDate(this.picker.datePicked[0]),this.options.elementEnd===this.triggerElement&&this.setEndDate(this.picker.datePicked[0]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()})),this.picker.renderAll()),2===this.picker.datePicked.length&&(this.picker.options.autoApply?(this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.hideTooltip(),this.picker.renderAll()))}}onClickApplyButton(t){this.picker.isApplyButton(t)&&(1!==this.picker.datePicked.length||this.options.strict||(this.picker.options.element===this.triggerElement&&(this.options.endDate=null,this.setStartDate(this.picker.datePicked[0])),this.options.elementEnd===this.triggerElement&&(this.options.startDate=null,this.setEndDate(this.picker.datePicked[0]))),2===this.picker.datePicked.length&&this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide())}showTooltip(t,e){this.tooltipElement.style.visibility="visible",this.tooltipElement.innerHTML=e;const i=this.picker.ui.container.getBoundingClientRect(),n=this.tooltipElement.getBoundingClientRect(),s=t.getBoundingClientRect();let o=s.top,a=s.left;o-=i.top,a-=i.left,o-=n.height,a-=n.width/2,a+=s.width/2,this.tooltipElement.style.top=`${o}px`,this.tooltipElement.style.left=`${a}px`}hideTooltip(){this.tooltipElement.style.visibility="hidden"}checkIntlPluralLocales(){if(!this.options.tooltip)return;const t=[...new Set([new Intl.PluralRules(this.picker.options.lang).select(0),new Intl.PluralRules(this.picker.options.lang).select(1),new Intl.PluralRules(this.picker.options.lang).select(2),new Intl.PluralRules(this.picker.options.lang).select(6),new Intl.PluralRules(this.picker.options.lang).select(18)])],e=Object.keys(this.options.locale);t.every((t=>e.includes(t)))||console.warn(`${this.getName()}: provide locales (${t.join(", ")}) for correct tooltip text.`)}initializeRepick(){if(!this.options.repick)return;const t=this.getStartDate(),e=this.getEndDate();e&&this.triggerElement===this.picker.options.element&&(this.picker.datePicked[0]=e),t&&this.triggerElement===this.options.elementEnd&&(this.picker.datePicked[0]=t)}isContainer(t){return t===this.picker.ui.container}}class l extends o{options={native:!1,seconds:!1,stepHours:1,stepMinutes:5,stepSeconds:5,format12:!1};rangePlugin;timePicked={input:null,start:null,end:null};timePrePicked={input:null,start:null,end:null};binds={getDate:this.getDate.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onInput:this.onInput.bind(this),onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),setTime:this.setTime.bind(this),setStartTime:this.setStartTime.bind(this),setEndTime:this.setEndTime.bind(this)};getName(){return"TimePlugin"}onAttach(){this.binds._getDate=this.picker.getDate,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,Object.defineProperties(this.picker,{getDate:{configurable:!0,value:this.binds.getDate},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},setTime:{configurable:!0,value:this.binds.setTime},setStartTime:{configurable:!0,value:this.binds.setStartTime},setEndTime:{configurable:!0,value:this.binds.setEndTime}}),this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.parseValues(),this.picker.on("view",this.binds.onView),this.picker.on("input",this.binds.onInput),this.picker.on("change",this.binds.onChange),this.picker.on("click",this.binds.onClick)}onDetach(){delete this.picker.setTime,delete this.picker.setStartTime,delete this.picker.setEndTime,Object.defineProperties(this.picker,{getDate:{configurable:!0,value:this.binds._getDate},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate}}),this.picker.off("view",this.binds.onView),this.picker.off("input",this.binds.onInput),this.picker.off("change",this.binds.onChange),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:i}=t.detail;if("Main"===e){this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin");const t=document.createElement("div");if(t.className="time-plugin-container",this.rangePlugin){const e=this.getStartInput();t.appendChild(e),this.picker.trigger("view",{view:"TimePluginInput",target:e});const i=this.getEndInput();t.appendChild(i),this.picker.trigger("view",{view:"TimePluginInput",target:i})}else{const e=this.getSingleInput();t.appendChild(e),this.picker.trigger("view",{view:"TimePluginInput",target:e})}i.appendChild(t),this.picker.trigger("view",{view:"TimePluginContainer",target:t})}}onInput(e){const i=e.target;if(i instanceof HTMLInputElement&&i.classList.contains("time-plugin-input")){const e=this.timePicked[i.name]||new t,[n,s]=i.value.split(":");e.setHours(Number(n)||0,Number(s)||0,0,0),this.picker.options.autoApply?(this.timePicked[i.name]=e,this.picker.updateValues()):this.timePrePicked[i.name]=e}}onChange(e){const i=e.target;if(i instanceof HTMLSelectElement&&i.classList.contains("time-plugin-custom-input")){const e=/(\w+)\[(\w+)\]/,[,n,s]=i.name.match(e),o=Number(i.value);let a=new t;switch(!this.picker.options.autoApply&&this.timePrePicked[n]instanceof Date?a=this.timePrePicked[n].clone():this.timePicked[n]instanceof Date&&(a=this.timePicked[n].clone()),s){case"HH":if(this.options.format12){const t=i.closest(".time-plugin-custom-block").querySelector(`select[name="${n}[period]"]`).value,e=this.handleFormat12(t,a,o);a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),0)}else a.setHours(o,a.getMinutes(),a.getSeconds(),0);break;case"mm":a.setHours(a.getHours(),o,a.getSeconds(),0);break;case"ss":a.setHours(a.getHours(),a.getMinutes(),o,0);break;case"period":if(this.options.format12){const t=i.closest(".time-plugin-custom-block").querySelector(`select[name="${n}[HH]"]`).value,e=this.handleFormat12(i.value,a,Number(t));a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),0)}}if(this.picker.options.autoApply)this.timePicked[n]=a,this.picker.updateValues();else{this.timePrePicked[n]=a;const t=this.picker.ui.container.querySelector(".apply-button");if(this.rangePlugin){const e=this.rangePlugin.options,i=this.picker.datePicked,n=e.strict&&2===i.length||!e.strict&&i.length>0||!i.length&&e.strict&&e.startDate instanceof Date&&e.endDate instanceof Date||!i.length&&!e.strict&&(e.startDate instanceof Date||e.endDate instanceof Date);t.disabled=!n}else this.picker.datePicked.length&&(t.disabled=!1)}}}onClick(t){const e=t.target;if(e instanceof HTMLElement){const t=e.closest(".unit");if(!(t instanceof HTMLElement))return;this.picker.isApplyButton(t)&&(Object.keys(this.timePicked).forEach((t=>{this.timePrePicked[t]instanceof Date&&(this.timePicked[t]=this.timePrePicked[t].clone())})),this.picker.updateValues(),this.timePrePicked={input:null,start:null,end:null}),this.picker.isCancelButton(t)&&(this.timePrePicked={input:null,start:null,end:null},this.picker.renderAll())}}setTime(t){const e=this.handleTimeString(t);this.timePicked.input=e.clone(),this.picker.renderAll(),this.picker.updateValues()}setStartTime(t){const e=this.handleTimeString(t);this.timePicked.start=e.clone(),this.picker.renderAll(),this.picker.updateValues()}setEndTime(t){const e=this.handleTimeString(t);this.timePicked.end=e.clone(),this.picker.renderAll(),this.picker.updateValues()}handleTimeString(e){const i=new t,[n,s,o]=e.split(":").map((t=>Number(t))),a=n&&!Number.isNaN(n)?n:0,r=s&&!Number.isNaN(s)?s:0,c=o&&!Number.isNaN(o)?o:0;return i.setHours(a,r,c,0),i}getDate(){if(this.picker.options.date instanceof Date){const e=new t(this.picker.options.date,this.picker.options.format);if(this.timePicked.input instanceof Date){const t=this.timePicked.input;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getStartDate(){if(this.rangePlugin.options.startDate instanceof Date){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format);if(this.timePicked.start instanceof Date){const t=this.timePicked.start;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getEndDate(){if(this.rangePlugin.options.endDate instanceof Date){const e=new t(this.rangePlugin.options.endDate,this.picker.options.format);if(this.timePicked.end instanceof Date){const t=this.timePicked.end;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getSingleInput(){return this.options.native?this.getNativeInput("input"):this.getCustomInput("input")}getStartInput(){return this.options.native?this.getNativeInput("start"):this.getCustomInput("start")}getEndInput(){return this.options.native?this.getNativeInput("end"):this.getCustomInput("end")}getNativeInput(t){const e=document.createElement("input");e.type="time",e.name=t,e.className="time-plugin-input unit";const i=this.timePicked[t];if(i){const t=`0${i.getHours()}`.slice(-2),n=`0${i.getMinutes()}`.slice(-2);e.value=`${t}:${n}`}return e}getCustomInput(t){const e=document.createElement("div");e.className="time-plugin-custom-block";const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[HH]`;const n=this.options.format12?1:0,s=this.options.format12?13:24;let o=null;!this.picker.options.autoApply&&this.timePrePicked[t]instanceof Date?o=this.timePrePicked[t].clone():this.timePicked[t]instanceof Date&&(o=this.timePicked[t].clone());for(let t=n;t<s;t+=this.options.stepHours){const e=document.createElement("option");e.value=String(t),e.text=String(t),o&&(this.options.format12?(o.getHours()%12?o.getHours()%12:12)===t&&(e.selected=!0):o.getHours()===t&&(e.selected=!0)),i.appendChild(e)}e.appendChild(i);const a=document.createElement("select");a.className="time-plugin-custom-input unit",a.name=`${t}[mm]`;for(let t=0;t<60;t+=this.options.stepMinutes){const e=document.createElement("option");e.value=`0${String(t)}`.slice(-2),e.text=`0${String(t)}`.slice(-2),o&&o.getMinutes()===t&&(e.selected=!0),a.appendChild(e)}if(e.appendChild(a),this.options.seconds){const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[ss]`;const n=60;for(let t=0;t<n;t+=this.options.stepSeconds){const e=document.createElement("option");e.value=`0${String(t)}`.slice(-2),e.text=`0${String(t)}`.slice(-2),o&&o.getSeconds()===t&&(e.selected=!0),i.appendChild(e)}e.appendChild(i)}if(this.options.format12){const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[period]`,["AM","PM"].forEach((t=>{const e=document.createElement("option");e.value=t,e.text=t,o&&"PM"===t&&o.getHours()>=12&&(e.selected=!0),i.appendChild(e)})),e.appendChild(i)}return e}handleFormat12(t,e,i){const n=e.clone();switch(t){case"AM":12===i?n.setHours(0,n.getMinutes(),n.getSeconds(),0):n.setHours(i,n.getMinutes(),n.getSeconds(),0);break;case"PM":12!==i?n.setHours(i+12,n.getMinutes(),n.getSeconds(),0):n.setHours(i,n.getMinutes(),n.getSeconds(),0)}return n}parseValues(){if(this.rangePlugin){if(this.rangePlugin.options.strict){if(this.rangePlugin.options.startDate&&this.rangePlugin.options.endDate){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format),i=new t(this.rangePlugin.options.endDate,this.picker.options.format);this.timePicked.start=e.clone(),this.timePicked.end=i.clone()}}else{if(this.rangePlugin.options.startDate){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format);this.timePicked.start=e.clone()}if(this.rangePlugin.options.endDate){const e=new t(this.rangePlugin.options.endDate,this.picker.options.format);this.timePicked.end=e.clone()}}if(this.rangePlugin.options.elementEnd)if(this.rangePlugin.options.strict){if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.rangePlugin.options.elementEnd instanceof HTMLInputElement&&this.rangePlugin.options.elementEnd.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format),i=new t(this.rangePlugin.options.elementEnd.value,this.picker.options.format);this.timePicked.start=e.clone(),this.timePicked.end=i.clone()}}else{if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format);this.timePicked.start=e.clone()}if(this.rangePlugin.options.elementEnd instanceof HTMLInputElement&&this.rangePlugin.options.elementEnd.value.length){const e=new t(this.rangePlugin.options.elementEnd.value,this.picker.options.format);this.timePicked.start=e.clone()}}else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[e,i]=this.picker.options.element.value.split(this.rangePlugin.options.delimiter);if(this.rangePlugin.options.strict){if(e&&i){const n=new t(e,this.picker.options.format),s=new t(i,this.picker.options.format);this.timePicked.start=n.clone(),this.timePicked.end=s.clone()}}else{if(e){const i=new t(e,this.picker.options.format);this.timePicked.start=i.clone()}if(i){const e=new t(i,this.picker.options.format);this.timePicked.start=e.clone()}}}}else{if(this.picker.options.date){const e=new t(this.picker.options.date,this.picker.options.format);this.timePicked.input=e.clone()}if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format);this.timePicked.input=e.clone()}}}}class h extends o{docElement=null;rangePlugin;binds={onView:this.onView.bind(this),onKeydown:this.onKeydown.bind(this)};options={unitIndex:1,dayIndex:2};getName(){return"KbdPlugin"}onAttach(){const t=this.picker.options.element,e=t.getBoundingClientRect();if(this.docElement=document.createElement("span"),this.docElement.style.position="absolute",this.docElement.style.top=`${t.offsetTop}px`,this.docElement.style.left=t.offsetLeft+e.width-25+"px",this.docElement.attachShadow({mode:"open"}),this.options.html)this.docElement.shadowRoot.innerHTML=this.options.html;else{const t=`\n      <style>\n      button {\n        border: none;\n        background: transparent;\n        font-size: ${window.getComputedStyle(this.picker.options.element).fontSize};\n      }\n      </style>\n\n      <button>&#128197;</button>\n      `;this.docElement.shadowRoot.innerHTML=t}const i=this.docElement.shadowRoot.querySelector("button");i&&(i.addEventListener("click",(t=>{t.preventDefault(),this.picker.show({target:this.picker.options.element})}),{capture:!0}),i.addEventListener("keydown",(t=>{"Escape"===t.code&&this.picker.hide()}),{capture:!0})),this.picker.options.element.after(this.docElement),this.picker.on("view",this.binds.onView),this.picker.on("keydown",this.binds.onKeydown)}onDetach(){this.docElement&&this.docElement.isConnected&&this.docElement.remove(),this.picker.off("view",this.binds.onView),this.picker.off("keydown",this.binds.onKeydown)}onView(t){const{view:e,target:i}=t.detail;i&&"querySelector"in i&&("CalendarDay"!==e||["locked","not-available"].some((t=>i.classList.contains(t)))?[...i.querySelectorAll(".unit:not(.day)")].forEach((t=>t.tabIndex=this.options.unitIndex)):i.tabIndex=this.options.dayIndex)}onKeydown(t){switch(this.onMouseEnter(t),t.code){case"ArrowUp":case"ArrowDown":this.verticalMove(t);break;case"ArrowLeft":case"ArrowRight":this.horizontalMove(t);break;case"Enter":case"Space":this.handleEnter(t);break;case"Escape":this.picker.hide()}}findAllowableDaySibling(t,e,i){const n=Array.from(t.querySelectorAll(`.day[tabindex="${this.options.dayIndex}"]`)),s=n.indexOf(e);return n.filter(((t,e)=>i(e,s)&&t.tabIndex===this.options.dayIndex))[0]}changeMonth(t){const e={ArrowLeft:"previous",ArrowRight:"next"},i=this.picker.ui.container.querySelector(`.${e[t.code]}-button[tabindex="${this.options.unitIndex}"]`);i&&!i.parentElement.classList.contains(`no-${e[t.code]}-month`)&&(i.dispatchEvent(new Event("click",{bubbles:!0})),setTimeout((()=>{let e=null;switch(t.code){case"ArrowLeft":const t=this.picker.ui.container.querySelectorAll(`.day[tabindex="${this.options.dayIndex}"]`);e=t[t.length-1];break;case"ArrowRight":e=this.picker.ui.container.querySelector(`.day[tabindex="${this.options.dayIndex}"]`)}e&&e.focus()})))}verticalMove(t){const e=t.target;if(e.classList.contains("day")){t.preventDefault();const i=this.findAllowableDaySibling(this.picker.ui.container,e,((e,i)=>e===("ArrowUp"===t.code?i-7:i+7)));i&&i.focus()}}horizontalMove(t){const e=t.target;if(e.classList.contains("day")){t.preventDefault();const i=this.findAllowableDaySibling(this.picker.ui.container,e,((e,i)=>e===("ArrowLeft"===t.code?i-1:i+1)));i?i.focus():this.changeMonth(t)}}handleEnter(t){const e=t.target;e.classList.contains("day")&&(t.preventDefault(),e.dispatchEvent(new Event("click",{bubbles:!0})),setTimeout((()=>{if(this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.rangePlugin||!this.picker.options.autoApply){const t=this.picker.ui.container.querySelector(".day.selected");t&&setTimeout((()=>{t.focus()}))}})))}onMouseEnter(t){t.target.classList.contains("day")&&setTimeout((()=>{const t=this.picker.ui.shadowRoot.activeElement;t&&t.dispatchEvent(new Event("mouseenter",{bubbles:!0}))}))}}class d extends o{rangePlugin;lockPlugin;priority=10;binds={onView:this.onView.bind(this),onColorScheme:this.onColorScheme.bind(this)};options={dropdown:{months:!1,years:!1,minYear:1950,maxYear:null},darkMode:!0,locale:{resetButton:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>'}};matchMedia;getName(){return"AmpPlugin"}onAttach(){this.options.darkMode&&window&&"matchMedia"in window&&(this.matchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.matchMedia.matches&&(this.picker.ui.container.dataset.theme="dark"),this.matchMedia.addEventListener("change",this.binds.onColorScheme)),this.options.weekNumbers&&this.picker.ui.container.classList.add("week-numbers"),this.picker.on("view",this.binds.onView)}onDetach(){this.options.darkMode&&window&&"matchMedia"in window&&this.matchMedia.removeEventListener("change",this.binds.onColorScheme),this.picker.ui.container.removeAttribute("data-theme"),this.picker.ui.container.classList.remove("week-numbers"),this.picker.off("view",this.binds.onView)}onView(t){this.lockPlugin=this.picker.PluginManager.getInstance("LockPlugin"),this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.handleDropdown(t),this.handleResetButton(t),this.handleWeekNumbers(t)}onColorScheme(t){const e=t.matches?"dark":"light";this.picker.ui.container.dataset.theme=e}handleDropdown(e){const{view:i,target:n,date:s,index:o}=e.detail;if("CalendarHeader"===i){const e=n.querySelector(".month-name");if(this.options.dropdown.months){e.childNodes[0].remove();const i=document.createElement("select");i.className="month-name--select month-name--dropdown";for(let e=0;e<12;e+=1){const n=document.createElement("option"),o=new t(new Date(s.getFullYear(),e,2,0,0,0)),a=new t(new Date(s.getFullYear(),e,1,0,0,0));n.value=String(e),n.text=o.toLocaleString(this.picker.options.lang,{month:"long"}),this.lockPlugin&&(n.disabled=this.lockPlugin.options.minDate&&a.isBefore(new t(this.lockPlugin.options.minDate),"month")||this.lockPlugin.options.maxDate&&a.isAfter(new t(this.lockPlugin.options.maxDate),"month")),n.selected=a.getMonth()===s.getMonth(),i.appendChild(n)}i.addEventListener("change",(t=>{const e=t.target;this.picker.calendars[0].setDate(1),this.picker.calendars[0].setMonth(Number(e.value)),this.picker.renderAll()})),e.prepend(i)}if(this.options.dropdown.years){e.childNodes[1].remove();const i=document.createElement("select");i.className="month-name--select";const n=this.options.dropdown.minYear,o=this.options.dropdown.maxYear?this.options.dropdown.maxYear:(new Date).getFullYear();if(s.getFullYear()>o){const t=document.createElement("option");t.value=String(s.getFullYear()),t.text=String(s.getFullYear()),t.selected=!0,t.disabled=!0,i.appendChild(t)}for(let e=o;e>=n;e-=1){const n=document.createElement("option"),o=new t(new Date(e,0,1,0,0,0));n.value=String(e),n.text=String(e),this.lockPlugin&&(n.disabled=this.lockPlugin.options.minDate&&o.isBefore(new t(this.lockPlugin.options.minDate),"year")||this.lockPlugin.options.maxDate&&o.isAfter(new t(this.lockPlugin.options.maxDate),"year")),n.selected=s.getFullYear()===e,i.appendChild(n)}if(s.getFullYear()<n){const t=document.createElement("option");t.value=String(s.getFullYear()),t.text=String(s.getFullYear()),t.selected=!0,t.disabled=!0,i.appendChild(t)}if("asc"===this.options.dropdown.years){const t=Array.prototype.slice.call(i.childNodes).reverse();i.innerHTML="",t.forEach((t=>{t.innerHTML=t.value,i.appendChild(t)}))}i.addEventListener("change",(t=>{const e=t.target;this.picker.calendars[0].setFullYear(Number(e.value)),this.picker.renderAll()})),e.appendChild(i)}}}handleResetButton(t){const{view:e,target:i}=t.detail;if("CalendarHeader"===e&&this.options.resetButton){const t=document.createElement("button");t.className="reset-button unit",t.innerHTML=this.options.locale.resetButton,t.addEventListener("click",(t=>{t.preventDefault();let e=!0;"function"==typeof this.options.resetButton&&(e=this.options.resetButton.call(this)),e&&this.picker.clear()})),i.appendChild(t)}}handleWeekNumbers(e){if(this.options.weekNumbers){const{view:i,target:n}=e.detail;if("CalendarDayNames"===i){const t=document.createElement("div");t.className="wnum-header",t.innerHTML="Wk",n.prepend(t)}"CalendarDays"===i&&[...n.children].forEach(((e,i)=>{if(0===i||i%7==0){let i;if(e.classList.contains("day"))i=new t(e.dataset.time);else{const e=n.querySelector(".day");i=new t(e.dataset.time)}let s=i.getWeek(this.picker.options.firstDay);53===s&&0===i.getMonth()&&(s="53/1");const o=document.createElement("div");o.className="wnum-item",o.innerHTML=String(s),n.insertBefore(o,e)}}))}}}


/***/ }),

/***/ "./src/chat.ts":
/*!*********************!*\
  !*** ./src/chat.ts ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var bundle_1 = __webpack_require__(/*! @easepick/bundle */ "./node_modules/@easepick/bundle/dist/index.esm.js");
var chatWindow = document.querySelector('#chat-window');
var timeTyping = 1500;
function scrollDown(element) {
    setTimeout(function () {
        element.scrollTo({
            top: element.scrollHeight,
        });
        console.log('scroll down');
    }, 200);
}
function toggleChatWindow() {
    chatWindow.classList.toggle('chat-window-close');
    chatWindow.classList.toggle('chat-window-open');
}
document.addEventListener('DOMContentLoaded', function () {
    var chatIcon = document.querySelector('#chat-icon');
    var chatMain = document.querySelector('#chat-main');
    var openIcon = chatIcon.querySelector('.chat-icon-open');
    var closeIcon = chatIcon.querySelector('.chat-icon-close');
    chatIcon.addEventListener('click', function () {
        toggleChatWindow();
        if (chatWindow.classList.contains('chat-window-open')) {
            showMessage();
            scrollDown(chatMain);
        }
        else {
            var chatMessages = chatMessageContainer.querySelectorAll('.chat-message');
            chatMessages.forEach(function (message) {
                message.classList.remove('chat-message-active');
            });
        }
        var observer = new MutationObserver(function (mutations) {
            var locationButton = document.querySelector('#chat-sell-location-button');
            if (locationButton) {
                locationButton.addEventListener('click', function () { });
            }
            mutations.forEach(function (mutation) {
                if (mutation.type === 'childList') {
                    console.log('A child node has been added or removed.');
                    scrollDown(chatMain);
                }
            });
        });
        observer.observe(chatMain, { childList: true });
    });
});
var locationButton = document.querySelector('.chat-filter-location-button');
var dropdownFilterDate = document.querySelector('#chat-filter-location-dropdown');
var inputLocation = document.querySelector('#chat-filter-location-input');
var datalistLocation = document.querySelector('#chat-filter-location-list');
var statusFilterLocation = document.querySelector('#chat-filter-location-status');
var datepickerFilter = document.getElementById('datepicker-filter');
if (datepickerFilter) {
    var chatBody_1 = document.querySelector('#chat-body');
    var picker = new bundle_1.easepick.create({
        element: document.getElementById('datepicker-filter'),
        css: ['https://cdn.jsdelivr.net/npm/@easepick/bundle@1.2.1/dist/index.css'],
        format: 'MM/DD/YYYY',
    });
    datepickerFilter.addEventListener('click', function () {
        scrollDown(chatBody_1);
    });
}
if (locationButton) {
    locationButton.addEventListener('click', function () {
        var chatBody = document.querySelector('#chat-body');
        dropdownFilterDate.classList.toggle('chat-location-dropdown-active');
        inputLocation.focus();
        scrollDown(chatBody);
    });
}
if (inputLocation) {
    inputLocation.onfocus = function () {
        datalistLocation.style.display = 'block';
        inputLocation.style.borderRadius = '5px 5px 0 0';
    };
    var _loop_1 = function (index) {
        var option = datalistLocation.options[index];
        if (typeof option !== 'number') {
            option.onclick = function () {
                inputLocation.value = option.value;
                statusFilterLocation.innerHTML = option.value;
                dropdownFilterDate.classList.remove('chat-location-dropdown-active');
                datalistLocation.style.display = 'none';
                inputLocation.style.borderRadius = '5px';
            };
        }
    };
    for (var index in datalistLocation.options) {
        _loop_1(index);
    }
    inputLocation.oninput = function () {
        currentFocus_1 = -1;
        var text = inputLocation.value.toUpperCase();
        for (var index in datalistLocation.options) {
            var option = datalistLocation.options[index];
            option.value.toUpperCase().indexOf(text) > -1
                ? (option.style.display = 'block')
                : (option.style.display = 'none');
        }
    };
    var currentFocus_1 = -1;
    inputLocation.onkeydown = function (e) {
        if (e.keyCode == 40) {
            currentFocus_1++;
            addActive_1(datalistLocation.options);
        }
        else if (e.keyCode == 38) {
            currentFocus_1--;
            addActive_1(datalistLocation.options);
        }
        else if (e.keyCode == 13) {
            e.preventDefault();
            if (currentFocus_1 > -1) {
                if (datalistLocation.options) {
                    datalistLocation.options[currentFocus_1].click();
                }
            }
        }
    };
    var addActive_1 = function (x) {
        if (!x)
            return;
        false;
        removeActive_1(x);
        if (currentFocus_1 >= x.length)
            currentFocus_1 = 0;
        if (currentFocus_1 < 0)
            currentFocus_1 = x.length - 1;
        x[currentFocus_1].classList.add('active');
    };
    var removeActive_1 = function (x) {
        for (var i = 0; i < x.length; i++) {
            x[i].classList.remove('active');
        }
    };
}
var chatCloseButtons = document.querySelectorAll('.chat-close-button');
if (chatCloseButtons) {
    chatCloseButtons.forEach(function (button) {
        button.addEventListener('click', function () {
            toggleChatWindow();
        });
    });
}
var categoryDropdowns = document.querySelectorAll('.dropdown');
if (categoryDropdowns) {
    var chatBody_2 = document.querySelector('#chat-body');
    categoryDropdowns.forEach(function (dropdown) {
        var dropdownButton = dropdown.querySelector('.dropdown-button');
        var dropdownMenu = dropdown.querySelector('.dropdown-list');
        var dropdownArrow = dropdown.querySelector('.dropdown-arrow');
        var categoryButtons = dropdown.querySelectorAll('.chat-category-button');
        var eventCategoryInput = document.querySelector('#event-category-input');
        var dropdownTitle = dropdown.querySelector('.chat-category-title');
        if (dropdownButton) {
            dropdownButton.addEventListener('click', function (e) {
                scrollDown(chatBody_2);
                var currentDropdown = e.target.closest('.dropdown');
                dropdownMenu.classList.toggle('dropdown-list-active');
                dropdownArrow.classList.toggle('rotate-180');
                categoryButtons.forEach(function (button) {
                    button.addEventListener('click', function () {
                        var currentCategory = button.getAttribute('data-category');
                        eventCategoryInput.value = currentCategory;
                        dropdownTitle.innerHTML = currentCategory;
                        dropdownMenu.classList.remove('dropdown-list-active');
                        dropdownArrow.classList.remove('rotate-180');
                    });
                });
                categoryDropdowns.forEach(function (dropdown) {
                    if (dropdown !== currentDropdown) {
                        dropdown
                            .querySelector('.dropdown-list')
                            .classList.remove('dropdown-list-active');
                    }
                });
                window.addEventListener('mouseup', function (event) {
                    if (!dropdown.contains(event.target)) {
                        dropdownMenu.classList.remove('dropdown-list-active');
                        dropdownArrow.classList.remove('rotate-180');
                    }
                });
            });
        }
    });
}
var chatMessageContainer = document.querySelector('#chat-message-container');
var sendMessageButton = document.querySelector('#chat-send-message-button');
if (chatMessageContainer.hasAttribute('data-send-message')) {
    sendMessageButton;
    console.log('send message');
    showMessage();
}
function showMessage() {
    return __awaiter(this, void 0, void 0, function () {
        var chatMessages, chatSpinner, index, message;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    chatMessages = chatMessageContainer.querySelectorAll('.chat-message');
                    chatSpinner = document.querySelector('.chat-spinner');
                    if (!chatMessages || !chatSpinner)
                        return [2 /*return*/];
                    index = 0;
                    _a.label = 1;
                case 1:
                    if (!(index < chatMessages.length)) return [3 /*break*/, 4];
                    message = chatMessages[index];
                    return [4 /*yield*/, showSpinnerAndMessage(message, chatSpinner)];
                case 2:
                    _a.sent();
                    _a.label = 3;
                case 3:
                    index++;
                    return [3 /*break*/, 1];
                case 4: return [2 /*return*/];
            }
        });
    });
}
function showSpinnerAndMessage(message, chatSpinner) {
    return __awaiter(this, void 0, void 0, function () {
        var spinnerClone, chatMain;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    spinnerClone = chatSpinner.cloneNode(true);
                    chatMain = document.querySelector('#chat-main');
                    message.parentNode.insertBefore(spinnerClone, message);
                    spinnerClone.style.display = 'flex';
                    spinnerClone.classList.add('chat-spinner-active');
                    scrollDown(chatMain);
                    return [4 /*yield*/, new Promise(function (resolve) { return setTimeout(resolve, timeTyping); })];
                case 1:
                    _a.sent();
                    spinnerClone.remove();
                    message.classList.add('chat-message-active');
                    scrollDown(chatMain);
                    return [2 /*return*/];
            }
        });
    });
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/chat.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvY2hhdC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEscUJBQXFCLGlEQUFpRCxvREFBb0Qsc0NBQXNDLDhCQUE4QixVQUFVLElBQUksOENBQThDLHVCQUF1QixXQUFXLFdBQVcsS0FBSywwQkFBMEIsd0JBQXdCLGFBQWEsU0FBUywwR0FBMEcsK0JBQStCLG9DQUFvQyxtQkFBbUIsa0JBQWtCLDBCQUEwQixtQ0FBbUMsdUJBQXVCLFFBQVEsSUFBSSxjQUFjLHNDQUFzQyxXQUFXLGlKQUFpSixnREFBZ0QsMEJBQTBCLDBHQUEwRyxvRUFBb0UsOENBQThDLHNCQUFzQixJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLEdBQUcsSUFBSSxHQUFHLElBQUksR0FBRyxJQUFJLFFBQVEsNENBQTRDLHNCQUFzQiw2REFBNkQsY0FBYyxJQUFJLHFCQUFxQiw2REFBNkQsYUFBYSxJQUFJLDJCQUEyQixVQUFVLDJCQUEyQiwyQkFBMkIsRUFBRSxVQUFVLElBQUksZUFBZSw0QkFBNEIsSUFBSSxJQUFJLGdCQUFnQiw0QkFBNEIsRUFBRSxJQUFJLGlCQUFpQiwrQkFBK0IsMkJBQTJCLElBQUksa0JBQWtCLDhCQUE4QiwwQkFBMEIsSUFBSSxlQUFlLDBCQUEwQixJQUFJLElBQUksZ0JBQWdCLDBCQUEwQixFQUFFLElBQUksdUJBQXVCLDJCQUEyQixJQUFJLElBQUkseUJBQXlCLDJCQUEyQixFQUFFLElBQUksZUFBZSw2QkFBNkIsSUFBSSxJQUFJLGdCQUFnQiw2QkFBNkIsRUFBRSxJQUFJLGVBQWUsNkJBQTZCLElBQUksSUFBSSxnQkFBZ0IsNkJBQTZCLEVBQUUsSUFBSSx1QkFBdUIsdUNBQXVDLEtBQUssNkNBQTZDLDBDQUEwQyxXQUFXLG1FQUFtRSx5QkFBeUIsb0JBQW9CLDhHQUE4RyxRQUFRLG1CQUFtQixXQUFXLHNCQUFzQixrQkFBa0Isd0ZBQXdGLHNCQUFzQixVQUFVLCtHQUErRyx3R0FBd0csd0dBQXdHLGtHQUFrRyxxQkFBcUIsVUFBVSwrSkFBK0osNElBQTRJLGlFQUFpRSwyQ0FBMkMsMkJBQTJCLFVBQVUsZ0tBQWdLLDZJQUE2SSxpREFBaUQsb0JBQW9CLFVBQVUsK0pBQStKLDRJQUE0SSxpRUFBaUUsMENBQTBDLDBCQUEwQixVQUFVLGdLQUFnSyw2SUFBNkksZ0RBQWdELG1CQUFtQixVQUFVLGlLQUFpSyw4SUFBOEkseUNBQXlDLGdCQUFnQixVQUFVLG9EQUFvRCxNQUFNLDBEQUEwRCxZQUFZLHFCQUFxQixVQUFVLG9EQUFvRCxNQUFNLDBEQUEwRCxZQUFZLGlCQUFpQixVQUFVLCtGQUErRix1RUFBdUUsNkNBQTZDLG9CQUFvQixTQUFTLFdBQVcsV0FBVyxLQUFLLDBCQUEwQix3QkFBd0IsYUFBYSw2Q0FBNkMsb0NBQW9DLGtCQUFrQiwrSUFBK0ksMkJBQTJCLGVBQWUsNEpBQTRKLGtCQUFrQixVQUFVLHFEQUFxRCw2Q0FBNkMseUNBQXlDLG1CQUFtQixrQkFBa0IsWUFBWSxtREFBbUQsbURBQW1ELHNDQUFzQyxtQkFBbUIsZUFBZSxZQUFZLHVDQUF1QyxtQkFBbUIsZ0JBQWdCLFlBQVksOENBQThDLG1CQUFtQix1QkFBdUIsWUFBWSx5Q0FBeUMsbUJBQW1CLGtCQUFrQixZQUFZLHlDQUF5QyxtQkFBbUIsa0JBQWtCLFlBQVksa0VBQWtFLGtFQUFrRSxtQkFBbUIsUUFBUSxPQUFPLGVBQWUsY0FBYyxZQUFZLDRFQUE0RSxFQUFFLG1CQUFtQixFQUFFLFVBQVUsb0JBQW9CLGdHQUFnRyw2QkFBNkIsZ0NBQWdDLDJCQUEyQiwrREFBK0QsNkJBQTZCLEVBQUUsaUJBQWlCLHlDQUF5Qyx1UEFBdVAsc0NBQXNDLEVBQUUsZUFBZSx1Q0FBdUMsd0NBQXdDLHNDQUFzQyw4QkFBOEIseUJBQXlCLEVBQUUsWUFBWSxnQ0FBZ0MsS0FBSyxzQ0FBc0Msd0NBQXdDLDhDQUE4Qyw2Q0FBNkMsc0RBQXNELEVBQUUsdUNBQXVDLDZDQUE2Qyx3REFBd0QsRUFBRSw0Q0FBNEMsNkNBQTZDLG9EQUFvRCxFQUFFLHVFQUF1RSw2Q0FBNkMsc0RBQXNELDhCQUE4QixvREFBb0QsbUJBQW1CLDZDQUE2Qyx5Q0FBeUMsOEJBQThCLG9DQUFvQyxFQUFFLGlCQUFpQix5RUFBeUUsNkJBQTZCLHlDQUF5QyxnR0FBZ0cseUNBQXlDLGlNQUFpTSw4QkFBOEIsRUFBRSx5QkFBeUIsc0NBQXNDLHFCQUFxQixzQ0FBc0MsOENBQThDLDJDQUEyQyxhQUFhLEVBQUUsVUFBVSxpQkFBaUIsbUJBQW1CLHlDQUF5Qyx5R0FBeUcseUNBQXlDLDBHQUEwRywwQkFBMEIsc0NBQXNDLDJCQUEyQixZQUFZLEtBQUssS0FBSyx5RUFBeUUsdUdBQXVHLGdCQUFnQiwrRUFBK0UsZUFBZSwrQ0FBK0MseUNBQXlDLEVBQUUsU0FBUyx1QkFBdUIsc0NBQXNDLHdCQUF3QixxSEFBcUgsWUFBWSxJQUFJLEtBQUssc0NBQXNDLHNDQUFzQyxZQUFZLEtBQUssS0FBSyxhQUFhLG1DQUFtQyw2Q0FBNkMsbUNBQW1DLEVBQUUsU0FBUyxzQkFBc0IsOEdBQThHLGlYQUFpWCxtQ0FBbUMsSUFBSSwyQkFBMkIsc0NBQXNDLDhCQUE4QixvQkFBb0IsbUJBQW1CLHNCQUFzQixRQUFRLE9BQU8sYUFBYSxlQUFlLGNBQWMsYUFBYSxXQUFXLHlDQUF5Qyx3TEFBd0wsR0FBRyxhQUFhLGtMQUFrTCxvREFBb0QsR0FBRyxlQUFlLHlCQUF5QixlQUFlLG9GQUFvRixHQUFHLGlCQUFpQixLQUFLLG1GQUFtRix3QkFBd0IsNkRBQTZELHNDQUFzQyxpQ0FBaUMsNkRBQTZELDBCQUEwQixHQUFHLGFBQWEsWUFBWSxrQkFBa0IsZ0ZBQWdGLGtCQUFrQixrREFBa0QsZUFBZSx5R0FBeUcsUUFBUSxxQkFBcUIsMEJBQTBCLGFBQWEsY0FBYyxZQUFZLE9BQU8saUVBQWlFLFNBQVMsK0tBQStLLCtXQUErVyxpREFBaUQsSUFBSSw2Q0FBNkMsZ0JBQWdCLGVBQWUsU0FBUyxvQ0FBb0MsY0FBYyxxQkFBcUIsZ1NBQWdTLFlBQVksaXVCQUFpdUIsc0RBQXNELGtCQUFrQixXQUFXLEVBQUUsMENBQTBDLFlBQVksRUFBRSw2Q0FBNkMsY0FBYyxFQUFFLDBEQUEwRCxTQUFTLEdBQUcsVUFBVSw0T0FBNE8scUNBQXFDLDRCQUE0QixZQUFZLE1BQU0sY0FBYyxVQUFVLDBCQUEwQixVQUFVLE1BQU0sZ0JBQWdCLFVBQVUscUZBQXFGLHVCQUF1QiwrS0FBK0ssc0JBQXNCLDBCQUEwQiw4QkFBOEIsK0RBQStELG9CQUFvQiwrREFBK0Qsb0JBQW9CLHFCQUFxQixzQkFBc0IsMEJBQTBCLHNDQUFzQyxtQ0FBbUMsZ0JBQWdCLG1DQUFtQyxvQkFBb0IsR0FBRyx1QkFBdUIsb0NBQW9DLFdBQVcsaUJBQWlCLDZCQUE2QiwyQkFBMkIsc0NBQXNDLCtHQUErRyxVQUFVLG9HQUFvRyxRQUFRLHlCQUF5Qix1REFBdUQsYUFBYSx3QkFBd0IsK0JBQStCLEVBQUUsb0NBQW9DLEVBQUUsaUVBQWlFLFNBQVMsRUFBRSxPQUFPLDBHQUEwRyxXQUFXLHFDQUFxQyx3RkFBd0YsVUFBVSxxRUFBcUUsY0FBYyw0T0FBNE8sZUFBZSxxSEFBcUgsa0ZBQWtGLGNBQWMsc0JBQXNCLHdJQUF3SSxhQUFhLHVCQUF1QixxREFBcUQsRUFBRSwwQkFBMEIsMkVBQTJFLGlCQUFpQixtQ0FBbUMsaUJBQWlCLDRDQUE0QyxrQkFBa0IsNkNBQTZDLFlBQVkscUNBQXFDLDBEQUEwRCxRQUFRLDJHQUEyRyxnQkFBZ0IsMGJBQTBiLFlBQVksaUVBQWlFLHVDQUF1Qyw0QkFBNEIsYUFBYSwrRkFBK0Ysd0ZBQXdGLEdBQUcsMkNBQTJDLG9GQUFvRiwrRUFBK0UsNkdBQTZHLGtCQUFrQiw0RUFBNEUsd0NBQXdDLGtEQUFrRCwyQ0FBMkMsd0NBQXdDLHlMQUF5TCxlQUFlLHFCQUFxQiwrQkFBK0IsRUFBRSxRQUFRLE9BQU8sUUFBUSxXQUFXLGdCQUFnQixVQUFVLDBCQUEwQixpQkFBaUIsY0FBYyxxQ0FBcUMsa0lBQWtJLFNBQVMsb0JBQW9CLGlJQUFpSSxhQUFhLEVBQUUsOENBQThDLGdGQUFnRiw0QkFBNEIsZUFBZSwyQkFBMkIsYUFBYSxLQUFLLDhDQUE4QywwREFBMEQsU0FBUyw4Q0FBOEMsK0ZBQStGLHVCQUF1Qix3R0FBd0csdUJBQXVCLHNGQUFzRixvQkFBb0IsOERBQThELGtCQUFrQixXQUFXLE9BQU8sK0JBQStCLFNBQVMsa0lBQWtJLFVBQVUsbUJBQW1CLFdBQVcsZ1lBQWdZLDZEQUE2RCx3QkFBd0IsZ0tBQWdLLCtEQUErRCxnQkFBZ0IsZUFBZSxZQUFZLGNBQWMsd0JBQXdCLHlDQUF5QyxXQUFXLDBDQUEwQyxVQUFVLE1BQU0sdUJBQXVCLFVBQVUseVJBQXlSLHFFQUFxRSw0REFBNEQsNkJBQTZCLHlCQUF5Qix1R0FBdUcsY0FBYyxLQUFLLG9CQUFvQixFQUFFLHVCQUF1QixLQUFLLE1BQU0sZUFBZSxLQUFLLG1CQUFtQixFQUFFLHVCQUF1QixLQUFLLE1BQU0sb0JBQW9CLHVDQUF1QyxnRUFBZ0UsK0RBQStELG1EQUFtRCxzTEFBc0wsa0tBQWtLLHdCQUF3QixxSkFBcUoseUJBQXlCLG1CQUFtQix5RkFBeUYsS0FBSywwQkFBMEIsRUFBRSwrQkFBK0IsZUFBZSxTQUFTLGVBQWUsaUZBQWlGLGVBQWUsZ0ZBQWdGLGlCQUFpQiw0QkFBNEIsdUdBQXVHLHdCQUF3QixTQUFTLGlCQUFpQiw0QkFBNEIsbUdBQW1HLHdCQUF3QixTQUFTLHFCQUFxQixrRUFBa0UsMENBQTBDLDJCQUEyQixTQUFTLHNCQUFzQixtRUFBbUUsMENBQTBDLDBCQUEwQixTQUFTLGNBQWMsNkZBQTZGLGtCQUFrQiw2QkFBNkIsT0FBTywrREFBK0QsU0FBUyx5R0FBeUcsa0JBQWtCLFVBQVUscUJBQXFCLFdBQVcsbURBQW1ELHFCQUFxQixrQkFBa0IsYUFBYSxtREFBbUQsMEJBQTBCLFFBQVEsa0JBQWtCLHdDQUF3QyxpREFBaUQsMEJBQTBCLDhLQUE4SywwREFBMEQsa0NBQWtDLEdBQUcsb0ZBQW9GLFdBQVcsc0ZBQXNGLFVBQVUsTUFBTSxnQkFBZ0IsVUFBVSxlQUFlLHNDQUFzQywwRkFBMEYsc0VBQXNFLHdFQUF3RSx3SkFBd0osbUNBQW1DLEdBQUcsOENBQThDLHNCQUFzQiwrQkFBK0Isc0NBQXNDLEdBQUcsV0FBVyxpQkFBaUIsNkJBQTZCLDJCQUEyQixzQ0FBc0MsMkJBQTJCLHNFQUFzRSwyRkFBMkYsOERBQThELCtFQUErRSxrQkFBa0IsOENBQThDLGtCQUFrQixlQUFlLGVBQWUsT0FBTyxxakJBQXFqQixTQUFTLHNIQUFzSCxxREFBcUQsMkNBQTJDLFVBQVUsb0JBQW9CLFdBQVcseWhCQUF5aEIsY0FBYyw4Q0FBOEMsYUFBYSw0Q0FBNEMsZUFBZSw4Q0FBOEMsZUFBZSw4Q0FBOEMsYUFBYSw0Q0FBNEMsY0FBYyw2Q0FBNkMsZUFBZSw4Q0FBOEMsUUFBUSx1Q0FBdUMscUJBQXFCLG9EQUFvRCxxQkFBcUIscURBQXFELHk3QkFBeTdCLFdBQVcscUNBQXFDLGNBQWMsK0NBQStDLGFBQWEsNkNBQTZDLGVBQWUsK0NBQStDLGVBQWUsK0NBQStDLGFBQWEsNkNBQTZDLGNBQWMsOENBQThDLGVBQWUsK0NBQStDLFFBQVEsd0NBQXdDLHFCQUFxQixxREFBcUQscUJBQXFCLHNEQUFzRCx3TUFBd00sY0FBYyx3V0FBd1cseW1CQUF5bUIsMkdBQTJHLDJFQUEyRSxrR0FBa0csZUFBZSxnU0FBZ1MseUtBQXlLLEtBQUssV0FBVyxFQUFFLEVBQUUsK0JBQStCLEVBQUUsRUFBRSxFQUFFLG1GQUFtRixRQUFRLCtKQUErSixVQUFVLE1BQU0sU0FBUyxVQUFVLDhKQUE4SixVQUFVLE1BQU0sZ0JBQWdCLFVBQVUsK0tBQStLLHVLQUF1SywrSUFBK0ksaUJBQWlCLG1HQUFtRyw4Q0FBOEMsY0FBYyxzQkFBc0IsaU1BQWlNLGdCQUFnQiw0Q0FBNEMsb0ZBQW9GLGNBQWMsNENBQTRDLGtGQUFrRixrQkFBa0Isa0ZBQWtGLDBIQUEwSCxlQUFlLGtGQUFrRixhQUFhLDhFQUE4RSxnQkFBZ0IsaUJBQWlCLDZCQUE2Qiw2Q0FBNkMsMkJBQTJCLHNDQUFzQyxpQ0FBaUMsNENBQTRDLHFFQUFxRSx1QkFBdUIsa0JBQWtCLDZCQUE2Qix1RUFBdUUsMkVBQTJFLDRPQUE0Tyx5QkFBeUIsc0RBQXNELFFBQVEsc0VBQXNFLEdBQUcsRUFBRSx1QkFBdUIsRUFBRSxzQkFBc0IsMkJBQTJCLGdCQUFnQixvREFBb0QsZ0RBQWdELGlFQUFpRSxzQkFBc0IsaUNBQWlDLHFFQUFxRSw4QkFBOEIsNEpBQTRKLDBDQUEwQyxnR0FBZ0csbUdBQW1HLDBLQUEwSyxvVEFBb1QsOERBQThELG9NQUFvTSw4REFBOEQscUVBQXFFLHNCQUFzQixxZEFBcWQsOERBQThELHNCQUFzQixpQkFBaUIsK0VBQStFLG1JQUFtSSxxQkFBcUIsMEZBQTBGLEVBQUUsc0NBQXNDLEVBQUUsSUFBSSxjQUFjLDhDQUE4Qyx5QkFBeUIsZ0NBQWdDLHlWQUF5Viw2Q0FBNkMsZUFBZSxxQkFBcUIsYUFBYSw4QkFBOEIsbUJBQW1CLCtCQUErQixnREFBZ0Qsb0tBQW9LLGVBQWUscUNBQXFDLGtCQUFrQixTQUFTLDBFQUEwRSxZQUFZLFlBQVksZ0NBQWdDLGVBQWUsZ0NBQWdDLE9BQU8saVdBQWlXLFVBQVUsbUJBQW1CLFdBQVcsNktBQTZLLFNBQVMseUNBQXlDLGVBQWUsOENBQThDLGFBQWEsNENBQTRDLFVBQVUseUNBQXlDLGVBQWUsOENBQThDLGFBQWEsNkNBQTZDLHVRQUF1USxXQUFXLDhIQUE4SCxTQUFTLDBDQUEwQyxlQUFlLCtDQUErQyxhQUFhLDhDQUE4QyxrTEFBa0wsVUFBVSxNQUFNLGdCQUFnQixVQUFVLGVBQWUsc0VBQXNFLHNDQUFzQyx5REFBeUQsNkJBQTZCLDZDQUE2QyxnQ0FBZ0MsRUFBRSwyQkFBMkIsNkNBQTZDLGdDQUFnQyxFQUFFLEtBQUssOEJBQThCLDZDQUE2QyxnQ0FBZ0MsRUFBRSw2Q0FBNkMsb0NBQW9DLEdBQUcsV0FBVyxpQkFBaUIsNkVBQTZFLGdFQUFnRSw2SkFBNkosWUFBWSxpQkFBaUIscUZBQXFGLGtFQUFrRSxZQUFZLGlMQUFpTCxtQ0FBbUMsNkVBQTZFLEVBQUUsZ0RBQWdELHlEQUF5RCxtREFBbUQsTUFBTSxxREFBcUQsTUFBTSxxREFBcUQsTUFBTSx1Q0FBdUMsNkVBQTZFLEVBQUUsMERBQTBELDBEQUEwRCxpRkFBaUYsS0FBSyx3QkFBd0IsZ0VBQWdFLHFCQUFxQix1UUFBdVEsY0FBYyxzREFBc0QsV0FBVyxpQkFBaUIsNkJBQTZCLDJCQUEyQixzQ0FBc0MseUVBQXlFLHlGQUF5RixrREFBa0QsK0JBQStCLHNEQUFzRCwrQkFBK0IsMkJBQTJCLFdBQVcsaUNBQWlDLG1GQUFtRixnQkFBZ0IsaUNBQWlDLG1GQUFtRixjQUFjLGlDQUFpQyxpRkFBaUYsb0JBQW9CLHFJQUFxSSw2QkFBNkIsVUFBVSw2Q0FBNkMsbUVBQW1FLDBDQUEwQyw4QkFBOEIseURBQXlELFNBQVMsWUFBWSxlQUFlLHVEQUF1RCw2RUFBNkUsMENBQTBDLDhCQUE4Qix5REFBeUQsU0FBUyxZQUFZLGFBQWEscURBQXFELDJFQUEyRSx3Q0FBd0MsNEJBQTRCLHlEQUF5RCxTQUFTLFlBQVksaUJBQWlCLHFGQUFxRixnQkFBZ0IscUZBQXFGLGNBQWMsaUZBQWlGLGtCQUFrQix3Q0FBd0MsNERBQTRELDJCQUEyQixNQUFNLFlBQVksYUFBYSxrQkFBa0IsZUFBZSxZQUFZLFdBQVcsRUFBRSxHQUFHLEVBQUUsRUFBRSxTQUFTLGtCQUFrQixzQ0FBc0MsdUNBQXVDLHlDQUF5QyxzREFBc0QsRUFBRSxNQUFNLGdFQUFnRSxXQUFXLHVLQUF1SyxZQUFZLElBQUksMkJBQTJCLHlDQUF5QywyS0FBMkssaUJBQWlCLHlDQUF5QyxzREFBc0QsRUFBRSxNQUFNLFlBQVksS0FBSyw2QkFBNkIseUNBQXlDLFlBQVksVUFBVSx1QkFBdUIsVUFBVSxvRUFBb0UsMENBQTBDLHlDQUF5QyxzREFBc0QsRUFBRSxNQUFNLFdBQVcsWUFBWSxJQUFJLDZCQUE2Qix5Q0FBeUMsWUFBWSxVQUFVLHVCQUF1QixVQUFVLG9FQUFvRSxpQkFBaUIsMEJBQTBCLHlDQUF5QyxzREFBc0QsRUFBRSxtQ0FBbUMseUNBQXlDLG1GQUFtRixvQkFBb0IsU0FBUyxzQkFBc0Isa0JBQWtCLFVBQVUsNEdBQTRHLE1BQU0sK0dBQStHLFNBQVMsY0FBYyxxQkFBcUIsb0NBQW9DLHlFQUF5RSxrSkFBa0osK0RBQStELEtBQUssdUNBQXVDLDZFQUE2RSxnQ0FBZ0MscUNBQXFDLDJFQUEyRSwrQkFBK0IsMkVBQTJFLHlOQUF5TiwwSkFBMEosK0RBQStELEtBQUssc0dBQXNHLDRFQUE0RSxnQ0FBZ0Msc0hBQXNILG9GQUFvRixpQ0FBaUMsMkdBQTJHLHVGQUF1RixvQ0FBb0MsU0FBUyxrRkFBa0YsK0RBQStELEtBQUssTUFBTSw0Q0FBNEMsZ0NBQWdDLE1BQU0sNENBQTRDLG1DQUFtQyxLQUFLLDZCQUE2QixtRUFBbUUsZ0NBQWdDLHNHQUFzRyw0RUFBNEUsbUNBQW1DLGtCQUFrQixnQkFBZ0IsWUFBWSxPQUFPLG1FQUFtRSxTQUFTLHdCQUF3QixVQUFVLGtCQUFrQixXQUFXLGdFQUFnRSx5SEFBeUgsWUFBWSwwRkFBMEYsWUFBWSwyRUFBMkUsS0FBSyx3Q0FBd0MsdUJBQXVCLGtDQUFrQyx1QkFBdUIsK0RBQStELFNBQVMsMkNBQTJDLG1CQUFtQix1Q0FBdUMsMkRBQTJELG9DQUFvQyxxQ0FBcUMsbUNBQW1DLEVBQUUsR0FBRyxXQUFXLG9DQUFvQyxzQ0FBc0MsR0FBRyxXQUFXLDhJQUE4SSxXQUFXLGlLQUFpSyxVQUFVLE1BQU0sZ0JBQWdCLFVBQVUsdU9BQXVPLGFBQWEsb0NBQW9DLG1EQUFtRCxNQUFNLHdEQUF3RCxNQUFNLDRDQUE0QyxNQUFNLGlDQUFpQywrQkFBK0Isd0RBQXdELHNCQUFzQixxQkFBcUIsd0VBQXdFLGVBQWUsU0FBUyx1Q0FBdUMsOENBQThDLFVBQVUsb0JBQW9CLHVCQUF1QixLQUFLLDZDQUE2QyxVQUFVLDhDQUE4QyxXQUFXLG9CQUFvQixXQUFXLGVBQWUsb0ZBQW9GLHNCQUFzQixLQUFLLGdCQUFnQixNQUFNLDRFQUE0RSxzQkFBc0IsS0FBSyxhQUFhLElBQUksZ0JBQWdCLGlCQUFpQixnQ0FBZ0MsbUJBQW1CLDJHQUEyRyxjQUFjLGtCQUFrQixpQkFBaUIsZ0NBQWdDLG1CQUFtQiw2R0FBNkcsaUNBQWlDLGVBQWUsaUJBQWlCLG9GQUFvRixXQUFXLG9CQUFvQiwySEFBMkgsZ0VBQWdFLG9CQUFvQixVQUFVLElBQUksSUFBSSxnQkFBZ0IscURBQXFELGdEQUFnRCwyQ0FBMkMsV0FBVyxHQUFHLElBQUksa0JBQWtCLFlBQVksV0FBVyxZQUFZLE9BQU8sMkVBQTJFLFNBQVMsVUFBVSw2Q0FBNkMscUJBQXFCLGtVQUFrVSxXQUFXLFVBQVUsa0JBQWtCLFdBQVcsaVlBQWlZLFdBQVcsd1JBQXdSLFVBQVUscU5BQXFOLGlCQUFpQixpQ0FBaUMseUNBQXlDLGtCQUFrQixNQUFNLCtCQUErQixVQUFVLHlCQUF5Qix1Q0FBdUMsaUNBQWlDLHlCQUF5Qix5Q0FBeUMsc0RBQXNELFlBQVksS0FBSyxNQUFNLG1JQUFtSSxvRUFBb0UsYUFBYSxnUkFBZ1IsaUNBQWlDLGlCQUFpQiwrR0FBK0csZ0JBQWdCLGdDQUFnQyx5QkFBeUIseUNBQXlDLGlDQUFpQyw2SEFBNkgsc0JBQXNCLHlDQUF5Qyw0R0FBNEcsWUFBWSxLQUFLLE1BQU0sd0VBQXdFLHVTQUF1UyxzQkFBc0IseUNBQXlDLDRHQUE0Ryx3Q0FBd0MsMkRBQTJELDhCQUE4QixxQ0FBcUMsR0FBRyxpQ0FBaUMsaUJBQWlCLDhFQUE4RSxzQkFBc0IscUJBQXFCLE1BQU0sZ0JBQWdCLFVBQVUsbURBQW1ELHlDQUF5Qyw0R0FBNEcsbUJBQW1CLFNBQVMsNEdBQTRHLHFCQUFxQixxQkFBcUIsNkJBQTZCLE1BQU0sZ0JBQWdCLFVBQVUsMkJBQTJCLHNDQUFzQyx3REFBd0QscURBQXFELGtCQUFrQixNQUFNLHVEQUF1RCxLQUFLLGdDQUFnQyx3QkFBd0IsOENBQThDLHFDQUFxQyxzQ0FBc0MsbUVBQW1FLEtBQXNKOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FDQWp6MUQsZ0hBQTBDO0FBRTFDLElBQU0sVUFBVSxHQUFtQixRQUFRLENBQUMsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQzFFLElBQU0sVUFBVSxHQUFHLElBQUksQ0FBQztBQUV4QixTQUFTLFVBQVUsQ0FBQyxPQUF1QjtJQUN6QyxVQUFVLENBQUM7UUFDVCxPQUFPLENBQUMsUUFBUSxDQUFDO1lBQ2YsR0FBRyxFQUFFLE9BQU8sQ0FBQyxZQUFZO1NBQzFCLENBQUMsQ0FBQztRQUNILE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDN0IsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO0FBQ1YsQ0FBQztBQUVELFNBQVMsZ0JBQWdCO0lBQ3ZCLFVBQVUsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDakQsVUFBVSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsa0JBQWtCLENBQUMsQ0FBQztBQUNsRCxDQUFDO0FBRUQsUUFBUSxDQUFDLGdCQUFnQixDQUFDLGtCQUFrQixFQUFFO0lBQzVDLElBQU0sUUFBUSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEQsSUFBTSxRQUFRLEdBQW1CLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7SUFDdEUsSUFBTSxRQUFRLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO0lBQzNELElBQU0sU0FBUyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUU3RCxRQUFRLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFO1FBQ2pDLGdCQUFnQixFQUFFLENBQUM7UUFDbkIsSUFBSSxVQUFVLENBQUMsU0FBUyxDQUFDLFFBQVEsQ0FBQyxrQkFBa0IsQ0FBQyxFQUFFO1lBQ3JELFdBQVcsRUFBRSxDQUFDO1lBQ2QsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ3RCO2FBQU07WUFDTCxJQUFNLFlBQVksR0FDaEIsb0JBQW9CLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUFDLENBQUM7WUFDekQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxpQkFBTztnQkFDMUIsT0FBTyxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMscUJBQXFCLENBQUMsQ0FBQztZQUNsRCxDQUFDLENBQUMsQ0FBQztTQUNKO1FBRUQsSUFBTSxRQUFRLEdBQUcsSUFBSSxnQkFBZ0IsQ0FBQyxtQkFBUztZQUM3QyxJQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUMzQyw0QkFBNEIsQ0FDN0IsQ0FBQztZQUNGLElBQUksY0FBYyxFQUFFO2dCQUNsQixjQUFjLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLGNBQU8sQ0FBQyxDQUFDLENBQUM7YUFDcEQ7WUFFRCxTQUFTLENBQUMsT0FBTyxDQUFDLGtCQUFRO2dCQUN4QixJQUFJLFFBQVEsQ0FBQyxJQUFJLEtBQUssV0FBVyxFQUFFO29CQUNqQyxPQUFPLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7b0JBRXZELFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztpQkFDdEI7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO1FBRUgsUUFBUSxDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsRUFBQyxTQUFTLEVBQUUsSUFBSSxFQUFDLENBQUMsQ0FBQztJQUNoRCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBTSxjQUFjLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzlFLElBQU0sa0JBQWtCLEdBQW1CLFFBQVEsQ0FBQyxhQUFhLENBQy9ELGdDQUFnQyxDQUNqQyxDQUFDO0FBQ0YsSUFBTSxhQUFhLEdBQXFCLFFBQVEsQ0FBQyxhQUFhLENBQzVELDZCQUE2QixDQUM5QixDQUFDO0FBQ0YsSUFBTSxnQkFBZ0IsR0FBd0IsUUFBUSxDQUFDLGFBQWEsQ0FDbEUsNEJBQTRCLENBQ04sQ0FBQztBQUN6QixJQUFNLG9CQUFvQixHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQ2pELDhCQUE4QixDQUMvQixDQUFDO0FBRUYsSUFBTSxnQkFBZ0IsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDLENBQUM7QUFDdEUsSUFBSSxnQkFBZ0IsRUFBRTtJQUNwQixJQUFNLFVBQVEsR0FBbUIsUUFBUSxDQUFDLGFBQWEsQ0FBQyxZQUFZLENBQUMsQ0FBQztJQUN0RSxJQUFNLE1BQU0sR0FBRyxJQUFJLGlCQUFRLENBQUMsTUFBTSxDQUFDO1FBQ2pDLE9BQU8sRUFBRSxRQUFRLENBQUMsY0FBYyxDQUFDLG1CQUFtQixDQUFDO1FBQ3JELEdBQUcsRUFBRSxDQUFDLG9FQUFvRSxDQUFDO1FBQzNFLE1BQU0sRUFBRSxZQUFZO0tBQ3JCLENBQUMsQ0FBQztJQUNILGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtRQUN6QyxVQUFVLENBQUMsVUFBUSxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7Q0FDSjtBQUVELElBQUksY0FBYyxFQUFFO0lBQ2xCLGNBQWMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7UUFDdkMsSUFBTSxRQUFRLEdBQW1CLFFBQVEsQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDdEUsa0JBQWtCLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO1FBQ3JFLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FBQztRQUN0QixVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7Q0FDSjtBQUVELElBQUksYUFBYSxFQUFFO0lBQ2pCLGFBQWEsQ0FBQyxPQUFPLEdBQUc7UUFDdEIsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxPQUFPLENBQUM7UUFDekMsYUFBYSxDQUFDLEtBQUssQ0FBQyxZQUFZLEdBQUcsYUFBYSxDQUFDO0lBQ25ELENBQUMsQ0FBQzs0QkFDTyxLQUFLO1FBQ1osSUFBTSxNQUFNLEdBQXNCLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNsRSxJQUFJLE9BQU8sTUFBTSxLQUFLLFFBQVEsRUFBRTtZQUM5QixNQUFNLENBQUMsT0FBTyxHQUFHO2dCQUNmLGFBQWEsQ0FBQyxLQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztnQkFDbkMsb0JBQW9CLENBQUMsU0FBUyxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUM7Z0JBQzlDLGtCQUFrQixDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsK0JBQStCLENBQUMsQ0FBQztnQkFDckUsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7Z0JBQ3hDLGFBQWEsQ0FBQyxLQUFLLENBQUMsWUFBWSxHQUFHLEtBQUssQ0FBQztZQUMzQyxDQUFDLENBQUM7U0FDSDs7SUFWSCxLQUFLLElBQUksS0FBSyxJQUFJLGdCQUFnQixDQUFDLE9BQU87Z0JBQWpDLEtBQUs7S0FXYjtJQUVELGFBQWEsQ0FBQyxPQUFPLEdBQUc7UUFDdEIsY0FBWSxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ2xCLElBQU0sSUFBSSxHQUFHLGFBQWEsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDL0MsS0FBSyxJQUFJLEtBQUssSUFBSSxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7WUFDMUMsSUFBTSxNQUFNLEdBQXNCLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNsRSxNQUFNLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7Z0JBQzNDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE9BQU8sQ0FBQztnQkFDbEMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDLENBQUM7U0FDckM7SUFDSCxDQUFDLENBQUM7SUFFRixJQUFJLGNBQVksR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN0QixhQUFhLENBQUMsU0FBUyxHQUFHLFVBQVUsQ0FBQztRQUNuQyxJQUFJLENBQUMsQ0FBQyxPQUFPLElBQUksRUFBRSxFQUFFO1lBQ25CLGNBQVksRUFBRSxDQUFDO1lBQ2YsV0FBUyxDQUFDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQ3JDO2FBQU0sSUFBSSxDQUFDLENBQUMsT0FBTyxJQUFJLEVBQUUsRUFBRTtZQUMxQixjQUFZLEVBQUUsQ0FBQztZQUNmLFdBQVMsQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUNyQzthQUFNLElBQUksQ0FBQyxDQUFDLE9BQU8sSUFBSSxFQUFFLEVBQUU7WUFDMUIsQ0FBQyxDQUFDLGNBQWMsRUFBRSxDQUFDO1lBQ25CLElBQUksY0FBWSxHQUFHLENBQUMsQ0FBQyxFQUFFO2dCQUNyQixJQUFJLGdCQUFnQixDQUFDLE9BQU8sRUFBRTtvQkFDNUIsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGNBQVksQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO2lCQUNoRDthQUNGO1NBQ0Y7SUFDSCxDQUFDLENBQUM7SUFFRixJQUFNLFdBQVMsR0FBRyxVQUFDLENBQXNDO1FBQ3ZELElBQUksQ0FBQyxDQUFDO1lBQUUsT0FBTztRQUVmLEtBQUssQ0FBQztRQUNOLGNBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoQixJQUFJLGNBQVksSUFBSSxDQUFDLENBQUMsTUFBTTtZQUFFLGNBQVksR0FBRyxDQUFDLENBQUM7UUFDL0MsSUFBSSxjQUFZLEdBQUcsQ0FBQztZQUFFLGNBQVksR0FBRyxDQUFDLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQztRQUNsRCxDQUFDLENBQUMsY0FBWSxDQUFDLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUMxQyxDQUFDLENBQUM7SUFFRixJQUFNLGNBQVksR0FBRyxVQUFDLENBQXNDO1FBQzFELEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1lBQ2pDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1NBQ2pDO0lBQ0gsQ0FBQyxDQUFDO0NBQ0g7QUFFRCxJQUFNLGdCQUFnQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO0FBQ3pFLElBQUksZ0JBQWdCLEVBQUU7SUFDcEIsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLGdCQUFNO1FBQzdCLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxPQUFPLEVBQUU7WUFDL0IsZ0JBQWdCLEVBQUUsQ0FBQztRQUNyQixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0NBQ0o7QUFFRCxJQUFNLGlCQUFpQixHQUFHLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLENBQUMsQ0FBQztBQUVqRSxJQUFJLGlCQUFpQixFQUFFO0lBQ3JCLElBQU0sVUFBUSxHQUFtQixRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3RFLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxrQkFBUTtRQUNoQyxJQUFNLGNBQWMsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDbEUsSUFBTSxZQUFZLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQzlELElBQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsaUJBQWlCLENBQUMsQ0FBQztRQUNoRSxJQUFNLGVBQWUsR0FBRyxRQUFRLENBQUMsZ0JBQWdCLENBQUMsdUJBQXVCLENBQUMsQ0FBQztRQUMzRSxJQUFNLGtCQUFrQixHQUFxQixRQUFRLENBQUMsYUFBYSxDQUNqRSx1QkFBdUIsQ0FDeEIsQ0FBQztRQUNGLElBQU0sYUFBYSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUMsQ0FBQztRQUNyRSxJQUFJLGNBQWMsRUFBRTtZQUNsQixjQUFjLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLFdBQUM7Z0JBQ3hDLFVBQVUsQ0FBQyxVQUFRLENBQUMsQ0FBQztnQkFDckIsSUFBTSxlQUFlLEdBQUksQ0FBQyxDQUFDLE1BQWtCLENBQUMsT0FBTyxDQUFDLFdBQVcsQ0FBQyxDQUFDO2dCQUVuRSxZQUFZLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO2dCQUN0RCxhQUFhLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxZQUFZLENBQUMsQ0FBQztnQkFDN0MsZUFBZSxDQUFDLE9BQU8sQ0FBQyxnQkFBTTtvQkFDNUIsTUFBTSxDQUFDLGdCQUFnQixDQUFDLE9BQU8sRUFBRTt3QkFDL0IsSUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLFlBQVksQ0FBQyxlQUFlLENBQUMsQ0FBQzt3QkFDN0Qsa0JBQWtCLENBQUMsS0FBSyxHQUFHLGVBQWUsQ0FBQzt3QkFDM0MsYUFBYSxDQUFDLFNBQVMsR0FBRyxlQUFlLENBQUM7d0JBQzFDLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUM7d0JBQ3RELGFBQWEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUMvQyxDQUFDLENBQUMsQ0FBQztnQkFDTCxDQUFDLENBQUMsQ0FBQztnQkFFSCxpQkFBaUIsQ0FBQyxPQUFPLENBQUMsa0JBQVE7b0JBQ2hDLElBQUksUUFBUSxLQUFLLGVBQWUsRUFBRTt3QkFDaEMsUUFBUTs2QkFDTCxhQUFhLENBQUMsZ0JBQWdCLENBQUM7NkJBQy9CLFNBQVMsQ0FBQyxNQUFNLENBQUMsc0JBQXNCLENBQUMsQ0FBQztxQkFDN0M7Z0JBQ0gsQ0FBQyxDQUFDLENBQUM7Z0JBRUgsTUFBTSxDQUFDLGdCQUFnQixDQUFDLFNBQVMsRUFBRSxlQUFLO29CQUN0QyxJQUFJLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsTUFBYyxDQUFDLEVBQUU7d0JBQzVDLFlBQVksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLENBQUM7d0JBQ3RELGFBQWEsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLFlBQVksQ0FBQyxDQUFDO3FCQUM5QztnQkFDSCxDQUFDLENBQUMsQ0FBQztZQUNMLENBQUMsQ0FBQyxDQUFDO1NBQ0o7SUFDSCxDQUFDLENBQUMsQ0FBQztDQUNKO0FBRUQsSUFBTSxvQkFBb0IsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDL0UsSUFBTSxpQkFBaUIsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFFOUUsSUFBSSxvQkFBb0IsQ0FBQyxZQUFZLENBQUMsbUJBQW1CLENBQUMsRUFBRTtJQUMxRCxpQkFBaUIsQ0FBQztJQUNsQixPQUFPLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0lBRTVCLFdBQVcsRUFBRSxDQUFDO0NBQ2Y7QUFFRCxTQUFlLFdBQVc7Ozs7OztvQkFDbEIsWUFBWSxHQUFHLG9CQUFvQixDQUFDLGdCQUFnQixDQUFDLGVBQWUsQ0FBQyxDQUFDO29CQUN0RSxXQUFXLEdBQW1CLFFBQVEsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLENBQUM7b0JBRTVFLElBQUksQ0FBQyxZQUFZLElBQUksQ0FBQyxXQUFXO3dCQUFFLHNCQUFPO29CQUVqQyxLQUFLLEdBQUcsQ0FBQzs7O3lCQUFFLE1BQUssR0FBRyxZQUFZLENBQUMsTUFBTTtvQkFDdkMsT0FBTyxHQUFHLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztvQkFDcEMscUJBQU0scUJBQXFCLENBQUMsT0FBTyxFQUFFLFdBQVcsQ0FBQzs7b0JBQWpELFNBQWlELENBQUM7OztvQkFGSCxLQUFLLEVBQUU7Ozs7OztDQUl6RDtBQUVELFNBQWUscUJBQXFCLENBQ2xDLE9BQWdCLEVBQ2hCLFdBQTJCOzs7Ozs7b0JBRXJCLFlBQVksR0FBRyxXQUFXLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBbUIsQ0FBQztvQkFDN0QsUUFBUSxHQUFtQixRQUFRLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxDQUFDO29CQUV0RSxPQUFPLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxZQUFZLEVBQUUsT0FBTyxDQUFDLENBQUM7b0JBRXZELFlBQVksQ0FBQyxLQUFLLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztvQkFDcEMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxHQUFHLENBQUMscUJBQXFCLENBQUMsQ0FBQztvQkFDbEQsVUFBVSxDQUFDLFFBQVEsQ0FBQyxDQUFDO29CQUVyQixxQkFBTSxJQUFJLE9BQU8sQ0FBQyxpQkFBTyxJQUFJLGlCQUFVLENBQUMsT0FBTyxFQUFFLFVBQVUsQ0FBQyxFQUEvQixDQUErQixDQUFDOztvQkFBN0QsU0FBNkQsQ0FBQztvQkFFOUQsWUFBWSxDQUFDLE1BQU0sRUFBRSxDQUFDO29CQUN0QixPQUFPLENBQUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO29CQUM3QyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUM7Ozs7O0NBQ3RCOzs7Ozs7O1VDalFEO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EseUNBQXlDLHdDQUF3QztXQUNqRjtXQUNBO1dBQ0E7Ozs7O1dDUEE7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0EsdURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7OztVRU5BO1VBQ0E7VUFDQTtVQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc3RhdGljLy4vbm9kZV9tb2R1bGVzL0BlYXNlcGljay9idW5kbGUvZGlzdC9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc3RhdGljLy4vc3JjL2NoYXQudHMiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL3J1bnRpbWUvZGVmaW5lIHByb3BlcnR5IGdldHRlcnMiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svcnVudGltZS9oYXNPd25Qcm9wZXJ0eSBzaG9ydGhhbmQiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svcnVudGltZS9tYWtlIG5hbWVzcGFjZSBvYmplY3QiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svYmVmb3JlLXN0YXJ0dXAiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svc3RhcnR1cCIsIndlYnBhY2s6Ly9zdGF0aWMvd2VicGFjay9hZnRlci1zdGFydHVwIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIHQgZXh0ZW5kcyBEYXRle3N0YXRpYyBwYXJzZURhdGVUaW1lKGUsaT1cIllZWVktTU0tRERcIixuPVwiZW4tVVNcIil7aWYoIWUpcmV0dXJuIG5ldyBEYXRlKChuZXcgRGF0ZSkuc2V0SG91cnMoMCwwLDAsMCkpO2lmKGUgaW5zdGFuY2VvZiB0KXJldHVybiBlLnRvSlNEYXRlKCk7aWYoZSBpbnN0YW5jZW9mIERhdGUpcmV0dXJuIGU7aWYoL14tP1xcZHsxMCx9JC8udGVzdChTdHJpbmcoZSkpKXJldHVybiBuZXcgRGF0ZShOdW1iZXIoZSkpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtjb25zdCBzPVtdO2xldCBvPW51bGw7Zm9yKDtudWxsIT0obz10LnJlZ2V4LmV4ZWMoaSkpOylcIlxcXFxcIiE9PW9bMV0mJnMucHVzaChvKTtpZihzLmxlbmd0aCl7Y29uc3QgaT17eWVhcjpudWxsLG1vbnRoOm51bGwsc2hvcnRNb250aDpudWxsLGxvbmdNb250aDpudWxsLGRheTpudWxsLGhvdXI6MCxtaW51dGU6MCxzZWNvbmQ6MCxhbXBtOm51bGwsdmFsdWU6XCJcIn07c1swXS5pbmRleD4wJiYoaS52YWx1ZSs9XCIuKj9cIik7Zm9yKGNvbnN0W2Usb11vZiBPYmplY3QuZW50cmllcyhzKSl7Y29uc3Qgcz1OdW1iZXIoZSkse2dyb3VwOmEscGF0dGVybjpyfT10LmZvcm1hdFBhdHRlcm5zKG9bMF0sbik7aVthXT1zKzEsaS52YWx1ZSs9cixpLnZhbHVlKz1cIi4qP1wifWNvbnN0IG89bmV3IFJlZ0V4cChgXiR7aS52YWx1ZX0kYCk7aWYoby50ZXN0KGUpKXtjb25zdCBzPW8uZXhlYyhlKSxhPU51bWJlcihzW2kueWVhcl0pO2xldCByPW51bGw7aS5tb250aD9yPU51bWJlcihzW2kubW9udGhdKS0xOmkuc2hvcnRNb250aD9yPXQuc2hvcnRNb250aHMobikuaW5kZXhPZihzW2kuc2hvcnRNb250aF0pOmkubG9uZ01vbnRoJiYocj10LmxvbmdNb250aHMobikuaW5kZXhPZihzW2kubG9uZ01vbnRoXSkpO2NvbnN0IGM9TnVtYmVyKHNbaS5kYXldKXx8MSxsPU51bWJlcihzW2kuaG91cl0pO2xldCBoPU51bWJlci5pc05hTihsKT8wOmw7Y29uc3QgZD1OdW1iZXIoc1tpLm1pbnV0ZV0pLHA9TnVtYmVyLmlzTmFOKGQpPzA6ZCx1PU51bWJlcihzW2kuc2Vjb25kXSksZz1OdW1iZXIuaXNOYU4odSk/MDp1LG09c1tpLmFtcG1dO3JldHVybiBtJiZcIlBNXCI9PT1tJiYoaCs9MTIsMjQ9PT1oJiYoaD0wKSksbmV3IERhdGUoYSxyLGMsaCxwLGcsMCl9fX1yZXR1cm4gbmV3IERhdGUoKG5ldyBEYXRlKS5zZXRIb3VycygwLDAsMCwwKSl9c3RhdGljIHJlZ2V4PS8oXFxcXCk/KFl7Miw0fXxNezEsNH18RHsxLDJ9fEh7MSwyfXxoezEsMn18bXsxLDJ9fHN7MSwyfXxBfGEpL2c7c3RhdGljIE1PTlRIX0pTPVswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExXTtzdGF0aWMgc2hvcnRNb250aHMoZSl7cmV0dXJuIHQuTU9OVEhfSlMubWFwKCh0PT5uZXcgRGF0ZSgyMDE5LHQpLnRvTG9jYWxlU3RyaW5nKGUse21vbnRoOlwic2hvcnRcIn0pKSl9c3RhdGljIGxvbmdNb250aHMoZSl7cmV0dXJuIHQuTU9OVEhfSlMubWFwKCh0PT5uZXcgRGF0ZSgyMDE5LHQpLnRvTG9jYWxlU3RyaW5nKGUse21vbnRoOlwibG9uZ1wifSkpKX1zdGF0aWMgZm9ybWF0UGF0dGVybnMoZSxpKXtzd2l0Y2goZSl7Y2FzZVwiWVlcIjpjYXNlXCJZWVlZXCI6cmV0dXJue2dyb3VwOlwieWVhclwiLHBhdHRlcm46YChcXFxcZHske2UubGVuZ3RofX0pYH07Y2FzZVwiTVwiOnJldHVybntncm91cDpcIm1vbnRoXCIscGF0dGVybjpcIihcXFxcZHsxLDJ9KVwifTtjYXNlXCJNTVwiOnJldHVybntncm91cDpcIm1vbnRoXCIscGF0dGVybjpcIihcXFxcZHsyfSlcIn07Y2FzZVwiTU1NXCI6cmV0dXJue2dyb3VwOlwic2hvcnRNb250aFwiLHBhdHRlcm46YCgke3Quc2hvcnRNb250aHMoaSkuam9pbihcInxcIil9KWB9O2Nhc2VcIk1NTU1cIjpyZXR1cm57Z3JvdXA6XCJsb25nTW9udGhcIixwYXR0ZXJuOmAoJHt0LmxvbmdNb250aHMoaSkuam9pbihcInxcIil9KWB9O2Nhc2VcIkRcIjpyZXR1cm57Z3JvdXA6XCJkYXlcIixwYXR0ZXJuOlwiKFxcXFxkezEsMn0pXCJ9O2Nhc2VcIkREXCI6cmV0dXJue2dyb3VwOlwiZGF5XCIscGF0dGVybjpcIihcXFxcZHsyfSlcIn07Y2FzZVwiaFwiOmNhc2VcIkhcIjpyZXR1cm57Z3JvdXA6XCJob3VyXCIscGF0dGVybjpcIihcXFxcZHsxLDJ9KVwifTtjYXNlXCJoaFwiOmNhc2VcIkhIXCI6cmV0dXJue2dyb3VwOlwiaG91clwiLHBhdHRlcm46XCIoXFxcXGR7Mn0pXCJ9O2Nhc2VcIm1cIjpyZXR1cm57Z3JvdXA6XCJtaW51dGVcIixwYXR0ZXJuOlwiKFxcXFxkezEsMn0pXCJ9O2Nhc2VcIm1tXCI6cmV0dXJue2dyb3VwOlwibWludXRlXCIscGF0dGVybjpcIihcXFxcZHsyfSlcIn07Y2FzZVwic1wiOnJldHVybntncm91cDpcInNlY29uZFwiLHBhdHRlcm46XCIoXFxcXGR7MSwyfSlcIn07Y2FzZVwic3NcIjpyZXR1cm57Z3JvdXA6XCJzZWNvbmRcIixwYXR0ZXJuOlwiKFxcXFxkezJ9KVwifTtjYXNlXCJhXCI6Y2FzZVwiQVwiOnJldHVybntncm91cDpcImFtcG1cIixwYXR0ZXJuOlwiKEFNfFBNfGFtfHBtKVwifX19bGFuZztjb25zdHJ1Y3RvcihlPW51bGwsaT1cIllZWVktTU0tRERcIixuPVwiZW4tVVNcIil7c3VwZXIodC5wYXJzZURhdGVUaW1lKGUsaSxuKSksdGhpcy5sYW5nPW59Z2V0V2Vlayh0KXtjb25zdCBlPW5ldyBEYXRlKHRoaXMubWlkbmlnaHRfdHModGhpcykpLGk9KHRoaXMuZ2V0RGF5KCkrKDctdCkpJTc7ZS5zZXREYXRlKGUuZ2V0RGF0ZSgpLWkpO2NvbnN0IG49ZS5nZXRUaW1lKCk7cmV0dXJuIGUuc2V0TW9udGgoMCwxKSxlLmdldERheSgpIT09dCYmZS5zZXRNb250aCgwLDErKDQtZS5nZXREYXkoKSs3KSU3KSwxK01hdGguY2VpbCgobi1lLmdldFRpbWUoKSkvNjA0OGU1KX1jbG9uZSgpe3JldHVybiBuZXcgdCh0aGlzKX10b0pTRGF0ZSgpe3JldHVybiBuZXcgRGF0ZSh0aGlzKX1pbkFycmF5KHQsZT1cIltdXCIpe3JldHVybiB0LnNvbWUoKHQ9PnQgaW5zdGFuY2VvZiBBcnJheT90aGlzLmlzQmV0d2Vlbih0WzBdLHRbMV0sZSk6dGhpcy5pc1NhbWUodCxcImRheVwiKSkpfWlzQmV0d2Vlbih0LGUsaT1cIigpXCIpe3N3aXRjaChpKXtkZWZhdWx0OmNhc2VcIigpXCI6cmV0dXJuIHRoaXMubWlkbmlnaHRfdHModGhpcyk+dGhpcy5taWRuaWdodF90cyh0KSYmdGhpcy5taWRuaWdodF90cyh0aGlzKTx0aGlzLm1pZG5pZ2h0X3RzKGUpO2Nhc2VcIlspXCI6cmV0dXJuIHRoaXMubWlkbmlnaHRfdHModGhpcyk+PXRoaXMubWlkbmlnaHRfdHModCkmJnRoaXMubWlkbmlnaHRfdHModGhpcyk8dGhpcy5taWRuaWdodF90cyhlKTtjYXNlXCIoXVwiOnJldHVybiB0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpPnRoaXMubWlkbmlnaHRfdHModCkmJnRoaXMubWlkbmlnaHRfdHModGhpcyk8PXRoaXMubWlkbmlnaHRfdHMoZSk7Y2FzZVwiW11cIjpyZXR1cm4gdGhpcy5taWRuaWdodF90cygpPj10aGlzLm1pZG5pZ2h0X3RzKHQpJiZ0aGlzLm1pZG5pZ2h0X3RzKCk8PXRoaXMubWlkbmlnaHRfdHMoZSl9fWlzQmVmb3JlKHQsZT1cImRheXNcIil7c3dpdGNoKGUpe2Nhc2VcImRheVwiOmNhc2VcImRheXNcIjpyZXR1cm4gbmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSx0LmdldERhdGUoKSkuZ2V0VGltZSgpPm5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXRlKCkpLmdldFRpbWUoKTtjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOnJldHVybiBuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLDEpLmdldFRpbWUoKT5uZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLDEpLmdldFRpbWUoKTtjYXNlXCJ5ZWFyXCI6Y2FzZVwieWVhcnNcIjpyZXR1cm4gdC5nZXRGdWxsWWVhcigpPnRoaXMuZ2V0RnVsbFllYXIoKX10aHJvdyBuZXcgRXJyb3IoXCJpc0JlZm9yZTogSW52YWxpZCB1bml0IVwiKX1pc1NhbWVPckJlZm9yZSh0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6cmV0dXJuIG5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpLmdldFRpbWUoKT49bmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSkuZ2V0VGltZSgpO2Nhc2VcIm1vbnRoXCI6Y2FzZVwibW9udGhzXCI6cmV0dXJuIG5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksMSkuZ2V0VGltZSgpPj1uZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLDEpLmdldFRpbWUoKX10aHJvdyBuZXcgRXJyb3IoXCJpc1NhbWVPckJlZm9yZTogSW52YWxpZCB1bml0IVwiKX1pc0FmdGVyKHQsZT1cImRheXNcIil7c3dpdGNoKGUpe2Nhc2VcImRheVwiOmNhc2VcImRheXNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSkuZ2V0VGltZSgpPm5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpLmdldFRpbWUoKTtjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOnJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLDEpLmdldFRpbWUoKT5uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLDEpLmdldFRpbWUoKTtjYXNlXCJ5ZWFyXCI6Y2FzZVwieWVhcnNcIjpyZXR1cm4gdGhpcy5nZXRGdWxsWWVhcigpPnQuZ2V0RnVsbFllYXIoKX10aHJvdyBuZXcgRXJyb3IoXCJpc0FmdGVyOiBJbnZhbGlkIHVuaXQhXCIpfWlzU2FtZU9yQWZ0ZXIodCxlPVwiZGF5c1wiKXtzd2l0Y2goZSl7Y2FzZVwiZGF5XCI6Y2FzZVwiZGF5c1wiOnJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLHRoaXMuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk+PW5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpLmdldFRpbWUoKTtjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOnJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLDEpLmdldFRpbWUoKT49bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCl9dGhyb3cgbmV3IEVycm9yKFwiaXNTYW1lT3JBZnRlcjogSW52YWxpZCB1bml0IVwiKX1pc1NhbWUodCxlPVwiZGF5c1wiKXtzd2l0Y2goZSl7Y2FzZVwiZGF5XCI6Y2FzZVwiZGF5c1wiOnJldHVybiBuZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLHRoaXMuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk9PT1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk9PT1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLDEpLmdldFRpbWUoKX10aHJvdyBuZXcgRXJyb3IoXCJpc1NhbWU6IEludmFsaWQgdW5pdCFcIil9YWRkKHQsZT1cImRheXNcIil7c3dpdGNoKGUpe2Nhc2VcImRheVwiOmNhc2VcImRheXNcIjp0aGlzLnNldERhdGUodGhpcy5nZXREYXRlKCkrdCk7YnJlYWs7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjp0aGlzLnNldE1vbnRoKHRoaXMuZ2V0TW9udGgoKSt0KX1yZXR1cm4gdGhpc31zdWJ0cmFjdCh0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6dGhpcy5zZXREYXRlKHRoaXMuZ2V0RGF0ZSgpLXQpO2JyZWFrO2Nhc2VcIm1vbnRoXCI6Y2FzZVwibW9udGhzXCI6dGhpcy5zZXRNb250aCh0aGlzLmdldE1vbnRoKCktdCl9cmV0dXJuIHRoaXN9ZGlmZih0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtkZWZhdWx0OmNhc2VcImRheVwiOmNhc2VcImRheXNcIjpyZXR1cm4gTWF0aC5yb3VuZCgodGhpcy5taWRuaWdodF90cygpLXRoaXMubWlkbmlnaHRfdHModCkpLzg2NGU1KTtjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOmxldCBlPTEyKih0LmdldEZ1bGxZZWFyKCktdGhpcy5nZXRGdWxsWWVhcigpKTtyZXR1cm4gZS09dC5nZXRNb250aCgpLGUrPXRoaXMuZ2V0TW9udGgoKSxlfX1mb3JtYXQoZSxpPVwiZW4tVVNcIil7bGV0IG49XCJcIjtjb25zdCBzPVtdO2xldCBvPW51bGw7Zm9yKDtudWxsIT0obz10LnJlZ2V4LmV4ZWMoZSkpOylcIlxcXFxcIiE9PW9bMV0mJnMucHVzaChvKTtpZihzLmxlbmd0aCl7c1swXS5pbmRleD4wJiYobis9ZS5zdWJzdHJpbmcoMCxzWzBdLmluZGV4KSk7Zm9yKGNvbnN0W3Qsb11vZiBPYmplY3QuZW50cmllcyhzKSl7Y29uc3QgYT1OdW1iZXIodCk7bis9dGhpcy5mb3JtYXRUb2tlbnMob1swXSxpKSxzW2ErMV0mJihuKz1lLnN1YnN0cmluZyhvLmluZGV4K29bMF0ubGVuZ3RoLHNbYSsxXS5pbmRleCkpLGE9PT1zLmxlbmd0aC0xJiYobis9ZS5zdWJzdHJpbmcoby5pbmRleCtvWzBdLmxlbmd0aCkpfX1yZXR1cm4gbi5yZXBsYWNlKC9cXFxcL2csXCJcIil9bWlkbmlnaHRfdHModCl7cmV0dXJuIHQ/bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSx0LmdldERhdGUoKSwwLDAsMCwwKS5nZXRUaW1lKCk6bmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSwwLDAsMCwwKS5nZXRUaW1lKCl9Zm9ybWF0VG9rZW5zKGUsaSl7c3dpdGNoKGUpe2Nhc2VcIllZXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldEZ1bGxZZWFyKCkpLnNsaWNlKC0yKTtjYXNlXCJZWVlZXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldEZ1bGxZZWFyKCkpO2Nhc2VcIk1cIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0TW9udGgoKSsxKTtjYXNlXCJNTVwiOnJldHVybmAwJHt0aGlzLmdldE1vbnRoKCkrMX1gLnNsaWNlKC0yKTtjYXNlXCJNTU1cIjpyZXR1cm4gdC5zaG9ydE1vbnRocyhpKVt0aGlzLmdldE1vbnRoKCldO2Nhc2VcIk1NTU1cIjpyZXR1cm4gdC5sb25nTW9udGhzKGkpW3RoaXMuZ2V0TW9udGgoKV07Y2FzZVwiRFwiOnJldHVybiBTdHJpbmcodGhpcy5nZXREYXRlKCkpO2Nhc2VcIkREXCI6cmV0dXJuYDAke3RoaXMuZ2V0RGF0ZSgpfWAuc2xpY2UoLTIpO2Nhc2VcIkhcIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0SG91cnMoKSk7Y2FzZVwiSEhcIjpyZXR1cm5gMCR7dGhpcy5nZXRIb3VycygpfWAuc2xpY2UoLTIpO2Nhc2VcImhcIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0SG91cnMoKSUxMnx8MTIpO2Nhc2VcImhoXCI6cmV0dXJuYDAke3RoaXMuZ2V0SG91cnMoKSUxMnx8MTJ9YC5zbGljZSgtMik7Y2FzZVwibVwiOnJldHVybiBTdHJpbmcodGhpcy5nZXRNaW51dGVzKCkpO2Nhc2VcIm1tXCI6cmV0dXJuYDAke3RoaXMuZ2V0TWludXRlcygpfWAuc2xpY2UoLTIpO2Nhc2VcInNcIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0U2Vjb25kcygpKTtjYXNlXCJzc1wiOnJldHVybmAwJHt0aGlzLmdldFNlY29uZHMoKX1gLnNsaWNlKC0yKTtjYXNlXCJhXCI6cmV0dXJuIHRoaXMuZ2V0SG91cnMoKTwxMnx8MjQ9PT10aGlzLmdldEhvdXJzKCk/XCJhbVwiOlwicG1cIjtjYXNlXCJBXCI6cmV0dXJuIHRoaXMuZ2V0SG91cnMoKTwxMnx8MjQ9PT10aGlzLmdldEhvdXJzKCk/XCJBTVwiOlwiUE1cIjtkZWZhdWx0OnJldHVyblwiXCJ9fX1jbGFzcyBle3BpY2tlcjtjb25zdHJ1Y3Rvcih0KXt0aGlzLnBpY2tlcj10fXJlbmRlcihlLGkpe2V8fChlPW5ldyB0KSxlLnNldERhdGUoMSksZS5zZXRIb3VycygwLDAsMCwwKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzW2BnZXQke2l9Vmlld2BdJiZ0aGlzW2BnZXQke2l9Vmlld2BdKGUpfWdldENvbnRhaW5lclZpZXcodCl7dGhpcy5waWNrZXIudWkuY29udGFpbmVyLmlubmVySFRNTD1cIlwiLHRoaXMucGlja2VyLm9wdGlvbnMuaGVhZGVyJiZ0aGlzLnBpY2tlci50cmlnZ2VyKFwicmVuZGVyXCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJIZWFkZXJcIn0pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJyZW5kZXJcIix7ZGF0ZTp0LmNsb25lKCksdmlldzpcIk1haW5cIn0pLHRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5fHx0aGlzLnBpY2tlci50cmlnZ2VyKFwicmVuZGVyXCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJGb290ZXJcIn0pfWdldEhlYWRlclZpZXcodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaGVhZGVyXCIpO3RoaXMucGlja2VyLm9wdGlvbnMuaGVhZGVyIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJmUuYXBwZW5kQ2hpbGQodGhpcy5waWNrZXIub3B0aW9ucy5oZWFkZXIpLFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLnBpY2tlci5vcHRpb25zLmhlYWRlciYmKGUuaW5uZXJIVE1MPXRoaXMucGlja2VyLm9wdGlvbnMuaGVhZGVyKSx0aGlzLnBpY2tlci51aS5jb250YWluZXIuYXBwZW5kQ2hpbGQoZSksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dGFyZ2V0OmUsZGF0ZTp0LmNsb25lKCksdmlldzpcIkhlYWRlclwifSl9Z2V0TWFpblZpZXcodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibWFpblwiKTt0aGlzLnBpY2tlci51aS5jb250YWluZXIuYXBwZW5kQ2hpbGQoZSk7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NOYW1lPWBjYWxlbmRhcnMgZ3JpZC0ke3RoaXMucGlja2VyLm9wdGlvbnMuZ3JpZH1gO2ZvcihsZXQgZT0wO2U8dGhpcy5waWNrZXIub3B0aW9ucy5jYWxlbmRhcnM7ZSsrKXtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc05hbWU9XCJjYWxlbmRhclwiLGkuYXBwZW5kQ2hpbGQobik7Y29uc3Qgcz10aGlzLmdldENhbGVuZGFySGVhZGVyVmlldyh0LmNsb25lKCkpO24uYXBwZW5kQ2hpbGQocyksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7ZGF0ZTp0LmNsb25lKCksdmlldzpcIkNhbGVuZGFySGVhZGVyXCIsaW5kZXg6ZSx0YXJnZXQ6c30pO2NvbnN0IG89dGhpcy5nZXRDYWxlbmRhckRheU5hbWVzVmlldygpO24uYXBwZW5kQ2hpbGQobyksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7ZGF0ZTp0LmNsb25lKCksdmlldzpcIkNhbGVuZGFyRGF5TmFtZXNcIixpbmRleDplLHRhcmdldDpvfSk7Y29uc3QgYT10aGlzLmdldENhbGVuZGFyRGF5c1ZpZXcodC5jbG9uZSgpKTtuLmFwcGVuZENoaWxkKGEpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJDYWxlbmRhckRheXNcIixpbmRleDplLHRhcmdldDphfSk7Y29uc3Qgcj10aGlzLmdldENhbGVuZGFyRm9vdGVyVmlldyh0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcsdC5jbG9uZSgpKTtuLmFwcGVuZENoaWxkKHIpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJDYWxlbmRhckZvb3RlclwiLGluZGV4OmUsdGFyZ2V0OnJ9KSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiQ2FsZW5kYXJJdGVtXCIsaW5kZXg6ZSx0YXJnZXQ6bn0pLHQuYWRkKDEsXCJtb250aFwiKX1lLmFwcGVuZENoaWxkKGkpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJDYWxlbmRhcnNcIix0YXJnZXQ6aX0pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJNYWluXCIsdGFyZ2V0OmV9KX1nZXRGb290ZXJWaWV3KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvb3RlclwiKSxpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5jbGFzc05hbWU9XCJmb290ZXItYnV0dG9uc1wiO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtuLmNsYXNzTmFtZT1cImNhbmNlbC1idXR0b24gdW5pdFwiLG4uaW5uZXJIVE1MPXRoaXMucGlja2VyLm9wdGlvbnMubG9jYWxlLmNhbmNlbCxpLmFwcGVuZENoaWxkKG4pO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtzLmNsYXNzTmFtZT1cImFwcGx5LWJ1dHRvbiB1bml0XCIscy5pbm5lckhUTUw9dGhpcy5waWNrZXIub3B0aW9ucy5sb2NhbGUuYXBwbHkscy5kaXNhYmxlZD0hMCxpLmFwcGVuZENoaWxkKHMpLGUuYXBwZW5kQ2hpbGQoaSksdGhpcy5waWNrZXIudWkuY29udGFpbmVyLmFwcGVuZENoaWxkKGUpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dCx0YXJnZXQ6ZSx2aWV3OlwiRm9vdGVyXCJ9KX1nZXRDYWxlbmRhckhlYWRlclZpZXcodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NOYW1lPVwiaGVhZGVyXCI7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NOYW1lPVwibW9udGgtbmFtZVwiLGkuaW5uZXJIVE1MPWA8c3Bhbj4ke3QudG9Mb2NhbGVTdHJpbmcodGhpcy5waWNrZXIub3B0aW9ucy5sYW5nLHttb250aDpcImxvbmdcIn0pfTwvc3Bhbj4gJHt0LmZvcm1hdChcIllZWVlcIil9YCxlLmFwcGVuZENoaWxkKGkpO2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtuLmNsYXNzTmFtZT1cInByZXZpb3VzLWJ1dHRvbiB1bml0XCIsbi5pbm5lckhUTUw9dGhpcy5waWNrZXIub3B0aW9ucy5sb2NhbGUucHJldmlvdXNNb250aCxlLmFwcGVuZENoaWxkKG4pO2NvbnN0IHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtyZXR1cm4gcy5jbGFzc05hbWU9XCJuZXh0LWJ1dHRvbiB1bml0XCIscy5pbm5lckhUTUw9dGhpcy5waWNrZXIub3B0aW9ucy5sb2NhbGUubmV4dE1vbnRoLGUuYXBwZW5kQ2hpbGQocyksZX1nZXRDYWxlbmRhckRheU5hbWVzVmlldygpe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LmNsYXNzTmFtZT1cImRheW5hbWVzLXJvd1wiO2ZvcihsZXQgZT0xO2U8PTc7ZSsrKXtjb25zdCBpPTMrdGhpcy5waWNrZXIub3B0aW9ucy5maXJzdERheStlLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmNsYXNzTmFtZT1cImRheW5hbWVcIixuLmlubmVySFRNTD1uZXcgRGF0ZSgxOTcwLDAsaSwxMiwwLDAsMCkudG9Mb2NhbGVTdHJpbmcodGhpcy5waWNrZXIub3B0aW9ucy5sYW5nLHt3ZWVrZGF5Olwic2hvcnRcIn0pLG4udGl0bGU9bmV3IERhdGUoMTk3MCwwLGksMTIsMCwwLDApLnRvTG9jYWxlU3RyaW5nKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyx7d2Vla2RheTpcImxvbmdcIn0pLHQuYXBwZW5kQ2hpbGQobiksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7ZGF5SWR4OmksdmlldzpcIkNhbGVuZGFyRGF5TmFtZVwiLHRhcmdldDpufSl9cmV0dXJuIHR9Z2V0Q2FsZW5kYXJEYXlzVmlldyh0KXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ZS5jbGFzc05hbWU9XCJkYXlzLWdyaWRcIjtjb25zdCBpPXRoaXMuY2FsY09mZnNldERheXModCx0aGlzLnBpY2tlci5vcHRpb25zLmZpcnN0RGF5KSxuPTMyLW5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksMzIpLmdldERhdGUoKTtmb3IobGV0IHQ9MDt0PGk7dCsrKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJvZmZzZXRcIixlLmFwcGVuZENoaWxkKHQpfWZvcihsZXQgaT0xO2k8PW47aSsrKXt0LnNldERhdGUoaSk7Y29uc3Qgbj10aGlzLmdldENhbGVuZGFyRGF5Vmlldyh0KTtlLmFwcGVuZENoaWxkKG4pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dCx2aWV3OlwiQ2FsZW5kYXJEYXlcIix0YXJnZXQ6bn0pfXJldHVybiBlfWdldENhbGVuZGFyRGF5VmlldyhlKXtjb25zdCBpPXRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZT9uZXcgdCh0aGlzLnBpY2tlci5vcHRpb25zLmRhdGUpOm51bGwsbj1uZXcgdCxzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIHMuY2xhc3NOYW1lPVwiZGF5IHVuaXRcIixzLmlubmVySFRNTD1lLmZvcm1hdChcIkRcIikscy5kYXRhc2V0LnRpbWU9U3RyaW5nKGUuZ2V0VGltZSgpKSxlLmlzU2FtZShuLFwiZGF5XCIpJiZzLmNsYXNzTGlzdC5hZGQoXCJ0b2RheVwiKSxbMCw2XS5pbmNsdWRlcyhlLmdldERheSgpKSYmcy5jbGFzc0xpc3QuYWRkKFwid2Vla2VuZFwiKSx0aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aD90aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmlzU2FtZShlLFwiZGF5XCIpJiZzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKTppJiZlLmlzU2FtZShpLFwiZGF5XCIpJiZzLmNsYXNzTGlzdC5hZGQoXCJzZWxlY3RlZFwiKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOmUsdmlldzpcIkNhbGVuZGFyRGF5XCIsdGFyZ2V0OnN9KSxzfWdldENhbGVuZGFyRm9vdGVyVmlldyh0LGUpe2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyZXR1cm4gaS5jbGFzc05hbWU9XCJmb290ZXJcIixpfWNhbGNPZmZzZXREYXlzKHQsZSl7bGV0IGk9dC5nZXREYXkoKS1lO3JldHVybiBpPDAmJihpKz03KSxpfX1jbGFzcyBpe3BpY2tlcjtpbnN0YW5jZXM9e307Y29uc3RydWN0b3IodCl7dGhpcy5waWNrZXI9dH1pbml0aWFsaXplKCl7Y29uc3QgdD1bXTt0aGlzLnBpY2tlci5vcHRpb25zLnBsdWdpbnMuZm9yRWFjaCgoZT0+e1wiZnVuY3Rpb25cIj09dHlwZW9mIGU/dC5wdXNoKG5ldyBlKTpcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGVhc2VwaWNrJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZWFzZXBpY2ssZSk/dC5wdXNoKG5ldyBlYXNlcGlja1tlXSk6Y29uc29sZS53YXJuKGBlYXNlcGljazogJHtlfSBub3QgZm91bmQuYCl9KSksdC5zb3J0KCgodCxlKT0+dC5wcmlvcml0eT5lLnByaW9yaXR5Py0xOnQucHJpb3JpdHk8ZS5wcmlvcml0eXx8dC5kZXBlbmRlbmNpZXMubGVuZ3RoPmUuZGVwZW5kZW5jaWVzLmxlbmd0aD8xOnQuZGVwZW5kZW5jaWVzLmxlbmd0aDxlLmRlcGVuZGVuY2llcy5sZW5ndGg/LTE6MCkpLHQuZm9yRWFjaCgodD0+e3QuYXR0YWNoKHRoaXMucGlja2VyKSx0aGlzLmluc3RhbmNlc1t0LmdldE5hbWUoKV09dH0pKX1nZXRJbnN0YW5jZSh0KXtyZXR1cm4gdGhpcy5pbnN0YW5jZXNbdF19YWRkSW5zdGFuY2UodCl7aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMuaW5zdGFuY2VzLHQpKWNvbnNvbGUud2FybihgZWFzZXBpY2s6ICR7dH0gYWxyZWFkeSBhZGRlZC5gKTtlbHNle2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBlYXNlcGljayYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVhc2VwaWNrLHQpKXtjb25zdCBlPW5ldyBlYXNlcGlja1t0XTtyZXR1cm4gZS5hdHRhY2godGhpcy5waWNrZXIpLHRoaXMuaW5zdGFuY2VzW2UuZ2V0TmFtZSgpXT1lLGV9aWYoXCJ1bmRlZmluZWRcIiE9PXRoaXMuZ2V0UGx1Z2luRm4odCkpe2NvbnN0IGU9bmV3KHRoaXMuZ2V0UGx1Z2luRm4odCkpO3JldHVybiBlLmF0dGFjaCh0aGlzLnBpY2tlciksdGhpcy5pbnN0YW5jZXNbZS5nZXROYW1lKCldPWUsZX1jb25zb2xlLndhcm4oYGVhc2VwaWNrOiAke3R9IG5vdCBmb3VuZC5gKX1yZXR1cm4gbnVsbH1yZW1vdmVJbnN0YW5jZSh0KXtyZXR1cm4gdCBpbiB0aGlzLmluc3RhbmNlcyYmdGhpcy5pbnN0YW5jZXNbdF0uZGV0YWNoKCksZGVsZXRlIHRoaXMuaW5zdGFuY2VzW3RdfXJlbG9hZEluc3RhbmNlKHQpe3JldHVybiB0aGlzLnJlbW92ZUluc3RhbmNlKHQpLHRoaXMuYWRkSW5zdGFuY2UodCl9Z2V0UGx1Z2luRm4odCl7cmV0dXJuWy4uLnRoaXMucGlja2VyLm9wdGlvbnMucGx1Z2luc10uZmlsdGVyKChlPT5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYobmV3IGUpLmdldE5hbWUoKT09PXQpKS5zaGlmdCgpfX1jbGFzcyBue0NhbGVuZGFyPW5ldyBlKHRoaXMpO1BsdWdpbk1hbmFnZXI9bmV3IGkodGhpcyk7Y2FsZW5kYXJzPVtdO2RhdGVQaWNrZWQ9W107Y3NzTG9hZGVkPTA7YmluZHM9e2hpZGVQaWNrZXI6dGhpcy5oaWRlUGlja2VyLmJpbmQodGhpcyksc2hvdzp0aGlzLnNob3cuYmluZCh0aGlzKX07b3B0aW9ucz17ZG9jOmRvY3VtZW50LGNzczpbXSxlbGVtZW50Om51bGwsZmlyc3REYXk6MSxncmlkOjEsY2FsZW5kYXJzOjEsbGFuZzpcImVuLVVTXCIsZGF0ZTpudWxsLGZvcm1hdDpcIllZWVktTU0tRERcIixyZWFkb25seTohMCxhdXRvQXBwbHk6ITAsaGVhZGVyOiExLGlubGluZTohMSxzY3JvbGxUb0RhdGU6ITAsbG9jYWxlOntuZXh0TW9udGg6Jzxzdmcgd2lkdGg9XCIxMVwiIGhlaWdodD1cIjE2XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMi43NDggMTZMMCAxMy4zMzMgNS4zMzMgOCAwIDIuNjY3IDIuNzQ4IDBsNy45MTkgOHpcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPicscHJldmlvdXNNb250aDonPHN2ZyB3aWR0aD1cIjExXCIgaGVpZ2h0PVwiMTZcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03LjkxOSAwbDIuNzQ4IDIuNjY3TDUuMzMzIDhsNS4zMzQgNS4zMzNMNy45MTkgMTYgMCA4elwiIGZpbGwtcnVsZT1cIm5vbnplcm9cIi8+PC9zdmc+JyxjYW5jZWw6XCJDYW5jZWxcIixhcHBseTpcIkFwcGx5XCJ9LGRvY3VtZW50Q2xpY2s6dGhpcy5iaW5kcy5oaWRlUGlja2VyLHBsdWdpbnM6W119O3VpPXtjb250YWluZXI6bnVsbCxzaGFkb3dSb290Om51bGwsd3JhcHBlcjpudWxsfTt2ZXJzaW9uPVwiMS4yLjFcIjtjb25zdHJ1Y3Rvcih0KXtjb25zdCBlPXsuLi50aGlzLm9wdGlvbnMubG9jYWxlLC4uLnQubG9jYWxlfTt0aGlzLm9wdGlvbnM9ey4uLnRoaXMub3B0aW9ucywuLi50fSx0aGlzLm9wdGlvbnMubG9jYWxlPWUsdGhpcy5oYW5kbGVPcHRpb25zKCksdGhpcy51aS53cmFwcGVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMudWkud3JhcHBlci5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHRoaXMudWkud3JhcHBlci5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy51aS53cmFwcGVyLnN0eWxlLnBvaW50ZXJFdmVudHM9XCJub25lXCIsdGhpcy51aS53cmFwcGVyLmNsYXNzTmFtZT1cImVhc2VwaWNrLXdyYXBwZXJcIix0aGlzLnVpLndyYXBwZXIuYXR0YWNoU2hhZG93KHttb2RlOlwib3BlblwifSksdGhpcy51aS5zaGFkb3dSb290PXRoaXMudWkud3JhcHBlci5zaGFkb3dSb290LHRoaXMudWkuY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdGhpcy51aS5jb250YWluZXIuY2xhc3NOYW1lPVwiY29udGFpbmVyXCIsdGhpcy5vcHRpb25zLnpJbmRleCYmKHRoaXMudWkuY29udGFpbmVyLnN0eWxlLnpJbmRleD1TdHJpbmcodGhpcy5vcHRpb25zLnpJbmRleCkpLHRoaXMub3B0aW9ucy5pbmxpbmUmJih0aGlzLnVpLndyYXBwZXIuc3R5bGUucG9zaXRpb249XCJyZWxhdGl2ZVwiLHRoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJpbmxpbmVcIikpLHRoaXMudWkuc2hhZG93Um9vdC5hcHBlbmRDaGlsZCh0aGlzLnVpLmNvbnRhaW5lciksdGhpcy5vcHRpb25zLmVsZW1lbnQuYWZ0ZXIodGhpcy51aS53cmFwcGVyKSx0aGlzLmhhbmRsZUNTUygpLHRoaXMub3B0aW9ucy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuYmluZHMuc2hvdyksdGhpcy5vbihcInZpZXdcIix0aGlzLm9uVmlldy5iaW5kKHRoaXMpKSx0aGlzLm9uKFwicmVuZGVyXCIsdGhpcy5vblJlbmRlci5iaW5kKHRoaXMpKSx0aGlzLlBsdWdpbk1hbmFnZXIuaW5pdGlhbGl6ZSgpLHRoaXMucGFyc2VWYWx1ZXMoKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuc2V0dXAmJnRoaXMub3B0aW9ucy5zZXR1cCh0aGlzKSx0aGlzLm9uKFwiY2xpY2tcIix0aGlzLm9uQ2xpY2suYmluZCh0aGlzKSk7Y29uc3QgaT10aGlzLm9wdGlvbnMuc2Nyb2xsVG9EYXRlP3RoaXMuZ2V0RGF0ZSgpOm51bGw7dGhpcy5yZW5kZXJBbGwoaSl9b24odCxlLGk9e30pe3RoaXMudWkuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIodCxlLGkpfW9mZih0LGUsaT17fSl7dGhpcy51aS5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LGUsaSl9dHJpZ2dlcih0LGU9e30pe3JldHVybiB0aGlzLnVpLmNvbnRhaW5lci5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudCh0LHtkZXRhaWw6ZX0pKX1kZXN0cm95KCl7dGhpcy5vcHRpb25zLmVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5iaW5kcy5zaG93KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuZG9jdW1lbnRDbGljayYmZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2ssITApLE9iamVjdC5rZXlzKHRoaXMuUGx1Z2luTWFuYWdlci5pbnN0YW5jZXMpLmZvckVhY2goKHQ9Pnt0aGlzLlBsdWdpbk1hbmFnZXIucmVtb3ZlSW5zdGFuY2UodCl9KSksdGhpcy51aS53cmFwcGVyLnJlbW92ZSgpfW9uUmVuZGVyKHQpe2NvbnN0e3ZpZXc6ZSxkYXRlOml9PXQuZGV0YWlsO3RoaXMuQ2FsZW5kYXIucmVuZGVyKGksZSl9b25WaWV3KHQpe2NvbnN0e3ZpZXc6ZSx0YXJnZXQ6aX09dC5kZXRhaWw7XCJGb290ZXJcIj09PWUmJnRoaXMuZGF0ZVBpY2tlZC5sZW5ndGgmJihpLnF1ZXJ5U2VsZWN0b3IoXCIuYXBwbHktYnV0dG9uXCIpLmRpc2FibGVkPSExKX1vbkNsaWNrSGVhZGVyQnV0dG9uKHQpe3RoaXMuaXNDYWxlbmRhckhlYWRlckJ1dHRvbih0KSYmKHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibmV4dC1idXR0b25cIik/dGhpcy5jYWxlbmRhcnNbMF0uYWRkKDEsXCJtb250aFwiKTp0aGlzLmNhbGVuZGFyc1swXS5zdWJ0cmFjdCgxLFwibW9udGhcIiksdGhpcy5yZW5kZXJBbGwodGhpcy5jYWxlbmRhcnNbMF0pKX1vbkNsaWNrQ2FsZW5kYXJEYXkoZSl7aWYodGhpcy5pc0NhbGVuZGFyRGF5KGUpKXtjb25zdCBpPW5ldyB0KGUuZGF0YXNldC50aW1lKTt0aGlzLm9wdGlvbnMuYXV0b0FwcGx5Pyh0aGlzLnNldERhdGUoaSksdGhpcy50cmlnZ2VyKFwic2VsZWN0XCIse2RhdGU6dGhpcy5nZXREYXRlKCl9KSx0aGlzLmhpZGUoKSk6KHRoaXMuZGF0ZVBpY2tlZFswXT1pLHRoaXMudHJpZ2dlcihcInByZXNlbGVjdFwiLHtkYXRlOnRoaXMuZ2V0RGF0ZSgpfSksdGhpcy5yZW5kZXJBbGwoKSl9fW9uQ2xpY2tBcHBseUJ1dHRvbih0KXtpZih0aGlzLmlzQXBwbHlCdXR0b24odCkpe2lmKHRoaXMuZGF0ZVBpY2tlZFswXWluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgdD10aGlzLmRhdGVQaWNrZWRbMF0uY2xvbmUoKTt0aGlzLnNldERhdGUodCl9dGhpcy5oaWRlKCksdGhpcy50cmlnZ2VyKFwic2VsZWN0XCIse2RhdGU6dGhpcy5nZXREYXRlKCl9KX19b25DbGlja0NhbmNlbEJ1dHRvbih0KXt0aGlzLmlzQ2FuY2VsQnV0dG9uKHQpJiZ0aGlzLmhpZGUoKX1vbkNsaWNrKHQpe2NvbnN0IGU9dC50YXJnZXQ7aWYoZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXtjb25zdCB0PWUuY2xvc2VzdChcIi51bml0XCIpO2lmKCEodCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSlyZXR1cm47dGhpcy5vbkNsaWNrSGVhZGVyQnV0dG9uKHQpLHRoaXMub25DbGlja0NhbGVuZGFyRGF5KHQpLHRoaXMub25DbGlja0FwcGx5QnV0dG9uKHQpLHRoaXMub25DbGlja0NhbmNlbEJ1dHRvbih0KX19aXNTaG93bigpe3JldHVybiB0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJpbmxpbmVcIil8fHRoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5jb250YWlucyhcInNob3dcIil9c2hvdyh0KXtpZih0aGlzLmlzU2hvd24oKSlyZXR1cm47Y29uc3QgZT10JiZcInRhcmdldFwiaW4gdD90LnRhcmdldDp0aGlzLm9wdGlvbnMuZWxlbWVudCx7dG9wOmksbGVmdDpufT10aGlzLmFkanVzdFBvc2l0aW9uKGUpO3RoaXMudWkuY29udGFpbmVyLnN0eWxlLnRvcD1gJHtpfXB4YCx0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS5sZWZ0PWAke259cHhgLHRoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpLHRoaXMudHJpZ2dlcihcInNob3dcIix7dGFyZ2V0OmV9KX1oaWRlKCl7dGhpcy51aS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIiksdGhpcy5kYXRlUGlja2VkLmxlbmd0aD0wLHRoaXMucmVuZGVyQWxsKCksdGhpcy50cmlnZ2VyKFwiaGlkZVwiKX1zZXREYXRlKGUpe2NvbnN0IGk9bmV3IHQoZSx0aGlzLm9wdGlvbnMuZm9ybWF0KTt0aGlzLm9wdGlvbnMuZGF0ZT1pLmNsb25lKCksdGhpcy51cGRhdGVWYWx1ZXMoKSx0aGlzLmNhbGVuZGFycy5sZW5ndGgmJnRoaXMucmVuZGVyQWxsKCl9Z2V0RGF0ZSgpe3JldHVybiB0aGlzLm9wdGlvbnMuZGF0ZSBpbnN0YW5jZW9mIHQ/dGhpcy5vcHRpb25zLmRhdGUuY2xvbmUoKTpudWxsfXBhcnNlVmFsdWVzKCl7dGhpcy5vcHRpb25zLmRhdGU/dGhpcy5zZXREYXRlKHRoaXMub3B0aW9ucy5kYXRlKTp0aGlzLm9wdGlvbnMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCYmdGhpcy5zZXREYXRlKHRoaXMub3B0aW9ucy5lbGVtZW50LnZhbHVlKSx0aGlzLm9wdGlvbnMuZGF0ZSBpbnN0YW5jZW9mIERhdGV8fCh0aGlzLm9wdGlvbnMuZGF0ZT1udWxsKX11cGRhdGVWYWx1ZXMoKXtjb25zdCB0PXRoaXMuZ2V0RGF0ZSgpLGU9dCBpbnN0YW5jZW9mIERhdGU/dC5mb3JtYXQodGhpcy5vcHRpb25zLmZvcm1hdCx0aGlzLm9wdGlvbnMubGFuZyk6XCJcIixpPXRoaXMub3B0aW9ucy5lbGVtZW50O2kgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50P2kudmFsdWU9ZTppIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJihpLmlubmVyVGV4dD1lKX1oaWRlUGlja2VyKHQpe2xldCBlPXQudGFyZ2V0LGk9bnVsbDtlLnNoYWRvd1Jvb3QmJihlPXQuY29tcG9zZWRQYXRoKClbMF0saT1lLmdldFJvb3ROb2RlKCkuaG9zdCksdGhpcy5pc1Nob3duKCkmJmkhPT10aGlzLnVpLndyYXBwZXImJmUhPT10aGlzLm9wdGlvbnMuZWxlbWVudCYmdGhpcy5oaWRlKCl9cmVuZGVyQWxsKHQpe3RoaXMudHJpZ2dlcihcInJlbmRlclwiLHt2aWV3OlwiQ29udGFpbmVyXCIsZGF0ZToodHx8dGhpcy5jYWxlbmRhcnNbMF0pLmNsb25lKCl9KX1pc0NhbGVuZGFySGVhZGVyQnV0dG9uKHQpe3JldHVybltcInByZXZpb3VzLWJ1dHRvblwiLFwibmV4dC1idXR0b25cIl0uc29tZSgoZT0+dC5jbGFzc0xpc3QuY29udGFpbnMoZSkpKX1pc0NhbGVuZGFyRGF5KHQpe3JldHVybiB0LmNsYXNzTGlzdC5jb250YWlucyhcImRheVwiKX1pc0FwcGx5QnV0dG9uKHQpe3JldHVybiB0LmNsYXNzTGlzdC5jb250YWlucyhcImFwcGx5LWJ1dHRvblwiKX1pc0NhbmNlbEJ1dHRvbih0KXtyZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoXCJjYW5jZWwtYnV0dG9uXCIpfWdvdG9EYXRlKGUpe2NvbnN0IGk9bmV3IHQoZSx0aGlzLm9wdGlvbnMuZm9ybWF0KTtpLnNldERhdGUoMSksdGhpcy5jYWxlbmRhcnNbMF09aS5jbG9uZSgpLHRoaXMucmVuZGVyQWxsKCl9Y2xlYXIoKXt0aGlzLm9wdGlvbnMuZGF0ZT1udWxsLHRoaXMuZGF0ZVBpY2tlZC5sZW5ndGg9MCx0aGlzLnVwZGF0ZVZhbHVlcygpLHRoaXMucmVuZGVyQWxsKCksdGhpcy50cmlnZ2VyKFwiY2xlYXJcIil9aGFuZGxlT3B0aW9ucygpe3RoaXMub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnR8fCh0aGlzLm9wdGlvbnMuZWxlbWVudD10aGlzLm9wdGlvbnMuZG9jLnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmVsZW1lbnQpKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuZG9jdW1lbnRDbGljayYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2ssITApLHRoaXMub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmKHRoaXMub3B0aW9ucy5lbGVtZW50LnJlYWRPbmx5PXRoaXMub3B0aW9ucy5yZWFkb25seSksdGhpcy5vcHRpb25zLmRhdGU/dGhpcy5jYWxlbmRhcnNbMF09bmV3IHQodGhpcy5vcHRpb25zLmRhdGUsdGhpcy5vcHRpb25zLmZvcm1hdCk6dGhpcy5jYWxlbmRhcnNbMF09bmV3IHR9aGFuZGxlQ1NTKCl7aWYoQXJyYXkuaXNBcnJheSh0aGlzLm9wdGlvbnMuY3NzKSl0aGlzLm9wdGlvbnMuY3NzLmZvckVhY2goKHQ9Pntjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaW5rXCIpO2UuaHJlZj10LGUucmVsPVwic3R5bGVzaGVldFwiO2NvbnN0IGk9KCk9Pnt0aGlzLmNzc0xvYWRlZCsrLHRoaXMuY3NzTG9hZGVkPT09dGhpcy5vcHRpb25zLmNzcy5sZW5ndGgmJih0aGlzLnVpLndyYXBwZXIuc3R5bGUuZGlzcGxheT1cIlwiKX07ZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLGkpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsaSksdGhpcy51aS5zaGFkb3dSb290LmFwcGVuZChlKX0pKTtlbHNlIGlmKFwic3RyaW5nXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuY3NzKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxlPWRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRoaXMub3B0aW9ucy5jc3MpO3QuYXBwZW5kQ2hpbGQoZSksdGhpcy51aS5zaGFkb3dSb290LmFwcGVuZCh0KSx0aGlzLnVpLndyYXBwZXIuc3R5bGUuZGlzcGxheT1cIlwifWVsc2VcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuY3NzJiYodGhpcy5vcHRpb25zLmNzcy5jYWxsKHRoaXMsdGhpcyksdGhpcy51aS53cmFwcGVyLnN0eWxlLmRpc3BsYXk9XCJcIil9YWRqdXN0UG9zaXRpb24odCl7Y29uc3QgZT10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLGk9dGhpcy51aS53cmFwcGVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJjYWxjXCIpO2NvbnN0IG49dGhpcy51aS5jb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7dGhpcy51aS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcImNhbGNcIik7bGV0IHM9ZS5ib3R0b20taS5ib3R0b20sbz1lLmxlZnQtaS5sZWZ0O3JldHVyblwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJih3aW5kb3cuaW5uZXJIZWlnaHQ8cytuLmhlaWdodCYmcy1uLmhlaWdodD49MCYmKHM9ZS50b3AtaS50b3Atbi5oZWlnaHQpLHdpbmRvdy5pbm5lcldpZHRoPG8rbi53aWR0aCYmZS5yaWdodC1uLndpZHRoPj0wJiYobz1lLnJpZ2h0LWkucmlnaHQtbi53aWR0aCkpLHtsZWZ0Om8sdG9wOnN9fX12YXIgcz1PYmplY3QuZnJlZXplKHtfX3Byb3RvX186bnVsbCxDb3JlOm4sY3JlYXRlOm59KTtjbGFzcyBve3BpY2tlcjtvcHRpb25zO3ByaW9yaXR5PTA7ZGVwZW5kZW5jaWVzPVtdO2F0dGFjaCh0KXtjb25zdCBlPXRoaXMuZ2V0TmFtZSgpLGk9ey4uLnRoaXMub3B0aW9uc307dGhpcy5vcHRpb25zPXsuLi50aGlzLm9wdGlvbnMsLi4udC5vcHRpb25zW2VdfHx7fX07Zm9yKGNvbnN0IG4gb2YgT2JqZWN0LmtleXMoaSkpaWYobnVsbCE9PWlbbl0mJlwib2JqZWN0XCI9PXR5cGVvZiBpW25dJiZPYmplY3Qua2V5cyhpW25dKS5sZW5ndGgmJmUgaW4gdC5vcHRpb25zJiZuIGluIHQub3B0aW9uc1tlXSl7Y29uc3Qgcz17Li4udC5vcHRpb25zW2VdW25dfTtudWxsIT09cyYmXCJvYmplY3RcIj09dHlwZW9mIHMmJk9iamVjdC5rZXlzKHMpLmxlbmd0aCYmT2JqZWN0LmtleXMocykuZXZlcnkoKHQ9Pk9iamVjdC5rZXlzKGlbbl0pLmluY2x1ZGVzKHQpKSkmJih0aGlzLm9wdGlvbnNbbl09ey4uLmlbbl0sLi4uc30pfWlmKHRoaXMucGlja2VyPXQsdGhpcy5kZXBlbmRlbmNpZXNOb3RGb3VuZCgpKXtjb25zdCB0PXRoaXMuZGVwZW5kZW5jaWVzLmZpbHRlcigodD0+IXRoaXMucGx1Z2luc0FzU3RyaW5nQXJyYXkoKS5pbmNsdWRlcyh0KSkpO3JldHVybiB2b2lkIGNvbnNvbGUud2FybihgJHt0aGlzLmdldE5hbWUoKX06IHJlcXVpcmVkIGRlcGVuZGVuY2llcyAoJHt0LmpvaW4oXCIsIFwiKX0pLmApfWNvbnN0IG49dGhpcy5jYW1lbENhc2VUb0tlYmFiKHRoaXMuZ2V0TmFtZSgpKTt0aGlzLnBpY2tlci51aS5jb250YWluZXIuY2xhc3NMaXN0LmFkZChuKSx0aGlzLm9uQXR0YWNoKCl9ZGV0YWNoKCl7Y29uc3QgdD10aGlzLmNhbWVsQ2FzZVRvS2ViYWIodGhpcy5nZXROYW1lKCkpO3RoaXMucGlja2VyLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKHQpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub25EZXRhY2gmJnRoaXMub25EZXRhY2goKX1kZXBlbmRlbmNpZXNOb3RGb3VuZCgpe3JldHVybiB0aGlzLmRlcGVuZGVuY2llcy5sZW5ndGgmJiF0aGlzLmRlcGVuZGVuY2llcy5ldmVyeSgodD0+dGhpcy5wbHVnaW5zQXNTdHJpbmdBcnJheSgpLmluY2x1ZGVzKHQpKSl9cGx1Z2luc0FzU3RyaW5nQXJyYXkoKXtyZXR1cm4gdGhpcy5waWNrZXIub3B0aW9ucy5wbHVnaW5zLm1hcCgodD0+XCJmdW5jdGlvblwiPT10eXBlb2YgdD8obmV3IHQpLmdldE5hbWUoKTp0KSl9Y2FtZWxDYXNlVG9LZWJhYih0KXtyZXR1cm4gdC5yZXBsYWNlKC8oW2EtekEtWl0pKD89W0EtWl0pL2csXCIkMS1cIikudG9Mb3dlckNhc2UoKX19Y2xhc3MgYSBleHRlbmRzIG97cHJpb3JpdHk9MTtiaW5kcz17b25WaWV3OnRoaXMub25WaWV3LmJpbmQodGhpcyl9O29wdGlvbnM9e21pbkRhdGU6bnVsbCxtYXhEYXRlOm51bGwsbWluRGF5czpudWxsLG1heERheXM6bnVsbCxzZWxlY3RGb3J3YXJkOm51bGwsc2VsZWN0QmFja3dhcmQ6bnVsbCxwcmVzZXRzOiEwLGluc2VwYXJhYmxlOiExLGZpbHRlcjpudWxsfTtnZXROYW1lKCl7cmV0dXJuXCJMb2NrUGx1Z2luXCJ9b25BdHRhY2goKXtpZih0aGlzLm9wdGlvbnMubWluRGF0ZSYmKHRoaXMub3B0aW9ucy5taW5EYXRlPW5ldyB0KHRoaXMub3B0aW9ucy5taW5EYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0LHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykpLHRoaXMub3B0aW9ucy5tYXhEYXRlJiYodGhpcy5vcHRpb25zLm1heERhdGU9bmV3IHQodGhpcy5vcHRpb25zLm1heERhdGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQsdGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKSx0aGlzLm9wdGlvbnMubWF4RGF0ZSBpbnN0YW5jZW9mIHQmJnRoaXMucGlja2VyLm9wdGlvbnMuY2FsZW5kYXJzPjEmJnRoaXMucGlja2VyLmNhbGVuZGFyc1swXS5pc1NhbWUodGhpcy5vcHRpb25zLm1heERhdGUsXCJtb250aFwiKSkpe2NvbnN0IHQ9dGhpcy5waWNrZXIuY2FsZW5kYXJzWzBdLmNsb25lKCkuc3VidHJhY3QoMSxcIm1vbnRoXCIpO3RoaXMucGlja2VyLmdvdG9EYXRlKHQpfWlmKCh0aGlzLm9wdGlvbnMubWluRGF5c3x8dGhpcy5vcHRpb25zLm1heERheXN8fHRoaXMub3B0aW9ucy5zZWxlY3RGb3J3YXJkfHx0aGlzLm9wdGlvbnMuc2VsZWN0QmFja3dhcmQpJiYhdGhpcy5waWNrZXIub3B0aW9ucy5wbHVnaW5zLmluY2x1ZGVzKFwiUmFuZ2VQbHVnaW5cIikpe2NvbnN0IHQ9W1wibWluRGF5c1wiLFwibWF4RGF5c1wiLFwic2VsZWN0Rm9yd2FyZFwiLFwic2VsZWN0QmFja3dhcmRcIl07Y29uc29sZS53YXJuKGAke3RoaXMuZ2V0TmFtZSgpfTogb3B0aW9ucyAke3Quam9pbihcIiwgXCIpfSByZXF1aXJlZCBSYW5nZVBsdWdpbi5gKX10aGlzLnBpY2tlci5vbihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyl9b25EZXRhY2goKXt0aGlzLnBpY2tlci5vZmYoXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpfW9uVmlldyhlKXtjb25zdHt2aWV3OmksdGFyZ2V0Om4sZGF0ZTpzfT1lLmRldGFpbDtpZihcIkNhbGVuZGFySGVhZGVyXCI9PT1pJiYodGhpcy5vcHRpb25zLm1pbkRhdGUgaW5zdGFuY2VvZiB0JiZzLmlzU2FtZU9yQmVmb3JlKHRoaXMub3B0aW9ucy5taW5EYXRlLFwibW9udGhcIikmJm4uY2xhc3NMaXN0LmFkZChcIm5vLXByZXZpb3VzLW1vbnRoXCIpLHRoaXMub3B0aW9ucy5tYXhEYXRlIGluc3RhbmNlb2YgdCYmcy5pc1NhbWVPckFmdGVyKHRoaXMub3B0aW9ucy5tYXhEYXRlLFwibW9udGhcIikmJm4uY2xhc3NMaXN0LmFkZChcIm5vLW5leHQtbW9udGhcIikpLFwiQ2FsZW5kYXJEYXlcIj09PWkpe2NvbnN0IHQ9dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGg/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXTpudWxsO2lmKHRoaXMudGVzdEZpbHRlcihzKSlyZXR1cm4gdm9pZCBuLmNsYXNzTGlzdC5hZGQoXCJsb2NrZWRcIik7aWYodGhpcy5vcHRpb25zLmluc2VwYXJhYmxlKXtpZih0aGlzLm9wdGlvbnMubWluRGF5cyl7Y29uc3QgdD1zLmNsb25lKCkuc3VidHJhY3QodGhpcy5vcHRpb25zLm1pbkRheXMtMSxcImRheVwiKSxlPXMuY2xvbmUoKS5hZGQodGhpcy5vcHRpb25zLm1pbkRheXMtMSxcImRheVwiKTtsZXQgaT0hMSxvPSExO2Zvcig7dC5pc0JlZm9yZShzLFwiZGF5XCIpOyl7aWYodGhpcy50ZXN0RmlsdGVyKHQpKXtpPSEwO2JyZWFrfXQuYWRkKDEsXCJkYXlcIil9Zm9yKDtlLmlzQWZ0ZXIocyxcImRheVwiKTspe2lmKHRoaXMudGVzdEZpbHRlcihlKSl7bz0hMDticmVha31lLnN1YnRyYWN0KDEsXCJkYXlcIil9aSYmbyYmbi5jbGFzc0xpc3QuYWRkKFwibm90LWF2YWlsYWJsZVwiKX10aGlzLnJhbmdlSXNOb3RBdmFpbGFibGUocyx0KSYmbi5jbGFzc0xpc3QuYWRkKFwibm90LWF2YWlsYWJsZVwiKX10aGlzLmRhdGVJc05vdEF2YWlsYWJsZShzLHQpJiZuLmNsYXNzTGlzdC5hZGQoXCJub3QtYXZhaWxhYmxlXCIpfWlmKHRoaXMub3B0aW9ucy5wcmVzZXRzJiZcIlByZXNldFBsdWdpbkJ1dHRvblwiPT09aSl7Y29uc3QgZT1uZXcgdChOdW1iZXIobi5kYXRhc2V0LnN0YXJ0KSksaT1uZXcgdChOdW1iZXIobi5kYXRhc2V0LmVuZCkpLHM9aS5kaWZmKGUsXCJkYXlcIiksbz10aGlzLm9wdGlvbnMubWluRGF5cyYmczx0aGlzLm9wdGlvbnMubWluRGF5cyxhPXRoaXMub3B0aW9ucy5tYXhEYXlzJiZzPnRoaXMub3B0aW9ucy5tYXhEYXlzOyhvfHxhfHx0aGlzLmxvY2tNaW5EYXRlKGUpfHx0aGlzLmxvY2tNYXhEYXRlKGUpfHx0aGlzLmxvY2tNaW5EYXRlKGkpfHx0aGlzLmxvY2tNYXhEYXRlKGkpfHx0aGlzLnJhbmdlSXNOb3RBdmFpbGFibGUoZSxpKSkmJm4uc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIixcImRpc2FibGVkXCIpfX1kYXRlSXNOb3RBdmFpbGFibGUodCxlKXtyZXR1cm4gdGhpcy5sb2NrTWluRGF0ZSh0KXx8dGhpcy5sb2NrTWF4RGF0ZSh0KXx8dGhpcy5sb2NrTWluRGF5cyh0LGUpfHx0aGlzLmxvY2tNYXhEYXlzKHQsZSl8fHRoaXMubG9ja1NlbGVjdEZvcndhcmQodCl8fHRoaXMubG9ja1NlbGVjdEJhY2t3YXJkKHQpfXJhbmdlSXNOb3RBdmFpbGFibGUodCxlKXtpZighdHx8IWUpcmV0dXJuITE7Y29uc3QgaT0odC5pc1NhbWVPckJlZm9yZShlLFwiZGF5XCIpP3Q6ZSkuY2xvbmUoKSxuPShlLmlzU2FtZU9yQWZ0ZXIodCxcImRheVwiKT9lOnQpLmNsb25lKCk7Zm9yKDtpLmlzU2FtZU9yQmVmb3JlKG4sXCJkYXlcIik7KXtpZih0aGlzLnRlc3RGaWx0ZXIoaSkpcmV0dXJuITA7aS5hZGQoMSxcImRheVwiKX1yZXR1cm4hMX1sb2NrTWluRGF0ZShlKXtyZXR1cm4gdGhpcy5vcHRpb25zLm1pbkRhdGUgaW5zdGFuY2VvZiB0JiZlLmlzQmVmb3JlKHRoaXMub3B0aW9ucy5taW5EYXRlLFwiZGF5XCIpfWxvY2tNYXhEYXRlKGUpe3JldHVybiB0aGlzLm9wdGlvbnMubWF4RGF0ZSBpbnN0YW5jZW9mIHQmJmUuaXNBZnRlcih0aGlzLm9wdGlvbnMubWF4RGF0ZSxcImRheVwiKX1sb2NrTWluRGF5cyh0LGUpe2lmKHRoaXMub3B0aW9ucy5taW5EYXlzJiZlKXtjb25zdCBpPWUuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLm9wdGlvbnMubWluRGF5cy0xLFwiZGF5XCIpLG49ZS5jbG9uZSgpLmFkZCh0aGlzLm9wdGlvbnMubWluRGF5cy0xLFwiZGF5XCIpO3JldHVybiB0LmlzQmV0d2VlbihpLG4pfXJldHVybiExfWxvY2tNYXhEYXlzKHQsZSl7aWYodGhpcy5vcHRpb25zLm1heERheXMmJmUpe2NvbnN0IGk9ZS5jbG9uZSgpLnN1YnRyYWN0KHRoaXMub3B0aW9ucy5tYXhEYXlzLFwiZGF5XCIpLG49ZS5jbG9uZSgpLmFkZCh0aGlzLm9wdGlvbnMubWF4RGF5cyxcImRheVwiKTtyZXR1cm4hdC5pc0JldHdlZW4oaSxuKX1yZXR1cm4hMX1sb2NrU2VsZWN0Rm9yd2FyZCh0KXtpZigxPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJnRoaXMub3B0aW9ucy5zZWxlY3RGb3J3YXJkKXtjb25zdCBlPXRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0uY2xvbmUoKTtyZXR1cm4gdC5pc0JlZm9yZShlLFwiZGF5XCIpfXJldHVybiExfWxvY2tTZWxlY3RCYWNrd2FyZCh0KXtpZigxPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJnRoaXMub3B0aW9ucy5zZWxlY3RCYWNrd2FyZCl7Y29uc3QgZT10aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmNsb25lKCk7cmV0dXJuIHQuaXNBZnRlcihlLFwiZGF5XCIpfXJldHVybiExfXRlc3RGaWx0ZXIodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLmZpbHRlciYmdGhpcy5vcHRpb25zLmZpbHRlcih0LHRoaXMucGlja2VyLmRhdGVQaWNrZWQpfX1jbGFzcyByIGV4dGVuZHMgb3tkZXBlbmRlbmNpZXM9W1wiUmFuZ2VQbHVnaW5cIl07YmluZHM9e29uVmlldzp0aGlzLm9uVmlldy5iaW5kKHRoaXMpLG9uQ2xpY2s6dGhpcy5vbkNsaWNrLmJpbmQodGhpcyl9O29wdGlvbnM9e2N1c3RvbUxhYmVsczpbXCJUb2RheVwiLFwiWWVzdGVyZGF5XCIsXCJMYXN0IDcgRGF5c1wiLFwiTGFzdCAzMCBEYXlzXCIsXCJUaGlzIE1vbnRoXCIsXCJMYXN0IE1vbnRoXCJdLGN1c3RvbVByZXNldDp7fSxwb3NpdGlvbjpcImxlZnRcIn07Z2V0TmFtZSgpe3JldHVyblwiUHJlc2V0UGx1Z2luXCJ9b25BdHRhY2goKXtpZighT2JqZWN0LmtleXModGhpcy5vcHRpb25zLmN1c3RvbVByZXNldCkubGVuZ3RoKXtjb25zdCBlPW5ldyB0LGk9KCk9Pntjb25zdCBpPWUuY2xvbmUoKTtpLnNldERhdGUoMSk7Y29uc3Qgbj1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpKzEsMCk7cmV0dXJuW25ldyB0KGkpLG5ldyB0KG4pXX0sbj0oKT0+e2NvbnN0IGk9ZS5jbG9uZSgpO2kuc2V0TW9udGgoaS5nZXRNb250aCgpLTEpLGkuc2V0RGF0ZSgxKTtjb25zdCBuPW5ldyBEYXRlKGUuZ2V0RnVsbFllYXIoKSxlLmdldE1vbnRoKCksMCk7cmV0dXJuW25ldyB0KGkpLG5ldyB0KG4pXX0scz1bW2UuY2xvbmUoKSxlLmNsb25lKCldLFtlLmNsb25lKCkuc3VidHJhY3QoMSxcImRheVwiKSxlLmNsb25lKCkuc3VidHJhY3QoMSxcImRheVwiKV0sW2UuY2xvbmUoKS5zdWJ0cmFjdCg2LFwiZGF5XCIpLGUuY2xvbmUoKV0sW2UuY2xvbmUoKS5zdWJ0cmFjdCgyOSxcImRheVwiKSxlLmNsb25lKCldLGkoKSxuKCldO09iamVjdC52YWx1ZXModGhpcy5vcHRpb25zLmN1c3RvbUxhYmVscykuZm9yRWFjaCgoKHQsZSk9Pnt0aGlzLm9wdGlvbnMuY3VzdG9tUHJlc2V0W3RdPXNbZV19KSl9dGhpcy5waWNrZXIub24oXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpLHRoaXMucGlja2VyLm9uKFwiY2xpY2tcIix0aGlzLmJpbmRzLm9uQ2xpY2spfW9uRGV0YWNoKCl7dGhpcy5waWNrZXIub2ZmKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vZmYoXCJjbGlja1wiLHRoaXMuYmluZHMub25DbGljayl9b25WaWV3KHQpe2NvbnN0e3ZpZXc6ZSx0YXJnZXQ6aX09dC5kZXRhaWw7aWYoXCJNYWluXCI9PT1lKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJwcmVzZXQtcGx1Z2luLWNvbnRhaW5lclwiLE9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5jdXN0b21QcmVzZXQpLmZvckVhY2goKGU9PntpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodGhpcy5vcHRpb25zLmN1c3RvbVByZXNldCxlKSl7Y29uc3QgaT10aGlzLm9wdGlvbnMuY3VzdG9tUHJlc2V0W2VdLG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtuLmNsYXNzTmFtZT1cInByZXNldC1idXR0b24gdW5pdFwiLG4uaW5uZXJIVE1MPWUsbi5kYXRhc2V0LnN0YXJ0PWlbMF0uZ2V0VGltZSgpLG4uZGF0YXNldC5lbmQ9aVsxXS5nZXRUaW1lKCksdC5hcHBlbmRDaGlsZChuKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHt2aWV3OlwiUHJlc2V0UGx1Z2luQnV0dG9uXCIsdGFyZ2V0Om59KX19KSksaS5hcHBlbmRDaGlsZCh0KSxpLmNsYXNzTGlzdC5hZGQoYHByZXNldC0ke3RoaXMub3B0aW9ucy5wb3NpdGlvbn1gKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHt2aWV3OlwiUHJlc2V0UGx1Z2luQ29udGFpbmVyXCIsdGFyZ2V0OnR9KX19b25DbGljayhlKXtjb25zdCBpPWUudGFyZ2V0O2lmKGkgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7Y29uc3QgZT1pLmNsb3Nlc3QoXCIudW5pdFwiKTtpZighKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpcmV0dXJuO2lmKHRoaXMuaXNQcmVzZXRCdXR0b24oZSkpe2NvbnN0IGk9bmV3IHQoTnVtYmVyKGUuZGF0YXNldC5zdGFydCkpLG49bmV3IHQoTnVtYmVyKGUuZGF0YXNldC5lbmQpKTt0aGlzLnBpY2tlci5vcHRpb25zLmF1dG9BcHBseT8odGhpcy5waWNrZXIuc2V0RGF0ZVJhbmdlKGksbiksdGhpcy5waWNrZXIudHJpZ2dlcihcInNlbGVjdFwiLHtzdGFydDp0aGlzLnBpY2tlci5nZXRTdGFydERhdGUoKSxlbmQ6dGhpcy5waWNrZXIuZ2V0RW5kRGF0ZSgpfSksdGhpcy5waWNrZXIuaGlkZSgpKToodGhpcy5waWNrZXIuZGF0ZVBpY2tlZD1baSxuXSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSl9fX1pc1ByZXNldEJ1dHRvbih0KXtyZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoXCJwcmVzZXQtYnV0dG9uXCIpfX1jbGFzcyBjIGV4dGVuZHMgb3t0b29sdGlwRWxlbWVudDt0cmlnZ2VyRWxlbWVudDtiaW5kcz17c2V0U3RhcnREYXRlOnRoaXMuc2V0U3RhcnREYXRlLmJpbmQodGhpcyksc2V0RW5kRGF0ZTp0aGlzLnNldEVuZERhdGUuYmluZCh0aGlzKSxzZXREYXRlUmFuZ2U6dGhpcy5zZXREYXRlUmFuZ2UuYmluZCh0aGlzKSxnZXRTdGFydERhdGU6dGhpcy5nZXRTdGFydERhdGUuYmluZCh0aGlzKSxnZXRFbmREYXRlOnRoaXMuZ2V0RW5kRGF0ZS5iaW5kKHRoaXMpLG9uVmlldzp0aGlzLm9uVmlldy5iaW5kKHRoaXMpLG9uU2hvdzp0aGlzLm9uU2hvdy5iaW5kKHRoaXMpLG9uTW91c2VFbnRlcjp0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpLG9uTW91c2VMZWF2ZTp0aGlzLm9uTW91c2VMZWF2ZS5iaW5kKHRoaXMpLG9uQ2xpY2tDYWxlbmRhckRheTp0aGlzLm9uQ2xpY2tDYWxlbmRhckRheS5iaW5kKHRoaXMpLG9uQ2xpY2tBcHBseUJ1dHRvbjp0aGlzLm9uQ2xpY2tBcHBseUJ1dHRvbi5iaW5kKHRoaXMpLHBhcnNlVmFsdWVzOnRoaXMucGFyc2VWYWx1ZXMuYmluZCh0aGlzKSx1cGRhdGVWYWx1ZXM6dGhpcy51cGRhdGVWYWx1ZXMuYmluZCh0aGlzKSxjbGVhcjp0aGlzLmNsZWFyLmJpbmQodGhpcyl9O29wdGlvbnM9e2VsZW1lbnRFbmQ6bnVsbCxzdGFydERhdGU6bnVsbCxlbmREYXRlOm51bGwscmVwaWNrOiExLHN0cmljdDohMCxkZWxpbWl0ZXI6XCIgLSBcIix0b29sdGlwOiEwLHRvb2x0aXBOdW1iZXI6dD0+dCxsb2NhbGU6e3plcm86XCJcIixvbmU6XCJkYXlcIix0d286XCJcIixmZXc6XCJcIixtYW55OlwiXCIsb3RoZXI6XCJkYXlzXCJ9LGRvY3VtZW50Q2xpY2s6dGhpcy5oaWRlUGlja2VyLmJpbmQodGhpcyl9O2dldE5hbWUoKXtyZXR1cm5cIlJhbmdlUGx1Z2luXCJ9b25BdHRhY2goKXt0aGlzLmJpbmRzLl9zZXRTdGFydERhdGU9dGhpcy5waWNrZXIuc2V0U3RhcnREYXRlLHRoaXMuYmluZHMuX3NldEVuZERhdGU9dGhpcy5waWNrZXIuc2V0RW5kRGF0ZSx0aGlzLmJpbmRzLl9zZXREYXRlUmFuZ2U9dGhpcy5waWNrZXIuc2V0RGF0ZVJhbmdlLHRoaXMuYmluZHMuX2dldFN0YXJ0RGF0ZT10aGlzLnBpY2tlci5nZXRTdGFydERhdGUsdGhpcy5iaW5kcy5fZ2V0RW5kRGF0ZT10aGlzLnBpY2tlci5nZXRFbmREYXRlLHRoaXMuYmluZHMuX3BhcnNlVmFsdWVzPXRoaXMucGlja2VyLnBhcnNlVmFsdWVzLHRoaXMuYmluZHMuX3VwZGF0ZVZhbHVlcz10aGlzLnBpY2tlci51cGRhdGVWYWx1ZXMsdGhpcy5iaW5kcy5fY2xlYXI9dGhpcy5waWNrZXIuY2xlYXIsdGhpcy5iaW5kcy5fb25DbGlja0NhbGVuZGFyRGF5PXRoaXMucGlja2VyLm9uQ2xpY2tDYWxlbmRhckRheSx0aGlzLmJpbmRzLl9vbkNsaWNrQXBwbHlCdXR0b249dGhpcy5waWNrZXIub25DbGlja0FwcGx5QnV0dG9uLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGlja2VyLHtzZXRTdGFydERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnNldFN0YXJ0RGF0ZX0sc2V0RW5kRGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuc2V0RW5kRGF0ZX0sc2V0RGF0ZVJhbmdlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5zZXREYXRlUmFuZ2V9LGdldFN0YXJ0RGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuZ2V0U3RhcnREYXRlfSxnZXRFbmREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5nZXRFbmREYXRlfSxwYXJzZVZhbHVlczp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMucGFyc2VWYWx1ZXN9LHVwZGF0ZVZhbHVlczp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMudXBkYXRlVmFsdWVzfSxjbGVhcjp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuY2xlYXJ9LG9uQ2xpY2tDYWxlbmRhckRheTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMub25DbGlja0NhbGVuZGFyRGF5fSxvbkNsaWNrQXBwbHlCdXR0b246e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLm9uQ2xpY2tBcHBseUJ1dHRvbn19KSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCYmKHRoaXMub3B0aW9ucy5lbGVtZW50RW5kIGluc3RhbmNlb2YgSFRNTEVsZW1lbnR8fCh0aGlzLm9wdGlvbnMuZWxlbWVudEVuZD10aGlzLnBpY2tlci5vcHRpb25zLmRvYy5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5lbGVtZW50RW5kKSksdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiYodGhpcy5vcHRpb25zLmVsZW1lbnRFbmQucmVhZE9ubHk9dGhpcy5waWNrZXIub3B0aW9ucy5yZWFkb25seSksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5waWNrZXIub3B0aW9ucy5kb2N1bWVudENsaWNrJiYoZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5waWNrZXIub3B0aW9ucy5kb2N1bWVudENsaWNrLCEwKSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9wdGlvbnMuZG9jdW1lbnRDbGljayYmZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2ssITApKSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLnBpY2tlci5zaG93LmJpbmQodGhpcy5waWNrZXIpKSksdGhpcy5vcHRpb25zLnJlcGljaz10aGlzLm9wdGlvbnMucmVwaWNrJiZ0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50LHRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZT1udWxsLHRoaXMucGlja2VyLm9uKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vbihcInNob3dcIix0aGlzLmJpbmRzLm9uU2hvdyksdGhpcy5waWNrZXIub24oXCJtb3VzZWVudGVyXCIsdGhpcy5iaW5kcy5vbk1vdXNlRW50ZXIsITApLHRoaXMucGlja2VyLm9uKFwibW91c2VsZWF2ZVwiLHRoaXMuYmluZHMub25Nb3VzZUxlYXZlLCEwKSx0aGlzLmNoZWNrSW50bFBsdXJhbExvY2FsZXMoKX1vbkRldGFjaCgpe09iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGlja2VyLHtzZXRTdGFydERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9zZXRTdGFydERhdGV9LHNldEVuZERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9zZXRFbmREYXRlfSxzZXREYXRlUmFuZ2U6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9zZXREYXRlUmFuZ2V9LGdldFN0YXJ0RGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX2dldFN0YXJ0RGF0ZX0sZ2V0RW5kRGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX2dldEVuZERhdGV9LHBhcnNlVmFsdWVzOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fcGFyc2VWYWx1ZXN9LHVwZGF0ZVZhbHVlczp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX3VwZGF0ZVZhbHVlc30sY2xlYXI6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9jbGVhcn0sb25DbGlja0NhbGVuZGFyRGF5Ontjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fb25DbGlja0NhbGVuZGFyRGF5fSxvbkNsaWNrQXBwbHlCdXR0b246e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9vbkNsaWNrQXBwbHlCdXR0b259fSksdGhpcy5waWNrZXIub2ZmKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vZmYoXCJzaG93XCIsdGhpcy5iaW5kcy5vblNob3cpLHRoaXMucGlja2VyLm9mZihcIm1vdXNlZW50ZXJcIix0aGlzLmJpbmRzLm9uTW91c2VFbnRlciwhMCksdGhpcy5waWNrZXIub2ZmKFwibW91c2VsZWF2ZVwiLHRoaXMuYmluZHMub25Nb3VzZUxlYXZlLCEwKX1wYXJzZVZhbHVlcygpe2lmKHRoaXMub3B0aW9ucy5zdGFydERhdGV8fHRoaXMub3B0aW9ucy5lbmREYXRlKXRoaXMub3B0aW9ucy5zdHJpY3Q/dGhpcy5vcHRpb25zLnN0YXJ0RGF0ZSYmdGhpcy5vcHRpb25zLmVuZERhdGU/dGhpcy5zZXREYXRlUmFuZ2UodGhpcy5vcHRpb25zLnN0YXJ0RGF0ZSx0aGlzLm9wdGlvbnMuZW5kRGF0ZSk6KHRoaXMub3B0aW9ucy5zdGFydERhdGU9bnVsbCx0aGlzLm9wdGlvbnMuZW5kRGF0ZT1udWxsKToodGhpcy5vcHRpb25zLnN0YXJ0RGF0ZSYmdGhpcy5zZXRTdGFydERhdGUodGhpcy5vcHRpb25zLnN0YXJ0RGF0ZSksdGhpcy5vcHRpb25zLmVuZERhdGUmJnRoaXMuc2V0RW5kRGF0ZSh0aGlzLm9wdGlvbnMuZW5kRGF0ZSkpO2Vsc2UgaWYodGhpcy5vcHRpb25zLmVsZW1lbnRFbmQpdGhpcy5vcHRpb25zLnN0cmljdD90aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoJiZ0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlLmxlbmd0aCYmdGhpcy5zZXREYXRlUmFuZ2UodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLHRoaXMub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlKToodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCYmdGhpcy5zZXRTdGFydERhdGUodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlKSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlLmxlbmd0aCYmdGhpcy5zZXRFbmREYXRlKHRoaXMub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlKSk7ZWxzZSBpZih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoKXtjb25zdFt0LGVdPXRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZS5zcGxpdCh0aGlzLm9wdGlvbnMuZGVsaW1pdGVyKTt0aGlzLm9wdGlvbnMuc3RyaWN0P3QmJmUmJnRoaXMuc2V0RGF0ZVJhbmdlKHQsZSk6KHQmJnRoaXMuc2V0U3RhcnREYXRlKHQpLGUmJnRoaXMuc2V0RW5kRGF0ZShlKSl9fXVwZGF0ZVZhbHVlcygpe2NvbnN0IHQ9dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LGU9dGhpcy5vcHRpb25zLmVsZW1lbnRFbmQsaT10aGlzLnBpY2tlci5nZXRTdGFydERhdGUoKSxuPXRoaXMucGlja2VyLmdldEVuZERhdGUoKSxzPWkgaW5zdGFuY2VvZiBEYXRlP2kuZm9ybWF0KHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0LHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyk6XCJcIixvPW4gaW5zdGFuY2VvZiBEYXRlP24uZm9ybWF0KHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0LHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyk6XCJcIjtpZihlKXQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50P3QudmFsdWU9czp0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQmJih0LmlubmVyVGV4dD1zKSxlIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudD9lLnZhbHVlPW86ZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYoZS5pbm5lclRleHQ9byk7ZWxzZXtjb25zdCBlPWAke3N9JHtzfHxvP3RoaXMub3B0aW9ucy5kZWxpbWl0ZXI6XCJcIn0ke299YDt0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudD90LnZhbHVlPWU6dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYodC5pbm5lclRleHQ9ZSl9fWNsZWFyKCl7dGhpcy5vcHRpb25zLnN0YXJ0RGF0ZT1udWxsLHRoaXMub3B0aW9ucy5lbmREYXRlPW51bGwsdGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGg9MCx0aGlzLnVwZGF0ZVZhbHVlcygpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJjbGVhclwiKX1vblNob3codCl7Y29uc3R7dGFyZ2V0OmV9PXQuZGV0YWlsO3RoaXMudHJpZ2dlckVsZW1lbnQ9ZSx0aGlzLnBpY2tlci5vcHRpb25zLnNjcm9sbFRvRGF0ZSYmdGhpcy5nZXRTdGFydERhdGUoKWluc3RhbmNlb2YgRGF0ZSYmdGhpcy5waWNrZXIuZ290b0RhdGUodGhpcy5nZXRTdGFydERhdGUoKSksdGhpcy5pbml0aWFsaXplUmVwaWNrKCl9b25WaWV3KGUpe2NvbnN0e3ZpZXc6aSx0YXJnZXQ6bn09ZS5kZXRhaWw7aWYoXCJNYWluXCI9PT1pJiYodGhpcy50b29sdGlwRWxlbWVudD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLnRvb2x0aXBFbGVtZW50LmNsYXNzTmFtZT1cInJhbmdlLXBsdWdpbi10b29sdGlwXCIsbi5hcHBlbmRDaGlsZCh0aGlzLnRvb2x0aXBFbGVtZW50KSksXCJDYWxlbmRhckRheVwiPT09aSl7Y29uc3QgZT1uZXcgdChuLmRhdGFzZXQudGltZSksaT10aGlzLnBpY2tlci5kYXRlUGlja2VkLHM9aS5sZW5ndGg/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXTp0aGlzLmdldFN0YXJ0RGF0ZSgpLG89aS5sZW5ndGg/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXTp0aGlzLmdldEVuZERhdGUoKTtzJiZzLmlzU2FtZShlLFwiZGF5XCIpJiZuLmNsYXNzTGlzdC5hZGQoXCJzdGFydFwiKSxzJiZvJiYoby5pc1NhbWUoZSxcImRheVwiKSYmbi5jbGFzc0xpc3QuYWRkKFwiZW5kXCIpLGUuaXNCZXR3ZWVuKHMsbykmJm4uY2xhc3NMaXN0LmFkZChcImluLXJhbmdlXCIpKX1pZihcIkZvb3RlclwiPT09aSl7Y29uc3QgdD0xPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJiF0aGlzLm9wdGlvbnMuc3RyaWN0fHwyPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGg7bi5xdWVyeVNlbGVjdG9yKFwiLmFwcGx5LWJ1dHRvblwiKS5kaXNhYmxlZD0hdH19aGlkZVBpY2tlcih0KXtsZXQgZT10LnRhcmdldCxpPW51bGw7ZS5zaGFkb3dSb290JiYoZT10LmNvbXBvc2VkUGF0aCgpWzBdLGk9ZS5nZXRSb290Tm9kZSgpLmhvc3QpLHRoaXMucGlja2VyLmlzU2hvd24oKSYmaSE9PXRoaXMucGlja2VyLnVpLndyYXBwZXImJmUhPT10aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQmJmUhPT10aGlzLm9wdGlvbnMuZWxlbWVudEVuZCYmdGhpcy5waWNrZXIuaGlkZSgpfXNldFN0YXJ0RGF0ZShlKXtjb25zdCBpPW5ldyB0KGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMub3B0aW9ucy5zdGFydERhdGU9aT9pLmNsb25lKCk6bnVsbCx0aGlzLnVwZGF0ZVZhbHVlcygpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpfXNldEVuZERhdGUoZSl7Y29uc3QgaT1uZXcgdChlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLm9wdGlvbnMuZW5kRGF0ZT1pP2kuY2xvbmUoKTpudWxsLHRoaXMudXBkYXRlVmFsdWVzKCksdGhpcy5waWNrZXIucmVuZGVyQWxsKCl9c2V0RGF0ZVJhbmdlKGUsaSl7Y29uc3Qgbj1uZXcgdChlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KSxzPW5ldyB0KGksdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMub3B0aW9ucy5zdGFydERhdGU9bj9uLmNsb25lKCk6bnVsbCx0aGlzLm9wdGlvbnMuZW5kRGF0ZT1zP3MuY2xvbmUoKTpudWxsLHRoaXMudXBkYXRlVmFsdWVzKCksdGhpcy5waWNrZXIucmVuZGVyQWxsKCl9Z2V0U3RhcnREYXRlKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5zdGFydERhdGUgaW5zdGFuY2VvZiBEYXRlP3RoaXMub3B0aW9ucy5zdGFydERhdGUuY2xvbmUoKTpudWxsfWdldEVuZERhdGUoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmVuZERhdGUgaW5zdGFuY2VvZiBEYXRlP3RoaXMub3B0aW9ucy5lbmREYXRlLmNsb25lKCk6bnVsbH1vbk1vdXNlRW50ZXIoZSl7Y29uc3QgaT1lLnRhcmdldDtpZihpIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe3RoaXMuaXNDb250YWluZXIoaSkmJnRoaXMuaW5pdGlhbGl6ZVJlcGljaygpO2NvbnN0IGU9aS5jbG9zZXN0KFwiLnVuaXRcIik7aWYoIShlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKXJldHVybjtpZih0aGlzLnBpY2tlci5pc0NhbGVuZGFyRGF5KGUpKXtpZigxIT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgpcmV0dXJuO2xldCBpPXRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0uY2xvbmUoKSxuPW5ldyB0KGUuZGF0YXNldC50aW1lKSxzPSExO2lmKGkuaXNBZnRlcihuLFwiZGF5XCIpKXtjb25zdCB0PWkuY2xvbmUoKTtpPW4uY2xvbmUoKSxuPXQuY2xvbmUoKSxzPSEwfWlmKFsuLi50aGlzLnBpY2tlci51aS5jb250YWluZXIucXVlcnlTZWxlY3RvckFsbChcIi5kYXlcIildLmZvckVhY2goKG89Pntjb25zdCBhPW5ldyB0KG8uZGF0YXNldC50aW1lKSxyPXRoaXMucGlja2VyLkNhbGVuZGFyLmdldENhbGVuZGFyRGF5VmlldyhhKTthLmlzQmV0d2VlbihpLG4pJiZyLmNsYXNzTGlzdC5hZGQoXCJpbi1yYW5nZVwiKSxhLmlzU2FtZSh0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLFwiZGF5XCIpJiYoci5jbGFzc0xpc3QuYWRkKFwic3RhcnRcIiksci5jbGFzc0xpc3QudG9nZ2xlKFwiZmxpcHBlZFwiLHMpKSxvPT09ZSYmKHIuY2xhc3NMaXN0LmFkZChcImVuZFwiKSxyLmNsYXNzTGlzdC50b2dnbGUoXCJmbGlwcGVkXCIscykpLG8uY2xhc3NOYW1lPXIuY2xhc3NOYW1lfSkpLHRoaXMub3B0aW9ucy50b29sdGlwKXtjb25zdCB0PXRoaXMub3B0aW9ucy50b29sdGlwTnVtYmVyKG4uZGlmZihpLFwiZGF5XCIpKzEpO2lmKHQ+MCl7Y29uc3QgaT1uZXcgSW50bC5QbHVyYWxSdWxlcyh0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcpLnNlbGVjdCh0KSxuPWAke3R9ICR7dGhpcy5vcHRpb25zLmxvY2FsZVtpXX1gO3RoaXMuc2hvd1Rvb2x0aXAoZSxuKX1lbHNlIHRoaXMuaGlkZVRvb2x0aXAoKX19fX1vbk1vdXNlTGVhdmUodCl7aWYodGhpcy5pc0NvbnRhaW5lcih0LnRhcmdldCkmJnRoaXMub3B0aW9ucy5yZXBpY2spe2NvbnN0IHQ9dGhpcy5nZXRTdGFydERhdGUoKSxlPXRoaXMuZ2V0RW5kRGF0ZSgpO3QmJmUmJih0aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aD0wLHRoaXMucGlja2VyLnJlbmRlckFsbCgpKX19b25DbGlja0NhbGVuZGFyRGF5KGUpe2lmKHRoaXMucGlja2VyLmlzQ2FsZW5kYXJEYXkoZSkpezI9PT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmKHRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoPTApO2NvbnN0IGk9bmV3IHQoZS5kYXRhc2V0LnRpbWUpO2lmKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbdGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGhdPWksMj09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiZ0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmlzQWZ0ZXIodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXSkpe2NvbnN0IHQ9dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXS5jbG9uZSgpO3RoaXMucGlja2VyLmRhdGVQaWNrZWRbMV09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXS5jbG9uZSgpLHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF09dC5jbG9uZSgpfTEhPT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHl8fHRoaXMucGlja2VyLnRyaWdnZXIoXCJwcmVzZWxlY3RcIix7c3RhcnQ6dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXWluc3RhbmNlb2YgRGF0ZT90aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmNsb25lKCk6bnVsbCxlbmQ6dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXWluc3RhbmNlb2YgRGF0ZT90aGlzLnBpY2tlci5kYXRlUGlja2VkWzFdLmNsb25lKCk6bnVsbH0pLDE9PT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmKCF0aGlzLm9wdGlvbnMuc3RyaWN0JiZ0aGlzLnBpY2tlci5vcHRpb25zLmF1dG9BcHBseSYmKHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudD09PXRoaXMudHJpZ2dlckVsZW1lbnQmJnRoaXMuc2V0U3RhcnREYXRlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0pLHRoaXMub3B0aW9ucy5lbGVtZW50RW5kPT09dGhpcy50cmlnZ2VyRWxlbWVudCYmdGhpcy5zZXRFbmREYXRlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJzZWxlY3RcIix7c3RhcnQ6dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlKCksZW5kOnRoaXMucGlja2VyLmdldEVuZERhdGUoKX0pKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSksMj09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiYodGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHk/KHRoaXMuc2V0RGF0ZVJhbmdlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0sdGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXSksdGhpcy5waWNrZXIudHJpZ2dlcihcInNlbGVjdFwiLHtzdGFydDp0aGlzLnBpY2tlci5nZXRTdGFydERhdGUoKSxlbmQ6dGhpcy5waWNrZXIuZ2V0RW5kRGF0ZSgpfSksdGhpcy5waWNrZXIuaGlkZSgpKToodGhpcy5oaWRlVG9vbHRpcCgpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpKSl9fW9uQ2xpY2tBcHBseUJ1dHRvbih0KXt0aGlzLnBpY2tlci5pc0FwcGx5QnV0dG9uKHQpJiYoMSE9PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RofHx0aGlzLm9wdGlvbnMuc3RyaWN0fHwodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50PT09dGhpcy50cmlnZ2VyRWxlbWVudCYmKHRoaXMub3B0aW9ucy5lbmREYXRlPW51bGwsdGhpcy5zZXRTdGFydERhdGUodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXSkpLHRoaXMub3B0aW9ucy5lbGVtZW50RW5kPT09dGhpcy50cmlnZ2VyRWxlbWVudCYmKHRoaXMub3B0aW9ucy5zdGFydERhdGU9bnVsbCx0aGlzLnNldEVuZERhdGUodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXSkpKSwyPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJnRoaXMuc2V0RGF0ZVJhbmdlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0sdGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXSksdGhpcy5waWNrZXIudHJpZ2dlcihcInNlbGVjdFwiLHtzdGFydDp0aGlzLnBpY2tlci5nZXRTdGFydERhdGUoKSxlbmQ6dGhpcy5waWNrZXIuZ2V0RW5kRGF0ZSgpfSksdGhpcy5waWNrZXIuaGlkZSgpKX1zaG93VG9vbHRpcCh0LGUpe3RoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cInZpc2libGVcIix0aGlzLnRvb2x0aXBFbGVtZW50LmlubmVySFRNTD1lO2NvbnN0IGk9dGhpcy5waWNrZXIudWkuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLG49dGhpcy50b29sdGlwRWxlbWVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxzPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7bGV0IG89cy50b3AsYT1zLmxlZnQ7by09aS50b3AsYS09aS5sZWZ0LG8tPW4uaGVpZ2h0LGEtPW4ud2lkdGgvMixhKz1zLndpZHRoLzIsdGhpcy50b29sdGlwRWxlbWVudC5zdHlsZS50b3A9YCR7b31weGAsdGhpcy50b29sdGlwRWxlbWVudC5zdHlsZS5sZWZ0PWAke2F9cHhgfWhpZGVUb29sdGlwKCl7dGhpcy50b29sdGlwRWxlbWVudC5zdHlsZS52aXNpYmlsaXR5PVwiaGlkZGVuXCJ9Y2hlY2tJbnRsUGx1cmFsTG9jYWxlcygpe2lmKCF0aGlzLm9wdGlvbnMudG9vbHRpcClyZXR1cm47Y29uc3QgdD1bLi4ubmV3IFNldChbbmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QoMCksbmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QoMSksbmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QoMiksbmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QoNiksbmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QoMTgpXSldLGU9T2JqZWN0LmtleXModGhpcy5vcHRpb25zLmxvY2FsZSk7dC5ldmVyeSgodD0+ZS5pbmNsdWRlcyh0KSkpfHxjb25zb2xlLndhcm4oYCR7dGhpcy5nZXROYW1lKCl9OiBwcm92aWRlIGxvY2FsZXMgKCR7dC5qb2luKFwiLCBcIil9KSBmb3IgY29ycmVjdCB0b29sdGlwIHRleHQuYCl9aW5pdGlhbGl6ZVJlcGljaygpe2lmKCF0aGlzLm9wdGlvbnMucmVwaWNrKXJldHVybjtjb25zdCB0PXRoaXMuZ2V0U3RhcnREYXRlKCksZT10aGlzLmdldEVuZERhdGUoKTtlJiZ0aGlzLnRyaWdnZXJFbGVtZW50PT09dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50JiYodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXT1lKSx0JiZ0aGlzLnRyaWdnZXJFbGVtZW50PT09dGhpcy5vcHRpb25zLmVsZW1lbnRFbmQmJih0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdPXQpfWlzQ29udGFpbmVyKHQpe3JldHVybiB0PT09dGhpcy5waWNrZXIudWkuY29udGFpbmVyfX1jbGFzcyBsIGV4dGVuZHMgb3tvcHRpb25zPXtuYXRpdmU6ITEsc2Vjb25kczohMSxzdGVwSG91cnM6MSxzdGVwTWludXRlczo1LHN0ZXBTZWNvbmRzOjUsZm9ybWF0MTI6ITF9O3JhbmdlUGx1Z2luO3RpbWVQaWNrZWQ9e2lucHV0Om51bGwsc3RhcnQ6bnVsbCxlbmQ6bnVsbH07dGltZVByZVBpY2tlZD17aW5wdXQ6bnVsbCxzdGFydDpudWxsLGVuZDpudWxsfTtiaW5kcz17Z2V0RGF0ZTp0aGlzLmdldERhdGUuYmluZCh0aGlzKSxnZXRTdGFydERhdGU6dGhpcy5nZXRTdGFydERhdGUuYmluZCh0aGlzKSxnZXRFbmREYXRlOnRoaXMuZ2V0RW5kRGF0ZS5iaW5kKHRoaXMpLG9uVmlldzp0aGlzLm9uVmlldy5iaW5kKHRoaXMpLG9uSW5wdXQ6dGhpcy5vbklucHV0LmJpbmQodGhpcyksb25DaGFuZ2U6dGhpcy5vbkNoYW5nZS5iaW5kKHRoaXMpLG9uQ2xpY2s6dGhpcy5vbkNsaWNrLmJpbmQodGhpcyksc2V0VGltZTp0aGlzLnNldFRpbWUuYmluZCh0aGlzKSxzZXRTdGFydFRpbWU6dGhpcy5zZXRTdGFydFRpbWUuYmluZCh0aGlzKSxzZXRFbmRUaW1lOnRoaXMuc2V0RW5kVGltZS5iaW5kKHRoaXMpfTtnZXROYW1lKCl7cmV0dXJuXCJUaW1lUGx1Z2luXCJ9b25BdHRhY2goKXt0aGlzLmJpbmRzLl9nZXREYXRlPXRoaXMucGlja2VyLmdldERhdGUsdGhpcy5iaW5kcy5fZ2V0U3RhcnREYXRlPXRoaXMucGlja2VyLmdldFN0YXJ0RGF0ZSx0aGlzLmJpbmRzLl9nZXRFbmREYXRlPXRoaXMucGlja2VyLmdldEVuZERhdGUsT2JqZWN0LmRlZmluZVByb3BlcnRpZXModGhpcy5waWNrZXIse2dldERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLmdldERhdGV9LGdldFN0YXJ0RGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuZ2V0U3RhcnREYXRlfSxnZXRFbmREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5nZXRFbmREYXRlfSxzZXRUaW1lOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5zZXRUaW1lfSxzZXRTdGFydFRpbWU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnNldFN0YXJ0VGltZX0sc2V0RW5kVGltZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuc2V0RW5kVGltZX19KSx0aGlzLnJhbmdlUGx1Z2luPXRoaXMucGlja2VyLlBsdWdpbk1hbmFnZXIuZ2V0SW5zdGFuY2UoXCJSYW5nZVBsdWdpblwiKSx0aGlzLnBhcnNlVmFsdWVzKCksdGhpcy5waWNrZXIub24oXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpLHRoaXMucGlja2VyLm9uKFwiaW5wdXRcIix0aGlzLmJpbmRzLm9uSW5wdXQpLHRoaXMucGlja2VyLm9uKFwiY2hhbmdlXCIsdGhpcy5iaW5kcy5vbkNoYW5nZSksdGhpcy5waWNrZXIub24oXCJjbGlja1wiLHRoaXMuYmluZHMub25DbGljayl9b25EZXRhY2goKXtkZWxldGUgdGhpcy5waWNrZXIuc2V0VGltZSxkZWxldGUgdGhpcy5waWNrZXIuc2V0U3RhcnRUaW1lLGRlbGV0ZSB0aGlzLnBpY2tlci5zZXRFbmRUaW1lLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGlja2VyLHtnZXREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fZ2V0RGF0ZX0sZ2V0U3RhcnREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fZ2V0U3RhcnREYXRlfSxnZXRFbmREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fZ2V0RW5kRGF0ZX19KSx0aGlzLnBpY2tlci5vZmYoXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpLHRoaXMucGlja2VyLm9mZihcImlucHV0XCIsdGhpcy5iaW5kcy5vbklucHV0KSx0aGlzLnBpY2tlci5vZmYoXCJjaGFuZ2VcIix0aGlzLmJpbmRzLm9uQ2hhbmdlKSx0aGlzLnBpY2tlci5vZmYoXCJjbGlja1wiLHRoaXMuYmluZHMub25DbGljayl9b25WaWV3KHQpe2NvbnN0e3ZpZXc6ZSx0YXJnZXQ6aX09dC5kZXRhaWw7aWYoXCJNYWluXCI9PT1lKXt0aGlzLnJhbmdlUGx1Z2luPXRoaXMucGlja2VyLlBsdWdpbk1hbmFnZXIuZ2V0SW5zdGFuY2UoXCJSYW5nZVBsdWdpblwiKTtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aWYodC5jbGFzc05hbWU9XCJ0aW1lLXBsdWdpbi1jb250YWluZXJcIix0aGlzLnJhbmdlUGx1Z2luKXtjb25zdCBlPXRoaXMuZ2V0U3RhcnRJbnB1dCgpO3QuYXBwZW5kQ2hpbGQoZSksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlRpbWVQbHVnaW5JbnB1dFwiLHRhcmdldDplfSk7Y29uc3QgaT10aGlzLmdldEVuZElucHV0KCk7dC5hcHBlbmRDaGlsZChpKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHt2aWV3OlwiVGltZVBsdWdpbklucHV0XCIsdGFyZ2V0Oml9KX1lbHNle2NvbnN0IGU9dGhpcy5nZXRTaW5nbGVJbnB1dCgpO3QuYXBwZW5kQ2hpbGQoZSksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlRpbWVQbHVnaW5JbnB1dFwiLHRhcmdldDplfSl9aS5hcHBlbmRDaGlsZCh0KSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHt2aWV3OlwiVGltZVBsdWdpbkNvbnRhaW5lclwiLHRhcmdldDp0fSl9fW9uSW5wdXQoZSl7Y29uc3QgaT1lLnRhcmdldDtpZihpIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmaS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aW1lLXBsdWdpbi1pbnB1dFwiKSl7Y29uc3QgZT10aGlzLnRpbWVQaWNrZWRbaS5uYW1lXXx8bmV3IHQsW24sc109aS52YWx1ZS5zcGxpdChcIjpcIik7ZS5zZXRIb3VycyhOdW1iZXIobil8fDAsTnVtYmVyKHMpfHwwLDAsMCksdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHk/KHRoaXMudGltZVBpY2tlZFtpLm5hbWVdPWUsdGhpcy5waWNrZXIudXBkYXRlVmFsdWVzKCkpOnRoaXMudGltZVByZVBpY2tlZFtpLm5hbWVdPWV9fW9uQ2hhbmdlKGUpe2NvbnN0IGk9ZS50YXJnZXQ7aWYoaSBpbnN0YW5jZW9mIEhUTUxTZWxlY3RFbGVtZW50JiZpLmNsYXNzTGlzdC5jb250YWlucyhcInRpbWUtcGx1Z2luLWN1c3RvbS1pbnB1dFwiKSl7Y29uc3QgZT0vKFxcdyspXFxbKFxcdyspXFxdLyxbLG4sc109aS5uYW1lLm1hdGNoKGUpLG89TnVtYmVyKGkudmFsdWUpO2xldCBhPW5ldyB0O3N3aXRjaCghdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHkmJnRoaXMudGltZVByZVBpY2tlZFtuXWluc3RhbmNlb2YgRGF0ZT9hPXRoaXMudGltZVByZVBpY2tlZFtuXS5jbG9uZSgpOnRoaXMudGltZVBpY2tlZFtuXWluc3RhbmNlb2YgRGF0ZSYmKGE9dGhpcy50aW1lUGlja2VkW25dLmNsb25lKCkpLHMpe2Nhc2VcIkhIXCI6aWYodGhpcy5vcHRpb25zLmZvcm1hdDEyKXtjb25zdCB0PWkuY2xvc2VzdChcIi50aW1lLXBsdWdpbi1jdXN0b20tYmxvY2tcIikucXVlcnlTZWxlY3Rvcihgc2VsZWN0W25hbWU9XCIke259W3BlcmlvZF1cIl1gKS52YWx1ZSxlPXRoaXMuaGFuZGxlRm9ybWF0MTIodCxhLG8pO2Euc2V0SG91cnMoZS5nZXRIb3VycygpLGUuZ2V0TWludXRlcygpLGUuZ2V0U2Vjb25kcygpLDApfWVsc2UgYS5zZXRIb3VycyhvLGEuZ2V0TWludXRlcygpLGEuZ2V0U2Vjb25kcygpLDApO2JyZWFrO2Nhc2VcIm1tXCI6YS5zZXRIb3VycyhhLmdldEhvdXJzKCksbyxhLmdldFNlY29uZHMoKSwwKTticmVhaztjYXNlXCJzc1wiOmEuc2V0SG91cnMoYS5nZXRIb3VycygpLGEuZ2V0TWludXRlcygpLG8sMCk7YnJlYWs7Y2FzZVwicGVyaW9kXCI6aWYodGhpcy5vcHRpb25zLmZvcm1hdDEyKXtjb25zdCB0PWkuY2xvc2VzdChcIi50aW1lLXBsdWdpbi1jdXN0b20tYmxvY2tcIikucXVlcnlTZWxlY3Rvcihgc2VsZWN0W25hbWU9XCIke259W0hIXVwiXWApLnZhbHVlLGU9dGhpcy5oYW5kbGVGb3JtYXQxMihpLnZhbHVlLGEsTnVtYmVyKHQpKTthLnNldEhvdXJzKGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSwwKX19aWYodGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHkpdGhpcy50aW1lUGlja2VkW25dPWEsdGhpcy5waWNrZXIudXBkYXRlVmFsdWVzKCk7ZWxzZXt0aGlzLnRpbWVQcmVQaWNrZWRbbl09YTtjb25zdCB0PXRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmFwcGx5LWJ1dHRvblwiKTtpZih0aGlzLnJhbmdlUGx1Z2luKXtjb25zdCBlPXRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucyxpPXRoaXMucGlja2VyLmRhdGVQaWNrZWQsbj1lLnN0cmljdCYmMj09PWkubGVuZ3RofHwhZS5zdHJpY3QmJmkubGVuZ3RoPjB8fCFpLmxlbmd0aCYmZS5zdHJpY3QmJmUuc3RhcnREYXRlIGluc3RhbmNlb2YgRGF0ZSYmZS5lbmREYXRlIGluc3RhbmNlb2YgRGF0ZXx8IWkubGVuZ3RoJiYhZS5zdHJpY3QmJihlLnN0YXJ0RGF0ZSBpbnN0YW5jZW9mIERhdGV8fGUuZW5kRGF0ZSBpbnN0YW5jZW9mIERhdGUpO3QuZGlzYWJsZWQ9IW59ZWxzZSB0aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmKHQuZGlzYWJsZWQ9ITEpfX19b25DbGljayh0KXtjb25zdCBlPXQudGFyZ2V0O2lmKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7Y29uc3QgdD1lLmNsb3Nlc3QoXCIudW5pdFwiKTtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpcmV0dXJuO3RoaXMucGlja2VyLmlzQXBwbHlCdXR0b24odCkmJihPYmplY3Qua2V5cyh0aGlzLnRpbWVQaWNrZWQpLmZvckVhY2goKHQ9Pnt0aGlzLnRpbWVQcmVQaWNrZWRbdF1pbnN0YW5jZW9mIERhdGUmJih0aGlzLnRpbWVQaWNrZWRbdF09dGhpcy50aW1lUHJlUGlja2VkW3RdLmNsb25lKCkpfSkpLHRoaXMucGlja2VyLnVwZGF0ZVZhbHVlcygpLHRoaXMudGltZVByZVBpY2tlZD17aW5wdXQ6bnVsbCxzdGFydDpudWxsLGVuZDpudWxsfSksdGhpcy5waWNrZXIuaXNDYW5jZWxCdXR0b24odCkmJih0aGlzLnRpbWVQcmVQaWNrZWQ9e2lucHV0Om51bGwsc3RhcnQ6bnVsbCxlbmQ6bnVsbH0sdGhpcy5waWNrZXIucmVuZGVyQWxsKCkpfX1zZXRUaW1lKHQpe2NvbnN0IGU9dGhpcy5oYW5kbGVUaW1lU3RyaW5nKHQpO3RoaXMudGltZVBpY2tlZC5pbnB1dD1lLmNsb25lKCksdGhpcy5waWNrZXIucmVuZGVyQWxsKCksdGhpcy5waWNrZXIudXBkYXRlVmFsdWVzKCl9c2V0U3RhcnRUaW1lKHQpe2NvbnN0IGU9dGhpcy5oYW5kbGVUaW1lU3RyaW5nKHQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1lLmNsb25lKCksdGhpcy5waWNrZXIucmVuZGVyQWxsKCksdGhpcy5waWNrZXIudXBkYXRlVmFsdWVzKCl9c2V0RW5kVGltZSh0KXtjb25zdCBlPXRoaXMuaGFuZGxlVGltZVN0cmluZyh0KTt0aGlzLnRpbWVQaWNrZWQuZW5kPWUuY2xvbmUoKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSx0aGlzLnBpY2tlci51cGRhdGVWYWx1ZXMoKX1oYW5kbGVUaW1lU3RyaW5nKGUpe2NvbnN0IGk9bmV3IHQsW24scyxvXT1lLnNwbGl0KFwiOlwiKS5tYXAoKHQ9Pk51bWJlcih0KSkpLGE9biYmIU51bWJlci5pc05hTihuKT9uOjAscj1zJiYhTnVtYmVyLmlzTmFOKHMpP3M6MCxjPW8mJiFOdW1iZXIuaXNOYU4obyk/bzowO3JldHVybiBpLnNldEhvdXJzKGEscixjLDApLGl9Z2V0RGF0ZSgpe2lmKHRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZSBpbnN0YW5jZW9mIERhdGUpe2NvbnN0IGU9bmV3IHQodGhpcy5waWNrZXIub3B0aW9ucy5kYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTtpZih0aGlzLnRpbWVQaWNrZWQuaW5wdXQgaW5zdGFuY2VvZiBEYXRlKXtjb25zdCB0PXRoaXMudGltZVBpY2tlZC5pbnB1dDtlLnNldEhvdXJzKHQuZ2V0SG91cnMoKSx0LmdldE1pbnV0ZXMoKSx0LmdldFNlY29uZHMoKSwwKX1yZXR1cm4gZX1yZXR1cm4gbnVsbH1nZXRTdGFydERhdGUoKXtpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RhcnREYXRlIGluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgZT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RhcnREYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTtpZih0aGlzLnRpbWVQaWNrZWQuc3RhcnQgaW5zdGFuY2VvZiBEYXRlKXtjb25zdCB0PXRoaXMudGltZVBpY2tlZC5zdGFydDtlLnNldEhvdXJzKHQuZ2V0SG91cnMoKSx0LmdldE1pbnV0ZXMoKSx0LmdldFNlY29uZHMoKSwwKX1yZXR1cm4gZX1yZXR1cm4gbnVsbH1nZXRFbmREYXRlKCl7aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVuZERhdGUgaW5zdGFuY2VvZiBEYXRlKXtjb25zdCBlPW5ldyB0KHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbmREYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTtpZih0aGlzLnRpbWVQaWNrZWQuZW5kIGluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgdD10aGlzLnRpbWVQaWNrZWQuZW5kO2Uuc2V0SG91cnModC5nZXRIb3VycygpLHQuZ2V0TWludXRlcygpLHQuZ2V0U2Vjb25kcygpLDApfXJldHVybiBlfXJldHVybiBudWxsfWdldFNpbmdsZUlucHV0KCl7cmV0dXJuIHRoaXMub3B0aW9ucy5uYXRpdmU/dGhpcy5nZXROYXRpdmVJbnB1dChcImlucHV0XCIpOnRoaXMuZ2V0Q3VzdG9tSW5wdXQoXCJpbnB1dFwiKX1nZXRTdGFydElucHV0KCl7cmV0dXJuIHRoaXMub3B0aW9ucy5uYXRpdmU/dGhpcy5nZXROYXRpdmVJbnB1dChcInN0YXJ0XCIpOnRoaXMuZ2V0Q3VzdG9tSW5wdXQoXCJzdGFydFwiKX1nZXRFbmRJbnB1dCgpe3JldHVybiB0aGlzLm9wdGlvbnMubmF0aXZlP3RoaXMuZ2V0TmF0aXZlSW5wdXQoXCJlbmRcIik6dGhpcy5nZXRDdXN0b21JbnB1dChcImVuZFwiKX1nZXROYXRpdmVJbnB1dCh0KXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtlLnR5cGU9XCJ0aW1lXCIsZS5uYW1lPXQsZS5jbGFzc05hbWU9XCJ0aW1lLXBsdWdpbi1pbnB1dCB1bml0XCI7Y29uc3QgaT10aGlzLnRpbWVQaWNrZWRbdF07aWYoaSl7Y29uc3QgdD1gMCR7aS5nZXRIb3VycygpfWAuc2xpY2UoLTIpLG49YDAke2kuZ2V0TWludXRlcygpfWAuc2xpY2UoLTIpO2UudmFsdWU9YCR7dH06JHtufWB9cmV0dXJuIGV9Z2V0Q3VzdG9tSW5wdXQodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY3VzdG9tLWJsb2NrXCI7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2kuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY3VzdG9tLWlucHV0IHVuaXRcIixpLm5hbWU9YCR7dH1bSEhdYDtjb25zdCBuPXRoaXMub3B0aW9ucy5mb3JtYXQxMj8xOjAscz10aGlzLm9wdGlvbnMuZm9ybWF0MTI/MTM6MjQ7bGV0IG89bnVsbDshdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHkmJnRoaXMudGltZVByZVBpY2tlZFt0XWluc3RhbmNlb2YgRGF0ZT9vPXRoaXMudGltZVByZVBpY2tlZFt0XS5jbG9uZSgpOnRoaXMudGltZVBpY2tlZFt0XWluc3RhbmNlb2YgRGF0ZSYmKG89dGhpcy50aW1lUGlja2VkW3RdLmNsb25lKCkpO2ZvcihsZXQgdD1uO3Q8czt0Kz10aGlzLm9wdGlvbnMuc3RlcEhvdXJzKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT1TdHJpbmcodCksZS50ZXh0PVN0cmluZyh0KSxvJiYodGhpcy5vcHRpb25zLmZvcm1hdDEyPyhvLmdldEhvdXJzKCklMTI/by5nZXRIb3VycygpJTEyOjEyKT09PXQmJihlLnNlbGVjdGVkPSEwKTpvLmdldEhvdXJzKCk9PT10JiYoZS5zZWxlY3RlZD0hMCkpLGkuYXBwZW5kQ2hpbGQoZSl9ZS5hcHBlbmRDaGlsZChpKTtjb25zdCBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7YS5jbGFzc05hbWU9XCJ0aW1lLXBsdWdpbi1jdXN0b20taW5wdXQgdW5pdFwiLGEubmFtZT1gJHt0fVttbV1gO2ZvcihsZXQgdD0wO3Q8NjA7dCs9dGhpcy5vcHRpb25zLnN0ZXBNaW51dGVzKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT1gMCR7U3RyaW5nKHQpfWAuc2xpY2UoLTIpLGUudGV4dD1gMCR7U3RyaW5nKHQpfWAuc2xpY2UoLTIpLG8mJm8uZ2V0TWludXRlcygpPT09dCYmKGUuc2VsZWN0ZWQ9ITApLGEuYXBwZW5kQ2hpbGQoZSl9aWYoZS5hcHBlbmRDaGlsZChhKSx0aGlzLm9wdGlvbnMuc2Vjb25kcyl7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2kuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY3VzdG9tLWlucHV0IHVuaXRcIixpLm5hbWU9YCR7dH1bc3NdYDtjb25zdCBuPTYwO2ZvcihsZXQgdD0wO3Q8bjt0Kz10aGlzLm9wdGlvbnMuc3RlcFNlY29uZHMpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTtlLnZhbHVlPWAwJHtTdHJpbmcodCl9YC5zbGljZSgtMiksZS50ZXh0PWAwJHtTdHJpbmcodCl9YC5zbGljZSgtMiksbyYmby5nZXRTZWNvbmRzKCk9PT10JiYoZS5zZWxlY3RlZD0hMCksaS5hcHBlbmRDaGlsZChlKX1lLmFwcGVuZENoaWxkKGkpfWlmKHRoaXMub3B0aW9ucy5mb3JtYXQxMil7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2kuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY3VzdG9tLWlucHV0IHVuaXRcIixpLm5hbWU9YCR7dH1bcGVyaW9kXWAsW1wiQU1cIixcIlBNXCJdLmZvckVhY2goKHQ9Pntjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT10LGUudGV4dD10LG8mJlwiUE1cIj09PXQmJm8uZ2V0SG91cnMoKT49MTImJihlLnNlbGVjdGVkPSEwKSxpLmFwcGVuZENoaWxkKGUpfSkpLGUuYXBwZW5kQ2hpbGQoaSl9cmV0dXJuIGV9aGFuZGxlRm9ybWF0MTIodCxlLGkpe2NvbnN0IG49ZS5jbG9uZSgpO3N3aXRjaCh0KXtjYXNlXCJBTVwiOjEyPT09aT9uLnNldEhvdXJzKDAsbi5nZXRNaW51dGVzKCksbi5nZXRTZWNvbmRzKCksMCk6bi5zZXRIb3VycyhpLG4uZ2V0TWludXRlcygpLG4uZ2V0U2Vjb25kcygpLDApO2JyZWFrO2Nhc2VcIlBNXCI6MTIhPT1pP24uc2V0SG91cnMoaSsxMixuLmdldE1pbnV0ZXMoKSxuLmdldFNlY29uZHMoKSwwKTpuLnNldEhvdXJzKGksbi5nZXRNaW51dGVzKCksbi5nZXRTZWNvbmRzKCksMCl9cmV0dXJuIG59cGFyc2VWYWx1ZXMoKXtpZih0aGlzLnJhbmdlUGx1Z2luKXtpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RyaWN0KXtpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RhcnREYXRlJiZ0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZW5kRGF0ZSl7Y29uc3QgZT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RhcnREYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KSxpPW5ldyB0KHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbmREYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLnRpbWVQaWNrZWQuc3RhcnQ9ZS5jbG9uZSgpLHRoaXMudGltZVBpY2tlZC5lbmQ9aS5jbG9uZSgpfX1lbHNle2lmKHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5zdGFydERhdGUpe2NvbnN0IGU9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0YXJ0RGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKX1pZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZW5kRGF0ZSl7Y29uc3QgZT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZW5kRGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLmVuZD1lLmNsb25lKCl9fWlmKHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbGVtZW50RW5kKWlmKHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5zdHJpY3Qpe2lmKHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZS5sZW5ndGgmJnRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbGVtZW50RW5kIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVsZW1lbnRFbmQudmFsdWUubGVuZ3RoKXtjb25zdCBlPW5ldyB0KHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCksaT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKSx0aGlzLnRpbWVQaWNrZWQuZW5kPWkuY2xvbmUoKX19ZWxzZXtpZih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoKXtjb25zdCBlPW5ldyB0KHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKX1pZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlLmxlbmd0aCl7Y29uc3QgZT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKX19ZWxzZSBpZih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoKXtjb25zdFtlLGldPXRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZS5zcGxpdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZGVsaW1pdGVyKTtpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RyaWN0KXtpZihlJiZpKXtjb25zdCBuPW5ldyB0KGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpLHM9bmV3IHQoaSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PW4uY2xvbmUoKSx0aGlzLnRpbWVQaWNrZWQuZW5kPXMuY2xvbmUoKX19ZWxzZXtpZihlKXtjb25zdCBpPW5ldyB0KGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1pLmNsb25lKCl9aWYoaSl7Y29uc3QgZT1uZXcgdChpLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLnRpbWVQaWNrZWQuc3RhcnQ9ZS5jbG9uZSgpfX19fWVsc2V7aWYodGhpcy5waWNrZXIub3B0aW9ucy5kYXRlKXtjb25zdCBlPW5ldyB0KHRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLmlucHV0PWUuY2xvbmUoKX1pZih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoKXtjb25zdCBlPW5ldyB0KHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLmlucHV0PWUuY2xvbmUoKX19fX1jbGFzcyBoIGV4dGVuZHMgb3tkb2NFbGVtZW50PW51bGw7cmFuZ2VQbHVnaW47YmluZHM9e29uVmlldzp0aGlzLm9uVmlldy5iaW5kKHRoaXMpLG9uS2V5ZG93bjp0aGlzLm9uS2V5ZG93bi5iaW5kKHRoaXMpfTtvcHRpb25zPXt1bml0SW5kZXg6MSxkYXlJbmRleDoyfTtnZXROYW1lKCl7cmV0dXJuXCJLYmRQbHVnaW5cIn1vbkF0dGFjaCgpe2NvbnN0IHQ9dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtpZih0aGlzLmRvY0VsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy5kb2NFbGVtZW50LnN0eWxlLnBvc2l0aW9uPVwiYWJzb2x1dGVcIix0aGlzLmRvY0VsZW1lbnQuc3R5bGUudG9wPWAke3Qub2Zmc2V0VG9wfXB4YCx0aGlzLmRvY0VsZW1lbnQuc3R5bGUubGVmdD10Lm9mZnNldExlZnQrZS53aWR0aC0yNStcInB4XCIsdGhpcy5kb2NFbGVtZW50LmF0dGFjaFNoYWRvdyh7bW9kZTpcIm9wZW5cIn0pLHRoaXMub3B0aW9ucy5odG1sKXRoaXMuZG9jRWxlbWVudC5zaGFkb3dSb290LmlubmVySFRNTD10aGlzLm9wdGlvbnMuaHRtbDtlbHNle2NvbnN0IHQ9YFxcbiAgICAgIDxzdHlsZT5cXG4gICAgICBidXR0b24ge1xcbiAgICAgICAgYm9yZGVyOiBub25lO1xcbiAgICAgICAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XFxuICAgICAgICBmb250LXNpemU6ICR7d2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50KS5mb250U2l6ZX07XFxuICAgICAgfVxcbiAgICAgIDwvc3R5bGU+XFxuXFxuICAgICAgPGJ1dHRvbj4mIzEyODE5Nzs8L2J1dHRvbj5cXG4gICAgICBgO3RoaXMuZG9jRWxlbWVudC5zaGFkb3dSb290LmlubmVySFRNTD10fWNvbnN0IGk9dGhpcy5kb2NFbGVtZW50LnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtpJiYoaS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwodD0+e3QucHJldmVudERlZmF1bHQoKSx0aGlzLnBpY2tlci5zaG93KHt0YXJnZXQ6dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50fSl9KSx7Y2FwdHVyZTohMH0pLGkuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwodD0+e1wiRXNjYXBlXCI9PT10LmNvZGUmJnRoaXMucGlja2VyLmhpZGUoKX0pLHtjYXB0dXJlOiEwfSkpLHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC5hZnRlcih0aGlzLmRvY0VsZW1lbnQpLHRoaXMucGlja2VyLm9uKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vbihcImtleWRvd25cIix0aGlzLmJpbmRzLm9uS2V5ZG93bil9b25EZXRhY2goKXt0aGlzLmRvY0VsZW1lbnQmJnRoaXMuZG9jRWxlbWVudC5pc0Nvbm5lY3RlZCYmdGhpcy5kb2NFbGVtZW50LnJlbW92ZSgpLHRoaXMucGlja2VyLm9mZihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyksdGhpcy5waWNrZXIub2ZmKFwia2V5ZG93blwiLHRoaXMuYmluZHMub25LZXlkb3duKX1vblZpZXcodCl7Y29uc3R7dmlldzplLHRhcmdldDppfT10LmRldGFpbDtpJiZcInF1ZXJ5U2VsZWN0b3JcImluIGkmJihcIkNhbGVuZGFyRGF5XCIhPT1lfHxbXCJsb2NrZWRcIixcIm5vdC1hdmFpbGFibGVcIl0uc29tZSgodD0+aS5jbGFzc0xpc3QuY29udGFpbnModCkpKT9bLi4uaS5xdWVyeVNlbGVjdG9yQWxsKFwiLnVuaXQ6bm90KC5kYXkpXCIpXS5mb3JFYWNoKCh0PT50LnRhYkluZGV4PXRoaXMub3B0aW9ucy51bml0SW5kZXgpKTppLnRhYkluZGV4PXRoaXMub3B0aW9ucy5kYXlJbmRleCl9b25LZXlkb3duKHQpe3N3aXRjaCh0aGlzLm9uTW91c2VFbnRlcih0KSx0LmNvZGUpe2Nhc2VcIkFycm93VXBcIjpjYXNlXCJBcnJvd0Rvd25cIjp0aGlzLnZlcnRpY2FsTW92ZSh0KTticmVhaztjYXNlXCJBcnJvd0xlZnRcIjpjYXNlXCJBcnJvd1JpZ2h0XCI6dGhpcy5ob3Jpem9udGFsTW92ZSh0KTticmVhaztjYXNlXCJFbnRlclwiOmNhc2VcIlNwYWNlXCI6dGhpcy5oYW5kbGVFbnRlcih0KTticmVhaztjYXNlXCJFc2NhcGVcIjp0aGlzLnBpY2tlci5oaWRlKCl9fWZpbmRBbGxvd2FibGVEYXlTaWJsaW5nKHQsZSxpKXtjb25zdCBuPUFycmF5LmZyb20odC5xdWVyeVNlbGVjdG9yQWxsKGAuZGF5W3RhYmluZGV4PVwiJHt0aGlzLm9wdGlvbnMuZGF5SW5kZXh9XCJdYCkpLHM9bi5pbmRleE9mKGUpO3JldHVybiBuLmZpbHRlcigoKHQsZSk9PmkoZSxzKSYmdC50YWJJbmRleD09PXRoaXMub3B0aW9ucy5kYXlJbmRleCkpWzBdfWNoYW5nZU1vbnRoKHQpe2NvbnN0IGU9e0Fycm93TGVmdDpcInByZXZpb3VzXCIsQXJyb3dSaWdodDpcIm5leHRcIn0saT10aGlzLnBpY2tlci51aS5jb250YWluZXIucXVlcnlTZWxlY3RvcihgLiR7ZVt0LmNvZGVdfS1idXR0b25bdGFiaW5kZXg9XCIke3RoaXMub3B0aW9ucy51bml0SW5kZXh9XCJdYCk7aSYmIWkucGFyZW50RWxlbWVudC5jbGFzc0xpc3QuY29udGFpbnMoYG5vLSR7ZVt0LmNvZGVdfS1tb250aGApJiYoaS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITB9KSksc2V0VGltZW91dCgoKCk9PntsZXQgZT1udWxsO3N3aXRjaCh0LmNvZGUpe2Nhc2VcIkFycm93TGVmdFwiOmNvbnN0IHQ9dGhpcy5waWNrZXIudWkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoYC5kYXlbdGFiaW5kZXg9XCIke3RoaXMub3B0aW9ucy5kYXlJbmRleH1cIl1gKTtlPXRbdC5sZW5ndGgtMV07YnJlYWs7Y2FzZVwiQXJyb3dSaWdodFwiOmU9dGhpcy5waWNrZXIudWkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC5kYXlbdGFiaW5kZXg9XCIke3RoaXMub3B0aW9ucy5kYXlJbmRleH1cIl1gKX1lJiZlLmZvY3VzKCl9KSkpfXZlcnRpY2FsTW92ZSh0KXtjb25zdCBlPXQudGFyZ2V0O2lmKGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGF5XCIpKXt0LnByZXZlbnREZWZhdWx0KCk7Y29uc3QgaT10aGlzLmZpbmRBbGxvd2FibGVEYXlTaWJsaW5nKHRoaXMucGlja2VyLnVpLmNvbnRhaW5lcixlLCgoZSxpKT0+ZT09PShcIkFycm93VXBcIj09PXQuY29kZT9pLTc6aSs3KSkpO2kmJmkuZm9jdXMoKX19aG9yaXpvbnRhbE1vdmUodCl7Y29uc3QgZT10LnRhcmdldDtpZihlLmNsYXNzTGlzdC5jb250YWlucyhcImRheVwiKSl7dC5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IGk9dGhpcy5maW5kQWxsb3dhYmxlRGF5U2libGluZyh0aGlzLnBpY2tlci51aS5jb250YWluZXIsZSwoKGUsaSk9PmU9PT0oXCJBcnJvd0xlZnRcIj09PXQuY29kZT9pLTE6aSsxKSkpO2k/aS5mb2N1cygpOnRoaXMuY2hhbmdlTW9udGgodCl9fWhhbmRsZUVudGVyKHQpe2NvbnN0IGU9dC50YXJnZXQ7ZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkYXlcIikmJih0LnByZXZlbnREZWZhdWx0KCksZS5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcImNsaWNrXCIse2J1YmJsZXM6ITB9KSksc2V0VGltZW91dCgoKCk9PntpZih0aGlzLnJhbmdlUGx1Z2luPXRoaXMucGlja2VyLlBsdWdpbk1hbmFnZXIuZ2V0SW5zdGFuY2UoXCJSYW5nZVBsdWdpblwiKSx0aGlzLnJhbmdlUGx1Z2lufHwhdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHkpe2NvbnN0IHQ9dGhpcy5waWNrZXIudWkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuZGF5LnNlbGVjdGVkXCIpO3QmJnNldFRpbWVvdXQoKCgpPT57dC5mb2N1cygpfSkpfX0pKSl9b25Nb3VzZUVudGVyKHQpe3QudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcImRheVwiKSYmc2V0VGltZW91dCgoKCk9Pntjb25zdCB0PXRoaXMucGlja2VyLnVpLnNoYWRvd1Jvb3QuYWN0aXZlRWxlbWVudDt0JiZ0LmRpc3BhdGNoRXZlbnQobmV3IEV2ZW50KFwibW91c2VlbnRlclwiLHtidWJibGVzOiEwfSkpfSkpfX1jbGFzcyBkIGV4dGVuZHMgb3tyYW5nZVBsdWdpbjtsb2NrUGx1Z2luO3ByaW9yaXR5PTEwO2JpbmRzPXtvblZpZXc6dGhpcy5vblZpZXcuYmluZCh0aGlzKSxvbkNvbG9yU2NoZW1lOnRoaXMub25Db2xvclNjaGVtZS5iaW5kKHRoaXMpfTtvcHRpb25zPXtkcm9wZG93bjp7bW9udGhzOiExLHllYXJzOiExLG1pblllYXI6MTk1MCxtYXhZZWFyOm51bGx9LGRhcmtNb2RlOiEwLGxvY2FsZTp7cmVzZXRCdXR0b246JzxzdmcgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiIGhlaWdodD1cIjI0XCIgd2lkdGg9XCIyNFwiPjxwYXRoIGQ9XCJNMTMgM2MtNC45NyAwLTkgNC4wMy05IDlIMWwzLjg5IDMuODkuMDcuMTRMOSAxMkg2YzAtMy44NyAzLjEzLTcgNy03czcgMy4xMyA3IDctMy4xMyA3LTcgN2MtMS45MyAwLTMuNjgtLjc5LTQuOTQtMi4wNmwtMS40MiAxLjQyQzguMjcgMTkuOTkgMTAuNTEgMjEgMTMgMjFjNC45NyAwIDktNC4wMyA5LTlzLTQuMDMtOS05LTl6bS0xIDV2NWw0LjI4IDIuNTQuNzItMS4yMS0zLjUtMi4wOFY4SDEyelwiLz48L3N2Zz4nfX07bWF0Y2hNZWRpYTtnZXROYW1lKCl7cmV0dXJuXCJBbXBQbHVnaW5cIn1vbkF0dGFjaCgpe3RoaXMub3B0aW9ucy5kYXJrTW9kZSYmd2luZG93JiZcIm1hdGNoTWVkaWFcImluIHdpbmRvdyYmKHRoaXMubWF0Y2hNZWRpYT13aW5kb3cubWF0Y2hNZWRpYShcIihwcmVmZXJzLWNvbG9yLXNjaGVtZTogZGFyaylcIiksdGhpcy5tYXRjaE1lZGlhLm1hdGNoZXMmJih0aGlzLnBpY2tlci51aS5jb250YWluZXIuZGF0YXNldC50aGVtZT1cImRhcmtcIiksdGhpcy5tYXRjaE1lZGlhLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLmJpbmRzLm9uQ29sb3JTY2hlbWUpKSx0aGlzLm9wdGlvbnMud2Vla051bWJlcnMmJnRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwid2Vlay1udW1iZXJzXCIpLHRoaXMucGlja2VyLm9uKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KX1vbkRldGFjaCgpe3RoaXMub3B0aW9ucy5kYXJrTW9kZSYmd2luZG93JiZcIm1hdGNoTWVkaWFcImluIHdpbmRvdyYmdGhpcy5tYXRjaE1lZGlhLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIix0aGlzLmJpbmRzLm9uQ29sb3JTY2hlbWUpLHRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5yZW1vdmVBdHRyaWJ1dGUoXCJkYXRhLXRoZW1lXCIpLHRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwid2Vlay1udW1iZXJzXCIpLHRoaXMucGlja2VyLm9mZihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyl9b25WaWV3KHQpe3RoaXMubG9ja1BsdWdpbj10aGlzLnBpY2tlci5QbHVnaW5NYW5hZ2VyLmdldEluc3RhbmNlKFwiTG9ja1BsdWdpblwiKSx0aGlzLnJhbmdlUGx1Z2luPXRoaXMucGlja2VyLlBsdWdpbk1hbmFnZXIuZ2V0SW5zdGFuY2UoXCJSYW5nZVBsdWdpblwiKSx0aGlzLmhhbmRsZURyb3Bkb3duKHQpLHRoaXMuaGFuZGxlUmVzZXRCdXR0b24odCksdGhpcy5oYW5kbGVXZWVrTnVtYmVycyh0KX1vbkNvbG9yU2NoZW1lKHQpe2NvbnN0IGU9dC5tYXRjaGVzP1wiZGFya1wiOlwibGlnaHRcIjt0aGlzLnBpY2tlci51aS5jb250YWluZXIuZGF0YXNldC50aGVtZT1lfWhhbmRsZURyb3Bkb3duKGUpe2NvbnN0e3ZpZXc6aSx0YXJnZXQ6bixkYXRlOnMsaW5kZXg6b309ZS5kZXRhaWw7aWYoXCJDYWxlbmRhckhlYWRlclwiPT09aSl7Y29uc3QgZT1uLnF1ZXJ5U2VsZWN0b3IoXCIubW9udGgtbmFtZVwiKTtpZih0aGlzLm9wdGlvbnMuZHJvcGRvd24ubW9udGhzKXtlLmNoaWxkTm9kZXNbMF0ucmVtb3ZlKCk7Y29uc3QgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2kuY2xhc3NOYW1lPVwibW9udGgtbmFtZS0tc2VsZWN0IG1vbnRoLW5hbWUtLWRyb3Bkb3duXCI7Zm9yKGxldCBlPTA7ZTwxMjtlKz0xKXtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiksbz1uZXcgdChuZXcgRGF0ZShzLmdldEZ1bGxZZWFyKCksZSwyLDAsMCwwKSksYT1uZXcgdChuZXcgRGF0ZShzLmdldEZ1bGxZZWFyKCksZSwxLDAsMCwwKSk7bi52YWx1ZT1TdHJpbmcoZSksbi50ZXh0PW8udG9Mb2NhbGVTdHJpbmcodGhpcy5waWNrZXIub3B0aW9ucy5sYW5nLHttb250aDpcImxvbmdcIn0pLHRoaXMubG9ja1BsdWdpbiYmKG4uZGlzYWJsZWQ9dGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWluRGF0ZSYmYS5pc0JlZm9yZShuZXcgdCh0aGlzLmxvY2tQbHVnaW4ub3B0aW9ucy5taW5EYXRlKSxcIm1vbnRoXCIpfHx0aGlzLmxvY2tQbHVnaW4ub3B0aW9ucy5tYXhEYXRlJiZhLmlzQWZ0ZXIobmV3IHQodGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWF4RGF0ZSksXCJtb250aFwiKSksbi5zZWxlY3RlZD1hLmdldE1vbnRoKCk9PT1zLmdldE1vbnRoKCksaS5hcHBlbmRDaGlsZChuKX1pLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwodD0+e2NvbnN0IGU9dC50YXJnZXQ7dGhpcy5waWNrZXIuY2FsZW5kYXJzWzBdLnNldERhdGUoMSksdGhpcy5waWNrZXIuY2FsZW5kYXJzWzBdLnNldE1vbnRoKE51bWJlcihlLnZhbHVlKSksdGhpcy5waWNrZXIucmVuZGVyQWxsKCl9KSksZS5wcmVwZW5kKGkpfWlmKHRoaXMub3B0aW9ucy5kcm9wZG93bi55ZWFycyl7ZS5jaGlsZE5vZGVzWzFdLnJlbW92ZSgpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpLmNsYXNzTmFtZT1cIm1vbnRoLW5hbWUtLXNlbGVjdFwiO2NvbnN0IG49dGhpcy5vcHRpb25zLmRyb3Bkb3duLm1pblllYXIsbz10aGlzLm9wdGlvbnMuZHJvcGRvd24ubWF4WWVhcj90aGlzLm9wdGlvbnMuZHJvcGRvd24ubWF4WWVhcjoobmV3IERhdGUpLmdldEZ1bGxZZWFyKCk7aWYocy5nZXRGdWxsWWVhcigpPm8pe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTt0LnZhbHVlPVN0cmluZyhzLmdldEZ1bGxZZWFyKCkpLHQudGV4dD1TdHJpbmcocy5nZXRGdWxsWWVhcigpKSx0LnNlbGVjdGVkPSEwLHQuZGlzYWJsZWQ9ITAsaS5hcHBlbmRDaGlsZCh0KX1mb3IobGV0IGU9bztlPj1uO2UtPTEpe2NvbnN0IG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSxvPW5ldyB0KG5ldyBEYXRlKGUsMCwxLDAsMCwwKSk7bi52YWx1ZT1TdHJpbmcoZSksbi50ZXh0PVN0cmluZyhlKSx0aGlzLmxvY2tQbHVnaW4mJihuLmRpc2FibGVkPXRoaXMubG9ja1BsdWdpbi5vcHRpb25zLm1pbkRhdGUmJm8uaXNCZWZvcmUobmV3IHQodGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWluRGF0ZSksXCJ5ZWFyXCIpfHx0aGlzLmxvY2tQbHVnaW4ub3B0aW9ucy5tYXhEYXRlJiZvLmlzQWZ0ZXIobmV3IHQodGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWF4RGF0ZSksXCJ5ZWFyXCIpKSxuLnNlbGVjdGVkPXMuZ2V0RnVsbFllYXIoKT09PWUsaS5hcHBlbmRDaGlsZChuKX1pZihzLmdldEZ1bGxZZWFyKCk8bil7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO3QudmFsdWU9U3RyaW5nKHMuZ2V0RnVsbFllYXIoKSksdC50ZXh0PVN0cmluZyhzLmdldEZ1bGxZZWFyKCkpLHQuc2VsZWN0ZWQ9ITAsdC5kaXNhYmxlZD0hMCxpLmFwcGVuZENoaWxkKHQpfWlmKFwiYXNjXCI9PT10aGlzLm9wdGlvbnMuZHJvcGRvd24ueWVhcnMpe2NvbnN0IHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoaS5jaGlsZE5vZGVzKS5yZXZlcnNlKCk7aS5pbm5lckhUTUw9XCJcIix0LmZvckVhY2goKHQ9Pnt0LmlubmVySFRNTD10LnZhbHVlLGkuYXBwZW5kQ2hpbGQodCl9KSl9aS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsKHQ9Pntjb25zdCBlPXQudGFyZ2V0O3RoaXMucGlja2VyLmNhbGVuZGFyc1swXS5zZXRGdWxsWWVhcihOdW1iZXIoZS52YWx1ZSkpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpfSkpLGUuYXBwZW5kQ2hpbGQoaSl9fX1oYW5kbGVSZXNldEJ1dHRvbih0KXtjb25zdHt2aWV3OmUsdGFyZ2V0Oml9PXQuZGV0YWlsO2lmKFwiQ2FsZW5kYXJIZWFkZXJcIj09PWUmJnRoaXMub3B0aW9ucy5yZXNldEJ1dHRvbil7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO3QuY2xhc3NOYW1lPVwicmVzZXQtYnV0dG9uIHVuaXRcIix0LmlubmVySFRNTD10aGlzLm9wdGlvbnMubG9jYWxlLnJlc2V0QnV0dG9uLHQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKHQ9Pnt0LnByZXZlbnREZWZhdWx0KCk7bGV0IGU9ITA7XCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnJlc2V0QnV0dG9uJiYoZT10aGlzLm9wdGlvbnMucmVzZXRCdXR0b24uY2FsbCh0aGlzKSksZSYmdGhpcy5waWNrZXIuY2xlYXIoKX0pKSxpLmFwcGVuZENoaWxkKHQpfX1oYW5kbGVXZWVrTnVtYmVycyhlKXtpZih0aGlzLm9wdGlvbnMud2Vla051bWJlcnMpe2NvbnN0e3ZpZXc6aSx0YXJnZXQ6bn09ZS5kZXRhaWw7aWYoXCJDYWxlbmRhckRheU5hbWVzXCI9PT1pKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJ3bnVtLWhlYWRlclwiLHQuaW5uZXJIVE1MPVwiV2tcIixuLnByZXBlbmQodCl9XCJDYWxlbmRhckRheXNcIj09PWkmJlsuLi5uLmNoaWxkcmVuXS5mb3JFYWNoKCgoZSxpKT0+e2lmKDA9PT1pfHxpJTc9PTApe2xldCBpO2lmKGUuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGF5XCIpKWk9bmV3IHQoZS5kYXRhc2V0LnRpbWUpO2Vsc2V7Y29uc3QgZT1uLnF1ZXJ5U2VsZWN0b3IoXCIuZGF5XCIpO2k9bmV3IHQoZS5kYXRhc2V0LnRpbWUpfWxldCBzPWkuZ2V0V2Vlayh0aGlzLnBpY2tlci5vcHRpb25zLmZpcnN0RGF5KTs1Mz09PXMmJjA9PT1pLmdldE1vbnRoKCkmJihzPVwiNTMvMVwiKTtjb25zdCBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7by5jbGFzc05hbWU9XCJ3bnVtLWl0ZW1cIixvLmlubmVySFRNTD1TdHJpbmcocyksbi5pbnNlcnRCZWZvcmUobyxlKX19KSl9fX1leHBvcnR7ZCBhcyBBbXBQbHVnaW4sdCBhcyBEYXRlVGltZSxoIGFzIEtiZFBsdWdpbixhIGFzIExvY2tQbHVnaW4sciBhcyBQcmVzZXRQbHVnaW4sYyBhcyBSYW5nZVBsdWdpbixsIGFzIFRpbWVQbHVnaW4sbiBhcyBjcmVhdGUscyBhcyBlYXNlcGlja307XG4iLCJpbXBvcnQge2Vhc2VwaWNrfSBmcm9tICdAZWFzZXBpY2svYnVuZGxlJztcblxuY29uc3QgY2hhdFdpbmRvdzogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC13aW5kb3cnKTtcbmNvbnN0IHRpbWVUeXBpbmcgPSAxNTAwO1xuXG5mdW5jdGlvbiBzY3JvbGxEb3duKGVsZW1lbnQ6IEhUTUxEaXZFbGVtZW50KSB7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIGVsZW1lbnQuc2Nyb2xsVG8oe1xuICAgICAgdG9wOiBlbGVtZW50LnNjcm9sbEhlaWdodCxcbiAgICB9KTtcbiAgICBjb25zb2xlLmxvZygnc2Nyb2xsIGRvd24nKTtcbiAgfSwgMjAwKTtcbn1cblxuZnVuY3Rpb24gdG9nZ2xlQ2hhdFdpbmRvdygpIHtcbiAgY2hhdFdpbmRvdy5jbGFzc0xpc3QudG9nZ2xlKCdjaGF0LXdpbmRvdy1jbG9zZScpO1xuICBjaGF0V2luZG93LmNsYXNzTGlzdC50b2dnbGUoJ2NoYXQtd2luZG93LW9wZW4nKTtcbn1cblxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcbiAgY29uc3QgY2hhdEljb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC1pY29uJyk7XG4gIGNvbnN0IGNoYXRNYWluOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LW1haW4nKTtcbiAgY29uc3Qgb3Blbkljb24gPSBjaGF0SWNvbi5xdWVyeVNlbGVjdG9yKCcuY2hhdC1pY29uLW9wZW4nKTtcbiAgY29uc3QgY2xvc2VJY29uID0gY2hhdEljb24ucXVlcnlTZWxlY3RvcignLmNoYXQtaWNvbi1jbG9zZScpO1xuXG4gIGNoYXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHRvZ2dsZUNoYXRXaW5kb3coKTtcbiAgICBpZiAoY2hhdFdpbmRvdy5jbGFzc0xpc3QuY29udGFpbnMoJ2NoYXQtd2luZG93LW9wZW4nKSkge1xuICAgICAgc2hvd01lc3NhZ2UoKTtcbiAgICAgIHNjcm9sbERvd24oY2hhdE1haW4pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBjaGF0TWVzc2FnZXMgPVxuICAgICAgICBjaGF0TWVzc2FnZUNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdC1tZXNzYWdlJyk7XG4gICAgICBjaGF0TWVzc2FnZXMuZm9yRWFjaChtZXNzYWdlID0+IHtcbiAgICAgICAgbWVzc2FnZS5jbGFzc0xpc3QucmVtb3ZlKCdjaGF0LW1lc3NhZ2UtYWN0aXZlJyk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG11dGF0aW9ucyA9PiB7XG4gICAgICBjb25zdCBsb2NhdGlvbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICAgICcjY2hhdC1zZWxsLWxvY2F0aW9uLWJ1dHRvbicsXG4gICAgICApO1xuICAgICAgaWYgKGxvY2F0aW9uQnV0dG9uKSB7XG4gICAgICAgIGxvY2F0aW9uQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge30pO1xuICAgICAgfVxuXG4gICAgICBtdXRhdGlvbnMuZm9yRWFjaChtdXRhdGlvbiA9PiB7XG4gICAgICAgIGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0Jykge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdBIGNoaWxkIG5vZGUgaGFzIGJlZW4gYWRkZWQgb3IgcmVtb3ZlZC4nKTtcblxuICAgICAgICAgIHNjcm9sbERvd24oY2hhdE1haW4pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIG9ic2VydmVyLm9ic2VydmUoY2hhdE1haW4sIHtjaGlsZExpc3Q6IHRydWV9KTtcbiAgfSk7XG59KTtcblxuY29uc3QgbG9jYXRpb25CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhdC1maWx0ZXItbG9jYXRpb24tYnV0dG9uJyk7XG5jb25zdCBkcm9wZG93bkZpbHRlckRhdGU6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgJyNjaGF0LWZpbHRlci1sb2NhdGlvbi1kcm9wZG93bicsXG4pO1xuY29uc3QgaW5wdXRMb2NhdGlvbjogSFRNTElucHV0RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICcjY2hhdC1maWx0ZXItbG9jYXRpb24taW5wdXQnLFxuKTtcbmNvbnN0IGRhdGFsaXN0TG9jYXRpb246IEhUTUxEYXRhTGlzdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnI2NoYXQtZmlsdGVyLWxvY2F0aW9uLWxpc3QnLFxuKSBhcyBIVE1MRGF0YUxpc3RFbGVtZW50O1xuY29uc3Qgc3RhdHVzRmlsdGVyTG9jYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAnI2NoYXQtZmlsdGVyLWxvY2F0aW9uLXN0YXR1cycsXG4pO1xuXG5jb25zdCBkYXRlcGlja2VyRmlsdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGVwaWNrZXItZmlsdGVyJyk7XG5pZiAoZGF0ZXBpY2tlckZpbHRlcikge1xuICBjb25zdCBjaGF0Qm9keTogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhdC1ib2R5Jyk7XG4gIGNvbnN0IHBpY2tlciA9IG5ldyBlYXNlcGljay5jcmVhdGUoe1xuICAgIGVsZW1lbnQ6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkYXRlcGlja2VyLWZpbHRlcicpLFxuICAgIGNzczogWydodHRwczovL2Nkbi5qc2RlbGl2ci5uZXQvbnBtL0BlYXNlcGljay9idW5kbGVAMS4yLjEvZGlzdC9pbmRleC5jc3MnXSxcbiAgICBmb3JtYXQ6ICdNTS9ERC9ZWVlZJyxcbiAgfSk7XG4gIGRhdGVwaWNrZXJGaWx0ZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgc2Nyb2xsRG93bihjaGF0Qm9keSk7XG4gIH0pO1xufVxuXG5pZiAobG9jYXRpb25CdXR0b24pIHtcbiAgbG9jYXRpb25CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgY29uc3QgY2hhdEJvZHk6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXQtYm9keScpO1xuICAgIGRyb3Bkb3duRmlsdGVyRGF0ZS5jbGFzc0xpc3QudG9nZ2xlKCdjaGF0LWxvY2F0aW9uLWRyb3Bkb3duLWFjdGl2ZScpO1xuICAgIGlucHV0TG9jYXRpb24uZm9jdXMoKTtcbiAgICBzY3JvbGxEb3duKGNoYXRCb2R5KTtcbiAgfSk7XG59XG5cbmlmIChpbnB1dExvY2F0aW9uKSB7XG4gIGlucHV0TG9jYXRpb24ub25mb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICBkYXRhbGlzdExvY2F0aW9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgIGlucHV0TG9jYXRpb24uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzVweCA1cHggMCAwJztcbiAgfTtcbiAgZm9yIChsZXQgaW5kZXggaW4gZGF0YWxpc3RMb2NhdGlvbi5vcHRpb25zKSB7XG4gICAgY29uc3Qgb3B0aW9uOiBIVE1MT3B0aW9uRWxlbWVudCA9IGRhdGFsaXN0TG9jYXRpb24ub3B0aW9uc1tpbmRleF07XG4gICAgaWYgKHR5cGVvZiBvcHRpb24gIT09ICdudW1iZXInKSB7XG4gICAgICBvcHRpb24ub25jbGljayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW5wdXRMb2NhdGlvbi52YWx1ZSA9IG9wdGlvbi52YWx1ZTtcbiAgICAgICAgc3RhdHVzRmlsdGVyTG9jYXRpb24uaW5uZXJIVE1MID0gb3B0aW9uLnZhbHVlO1xuICAgICAgICBkcm9wZG93bkZpbHRlckRhdGUuY2xhc3NMaXN0LnJlbW92ZSgnY2hhdC1sb2NhdGlvbi1kcm9wZG93bi1hY3RpdmUnKTtcbiAgICAgICAgZGF0YWxpc3RMb2NhdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICBpbnB1dExvY2F0aW9uLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc1cHgnO1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBpbnB1dExvY2F0aW9uLm9uaW5wdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgY3VycmVudEZvY3VzID0gLTE7XG4gICAgY29uc3QgdGV4dCA9IGlucHV0TG9jYXRpb24udmFsdWUudG9VcHBlckNhc2UoKTtcbiAgICBmb3IgKGxldCBpbmRleCBpbiBkYXRhbGlzdExvY2F0aW9uLm9wdGlvbnMpIHtcbiAgICAgIGNvbnN0IG9wdGlvbjogSFRNTE9wdGlvbkVsZW1lbnQgPSBkYXRhbGlzdExvY2F0aW9uLm9wdGlvbnNbaW5kZXhdO1xuICAgICAgb3B0aW9uLnZhbHVlLnRvVXBwZXJDYXNlKCkuaW5kZXhPZih0ZXh0KSA+IC0xXG4gICAgICAgID8gKG9wdGlvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJylcbiAgICAgICAgOiAob3B0aW9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZScpO1xuICAgIH1cbiAgfTtcblxuICBsZXQgY3VycmVudEZvY3VzID0gLTE7XG4gIGlucHV0TG9jYXRpb24ub25rZXlkb3duID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09IDQwKSB7XG4gICAgICBjdXJyZW50Rm9jdXMrKztcbiAgICAgIGFkZEFjdGl2ZShkYXRhbGlzdExvY2F0aW9uLm9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDM4KSB7XG4gICAgICBjdXJyZW50Rm9jdXMtLTtcbiAgICAgIGFkZEFjdGl2ZShkYXRhbGlzdExvY2F0aW9uLm9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICBpZiAoY3VycmVudEZvY3VzID4gLTEpIHtcbiAgICAgICAgaWYgKGRhdGFsaXN0TG9jYXRpb24ub3B0aW9ucykge1xuICAgICAgICAgIGRhdGFsaXN0TG9jYXRpb24ub3B0aW9uc1tjdXJyZW50Rm9jdXNdLmNsaWNrKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgY29uc3QgYWRkQWN0aXZlID0gKHg6IEhUTUxDb2xsZWN0aW9uT2Y8SFRNTE9wdGlvbkVsZW1lbnQ+KSA9PiB7XG4gICAgaWYgKCF4KSByZXR1cm47XG5cbiAgICBmYWxzZTtcbiAgICByZW1vdmVBY3RpdmUoeCk7XG4gICAgaWYgKGN1cnJlbnRGb2N1cyA+PSB4Lmxlbmd0aCkgY3VycmVudEZvY3VzID0gMDtcbiAgICBpZiAoY3VycmVudEZvY3VzIDwgMCkgY3VycmVudEZvY3VzID0geC5sZW5ndGggLSAxO1xuICAgIHhbY3VycmVudEZvY3VzXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgfTtcblxuICBjb25zdCByZW1vdmVBY3RpdmUgPSAoeDogSFRNTENvbGxlY3Rpb25PZjxIVE1MT3B0aW9uRWxlbWVudD4pID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHgubGVuZ3RoOyBpKyspIHtcbiAgICAgIHhbaV0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgfVxuICB9O1xufVxuXG5jb25zdCBjaGF0Q2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNoYXQtY2xvc2UtYnV0dG9uJyk7XG5pZiAoY2hhdENsb3NlQnV0dG9ucykge1xuICBjaGF0Q2xvc2VCdXR0b25zLmZvckVhY2goYnV0dG9uID0+IHtcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0b2dnbGVDaGF0V2luZG93KCk7XG4gICAgfSk7XG4gIH0pO1xufVxuXG5jb25zdCBjYXRlZ29yeURyb3Bkb3ducyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kcm9wZG93bicpO1xuXG5pZiAoY2F0ZWdvcnlEcm9wZG93bnMpIHtcbiAgY29uc3QgY2hhdEJvZHk6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXQtYm9keScpO1xuICBjYXRlZ29yeURyb3Bkb3ducy5mb3JFYWNoKGRyb3Bkb3duID0+IHtcbiAgICBjb25zdCBkcm9wZG93bkJ1dHRvbiA9IGRyb3Bkb3duLnF1ZXJ5U2VsZWN0b3IoJy5kcm9wZG93bi1idXR0b24nKTtcbiAgICBjb25zdCBkcm9wZG93bk1lbnUgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbGlzdCcpO1xuICAgIGNvbnN0IGRyb3Bkb3duQXJyb3cgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tYXJyb3cnKTtcbiAgICBjb25zdCBjYXRlZ29yeUJ1dHRvbnMgPSBkcm9wZG93bi5xdWVyeVNlbGVjdG9yQWxsKCcuY2hhdC1jYXRlZ29yeS1idXR0b24nKTtcbiAgICBjb25zdCBldmVudENhdGVnb3J5SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgJyNldmVudC1jYXRlZ29yeS1pbnB1dCcsXG4gICAgKTtcbiAgICBjb25zdCBkcm9wZG93blRpdGxlID0gZHJvcGRvd24ucXVlcnlTZWxlY3RvcignLmNoYXQtY2F0ZWdvcnktdGl0bGUnKTtcbiAgICBpZiAoZHJvcGRvd25CdXR0b24pIHtcbiAgICAgIGRyb3Bkb3duQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgICAgIHNjcm9sbERvd24oY2hhdEJvZHkpO1xuICAgICAgICBjb25zdCBjdXJyZW50RHJvcGRvd24gPSAoZS50YXJnZXQgYXMgRWxlbWVudCkuY2xvc2VzdCgnLmRyb3Bkb3duJyk7XG5cbiAgICAgICAgZHJvcGRvd25NZW51LmNsYXNzTGlzdC50b2dnbGUoJ2Ryb3Bkb3duLWxpc3QtYWN0aXZlJyk7XG4gICAgICAgIGRyb3Bkb3duQXJyb3cuY2xhc3NMaXN0LnRvZ2dsZSgncm90YXRlLTE4MCcpO1xuICAgICAgICBjYXRlZ29yeUJ1dHRvbnMuZm9yRWFjaChidXR0b24gPT4ge1xuICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDYXRlZ29yeSA9IGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2F0ZWdvcnknKTtcbiAgICAgICAgICAgIGV2ZW50Q2F0ZWdvcnlJbnB1dC52YWx1ZSA9IGN1cnJlbnRDYXRlZ29yeTtcbiAgICAgICAgICAgIGRyb3Bkb3duVGl0bGUuaW5uZXJIVE1MID0gY3VycmVudENhdGVnb3J5O1xuICAgICAgICAgICAgZHJvcGRvd25NZW51LmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3Bkb3duLWxpc3QtYWN0aXZlJyk7XG4gICAgICAgICAgICBkcm9wZG93bkFycm93LmNsYXNzTGlzdC5yZW1vdmUoJ3JvdGF0ZS0xODAnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY2F0ZWdvcnlEcm9wZG93bnMuZm9yRWFjaChkcm9wZG93biA9PiB7XG4gICAgICAgICAgaWYgKGRyb3Bkb3duICE9PSBjdXJyZW50RHJvcGRvd24pIHtcbiAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd24tbGlzdCcpXG4gICAgICAgICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wZG93bi1saXN0LWFjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBldmVudCA9PiB7XG4gICAgICAgICAgaWYgKCFkcm9wZG93bi5jb250YWlucyhldmVudC50YXJnZXQgYXMgTm9kZSkpIHtcbiAgICAgICAgICAgIGRyb3Bkb3duTWVudS5jbGFzc0xpc3QucmVtb3ZlKCdkcm9wZG93bi1saXN0LWFjdGl2ZScpO1xuICAgICAgICAgICAgZHJvcGRvd25BcnJvdy5jbGFzc0xpc3QucmVtb3ZlKCdyb3RhdGUtMTgwJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59XG5cbmNvbnN0IGNoYXRNZXNzYWdlQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXQtbWVzc2FnZS1jb250YWluZXInKTtcbmNvbnN0IHNlbmRNZXNzYWdlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NoYXQtc2VuZC1tZXNzYWdlLWJ1dHRvbicpO1xuXG5pZiAoY2hhdE1lc3NhZ2VDb250YWluZXIuaGFzQXR0cmlidXRlKCdkYXRhLXNlbmQtbWVzc2FnZScpKSB7XG4gIHNlbmRNZXNzYWdlQnV0dG9uO1xuICBjb25zb2xlLmxvZygnc2VuZCBtZXNzYWdlJyk7XG5cbiAgc2hvd01lc3NhZ2UoKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gc2hvd01lc3NhZ2UoKSB7XG4gIGNvbnN0IGNoYXRNZXNzYWdlcyA9IGNoYXRNZXNzYWdlQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGF0LW1lc3NhZ2UnKTtcbiAgY29uc3QgY2hhdFNwaW5uZXI6IEhUTUxEaXZFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYXQtc3Bpbm5lcicpO1xuXG4gIGlmICghY2hhdE1lc3NhZ2VzIHx8ICFjaGF0U3Bpbm5lcikgcmV0dXJuO1xuXG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBjaGF0TWVzc2FnZXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgY29uc3QgbWVzc2FnZSA9IGNoYXRNZXNzYWdlc1tpbmRleF07XG4gICAgYXdhaXQgc2hvd1NwaW5uZXJBbmRNZXNzYWdlKG1lc3NhZ2UsIGNoYXRTcGlubmVyKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzaG93U3Bpbm5lckFuZE1lc3NhZ2UoXG4gIG1lc3NhZ2U6IEVsZW1lbnQsXG4gIGNoYXRTcGlubmVyOiBIVE1MRGl2RWxlbWVudCxcbikge1xuICBjb25zdCBzcGlubmVyQ2xvbmUgPSBjaGF0U3Bpbm5lci5jbG9uZU5vZGUodHJ1ZSkgYXMgSFRNTERpdkVsZW1lbnQ7XG4gIGNvbnN0IGNoYXRNYWluOiBIVE1MRGl2RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LW1haW4nKTtcblxuICBtZXNzYWdlLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKHNwaW5uZXJDbG9uZSwgbWVzc2FnZSk7XG5cbiAgc3Bpbm5lckNsb25lLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XG4gIHNwaW5uZXJDbG9uZS5jbGFzc0xpc3QuYWRkKCdjaGF0LXNwaW5uZXItYWN0aXZlJyk7XG4gIHNjcm9sbERvd24oY2hhdE1haW4pO1xuXG4gIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCB0aW1lVHlwaW5nKSk7XG5cbiAgc3Bpbm5lckNsb25lLnJlbW92ZSgpO1xuICBtZXNzYWdlLmNsYXNzTGlzdC5hZGQoJ2NoYXQtbWVzc2FnZS1hY3RpdmUnKTtcbiAgc2Nyb2xsRG93bihjaGF0TWFpbik7XG59XG4iLCIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiLy8gZGVmaW5lIGdldHRlciBmdW5jdGlvbnMgZm9yIGhhcm1vbnkgZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5kID0gKGV4cG9ydHMsIGRlZmluaXRpb24pID0+IHtcblx0Zm9yKHZhciBrZXkgaW4gZGVmaW5pdGlvbikge1xuXHRcdGlmKF9fd2VicGFja19yZXF1aXJlX18ubyhkZWZpbml0aW9uLCBrZXkpICYmICFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywga2V5KSkge1xuXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIGtleSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGRlZmluaXRpb25ba2V5XSB9KTtcblx0XHR9XG5cdH1cbn07IiwiX193ZWJwYWNrX3JlcXVpcmVfXy5vID0gKG9iaiwgcHJvcCkgPT4gKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmosIHByb3ApKSIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIiIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyhcIi4vc3JjL2NoYXQudHNcIik7XG4iLCIiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=