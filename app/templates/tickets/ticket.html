{% extends "landing/base.html" %}

{% block main_content %}
{% set all_filters = "[name='location'], [name='date_from'], [name='date_to'], [name='categories'], [name='q'],
[name='search_args'], [name='tickets_per_page']" %}

<input type="hidden" name="tickets_per_page" id="tickets_per_page" value="{{ tickets|length }}" />

<div class="my-16 self-start flex flex-col gap-2">
  <h1 class="text-6xl">Ingressos</h1>
</div>


{% if ticket %}
{% set all_filters = "[name='room_unique_id'],[name='event_unique_id'], [name='ticket_unique_id']" %}
<input type="hidden" name="ticket_unique_id" value="{{ ticket.unique_id }}">
<button type="button" hx-get="{{ url_for('buy.booking_ticket_from_web', from_web=True) }}" hx-target="#chat-body"
  hx-swap="innerHTML" hx-trigger="click" id="chat-start-buy-ticket" hx-include="{{ all_filters }}"
  class="relative p-3 w-265 sm:w-1/2 flex text-white bg-dark-grey justify-between rounded-lg">
  <div class="flex flex-col gap-1 text-start">
    <h3 class="mb-2">{{ ticket.event.name }}</h3>
    <span class="text-grey">{{ ticket.event.location.name }}</span>
    <span class="text-grey">{{ ticket.event.venue }}</span>
    <span class="text-grey">{{ cut_seconds(ticket.event.date_time) }}</span>
    <div>
      {% if ticket.is_paired %}
      <span class="text-secondary mb-0">R${{ get_price_gross(ticket) * 2 }}</span>
      <small class="text-xs text-gray-500">for 2 tickets</small>
      {% else %}
      <p class="text-secondary mt-0">R${{ get_price_gross(ticket) }}</p>
      {% endif %}
      <p class="text-xs text-grey">
        {% if ticket.section %}
        Section: {{ ticket.section }} &#8226;
        {% endif %}
        {% if ticket.queue %}
        Q: {{ ticket.queue }} &#8226;
        {% endif %}
        {% if ticket.seat %}
        Seat: {{ ticket.seat }}
        {% endif %}
      </p>
    </div>
    {% if ticket.description %}
    <p class="text-justify"><span class="text-secondary">Note:</span> {{ ticket.description }}</p>
    {% endif %}


  </div>

  <div class="absolute top-2 right-2">
    <div class="flex items-center gap-2 py-1.5 px-3 bg-middle-grey rounded-full">
      <!-- prettier-ignore -->
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M14.8215 1.37708L14.8218 1.3766C14.9876 1.12906 15.2388 1 15.485 1H18.148C18.6187 1 19 1.38128 19 1.852V18.148C19 18.6187 18.6187 19 18.148 19H15.485C15.2388 19 14.9876 18.8709 14.8218 18.6234L14.8215 18.6229C13.7818 17.0731 12.0105 16.049 10 16.049C7.98951 16.049 6.21822 17.0731 5.17854 18.6229L5.17822 18.6234C5.01219 18.8712 4.76191 19 4.515 19H1.852C1.38128 19 1 18.6187 1 18.148V1.852C1 1.38128 1.38128 1 1.852 1H4.515C4.76122 1 5.01237 1.12906 5.17822 1.3766L5.17854 1.37708C6.21815 2.92685 7.9884 3.951 10 3.951C12.0116 3.951 13.7818 2.92685 14.8215 1.37708Z"
          stroke="#F2B705" stroke-width="2" />
      </svg>
      {% if ticket.is_paired %}
      <span class="text-secondary">2</span>
      {% else %}
      <span class="text-secondary">1</span>
      {% endif %}
    </div>
  </div>
</button>

<div class="mt-8 flex flex-col gap-6 items-start text-grey">
  <h3 class="w-full text-center text-white text-2xl">Share ticket</h3>
  <div class="mb-11 flex gap-4">
    <a href="#" target="_blank" class="fb-share hover:scale-105 transform transition-transform duration-300">
      <!-- prettier-ignore -->
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path
          d="M47 24C47 35.0737 39.1732 44.3206 28.75 46.5088V31.9375H33.3422H34.2005L34.3306 31.0891L35.3947 24.1516L35.5713 23H34.4062H28.75V19.4981C28.75 18.6944 28.9485 18.0237 29.3439 17.5664C29.7159 17.1362 30.3876 16.75 31.6613 16.75H34.6875H35.6875V15.75V9.84375V8.99996L34.8557 8.858L34.6875 9.84375C34.8557 8.858 34.8557 8.85799 34.8556 8.85797L34.8553 8.85793L34.8546 8.85781L34.8525 8.85745L34.8453 8.85624L34.8192 8.85189C34.7967 8.84817 34.7641 8.84284 34.7221 8.83613C34.6382 8.82272 34.5166 8.80378 34.363 8.78117C34.056 8.73597 33.6201 8.67595 33.1007 8.61598C32.0662 8.49652 30.6813 8.375 29.3151 8.375C26.372 8.375 23.8284 9.27061 22.0194 11.0813C20.2093 12.8931 19.25 15.5054 19.25 18.7125V23H14.1562H13.1562V24V30.9375V31.9375H14.1562H19.25V46.5088C8.8268 44.3206 1 35.0735 1 24C1 11.2974 11.2975 1 24 1C36.7025 1 47 11.2975 47 24Z"
          stroke="#F2B705" stroke-width="2" />
      </svg>
    </a>
    <a href="#" target="_blank" class="i-share hover:scale-105 transform transition-transform duration-300">
      <!-- prettier-ignore -->
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="24" cy="24" r="23" stroke="#F2B705" stroke-width="2" />
        <path fill-rule="evenodd" clip-rule="evenodd"
          d="M19.0527 12.072C20.3324 12.0131 20.7404 12 24 12C27.2596 12 27.6676 12.0142 28.9462 12.072C30.2247 12.1298 31.0975 12.3338 31.8611 12.6295C32.6607 12.9316 33.3862 13.404 33.9862 14.0149C34.5971 14.6138 35.0684 15.3382 35.3695 16.1389C35.6662 16.9025 35.8691 17.7753 35.928 19.0516C35.9869 20.3335 36 20.7415 36 24C36 27.2596 35.9858 27.6676 35.928 28.9473C35.8702 30.2236 35.6662 31.0964 35.3695 31.86C35.0684 32.6608 34.5963 33.3864 33.9862 33.9862C33.3862 34.5971 32.6607 35.0684 31.8611 35.3695C31.0975 35.6662 30.2247 35.8691 28.9484 35.928C27.6676 35.9869 27.2596 36 24 36C20.7404 36 20.3324 35.9858 19.0527 35.928C17.7764 35.8702 16.9036 35.6662 16.14 35.3695C15.3392 35.0683 14.6136 34.5963 14.0138 33.9862C13.4033 33.3869 12.9309 32.6617 12.6295 31.8611C12.3338 31.0975 12.1309 30.2247 12.072 28.9484C12.0131 27.6665 12 27.2585 12 24C12 20.7404 12.0142 20.3324 12.072 19.0538C12.1298 17.7753 12.3338 16.9025 12.6295 16.1389C12.9313 15.3383 13.4041 14.6131 14.0149 14.0138C14.6139 13.4035 15.3387 12.931 16.1389 12.6295C16.9025 12.3338 17.7753 12.1309 19.0516 12.072H19.0527ZM28.8491 14.232C27.5836 14.1742 27.204 14.1622 24 14.1622C20.796 14.1622 20.4164 14.1742 19.1509 14.232C17.9804 14.2855 17.3455 14.4807 16.9222 14.6455C16.3625 14.8636 15.9622 15.1222 15.5422 15.5422C15.144 15.9295 14.8377 16.401 14.6455 16.9222C14.4807 17.3455 14.2855 17.9804 14.232 19.1509C14.1742 20.4164 14.1622 20.796 14.1622 24C14.1622 27.204 14.1742 27.5836 14.232 28.8491C14.2855 30.0196 14.4807 30.6545 14.6455 31.0778C14.8375 31.5982 15.144 32.0705 15.5422 32.4578C15.9295 32.856 16.4018 33.1625 16.9222 33.3545C17.3455 33.5193 17.9804 33.7145 19.1509 33.768C20.4164 33.8258 20.7949 33.8378 24 33.8378C27.2051 33.8378 27.5836 33.8258 28.8491 33.768C30.0196 33.7145 30.6545 33.5193 31.0778 33.3545C31.6375 33.1364 32.0378 32.8778 32.4578 32.4578C32.856 32.0705 33.1625 31.5982 33.3545 31.0778C33.5193 30.6545 33.7145 30.0196 33.768 28.8491C33.8258 27.5836 33.8378 27.204 33.8378 24C33.8378 20.796 33.8258 20.4164 33.768 19.1509C33.7145 17.9804 33.5193 17.3455 33.3545 16.9222C33.1364 16.3625 32.8778 15.9622 32.4578 15.5422C32.0705 15.1441 31.5989 14.8377 31.0778 14.6455C30.6545 14.4807 30.0196 14.2855 28.8491 14.232ZM22.4673 27.6993C23.3233 28.0556 24.2764 28.1037 25.1639 27.8353C26.0514 27.567 26.8182 26.9988 27.3334 26.2279C27.8485 25.457 28.0801 24.5311 27.9884 23.6085C27.8968 22.6858 27.4876 21.8236 26.8309 21.1691C26.4123 20.7507 25.906 20.4303 25.3487 20.2311C24.7914 20.0318 24.1968 19.9586 23.6078 20.0167C23.0188 20.0748 22.45 20.2627 21.9423 20.5671C21.4347 20.8714 21.0008 21.2844 20.672 21.7766C20.3431 22.2687 20.1275 22.8276 20.0406 23.413C19.9536 23.9985 19.9976 24.596 20.1693 25.1624C20.341 25.7288 20.6362 26.2501 21.0335 26.6888C21.4309 27.1275 21.9205 27.4726 22.4673 27.6993ZM19.6385 19.6385C20.2113 19.0658 20.8913 18.6115 21.6396 18.3015C22.3879 17.9915 23.19 17.832 24 17.832C24.81 17.832 25.6121 17.9915 26.3604 18.3015C27.1087 18.6115 27.7887 19.0658 28.3615 19.6385C28.9342 20.2113 29.3885 20.8913 29.6985 21.6396C30.0085 22.3879 30.168 23.19 30.168 24C30.168 24.81 30.0085 25.6121 29.6985 26.3604C29.3885 27.1087 28.9342 27.7887 28.3615 28.3615C27.2047 29.5182 25.6359 30.168 24 30.168C22.3641 30.168 20.7953 29.5182 19.6385 28.3615C18.4818 27.2047 17.832 25.6359 17.832 24C17.832 22.3641 18.4818 20.7953 19.6385 19.6385ZM31.536 18.7505C31.6779 18.6167 31.7916 18.4557 31.8701 18.2771C31.9487 18.0985 31.9907 17.9059 31.9935 17.7108C31.9964 17.5157 31.9601 17.3221 31.8867 17.1412C31.8134 16.9604 31.7045 16.7962 31.5665 16.6582C31.4285 16.5203 31.2643 16.4114 31.0835 16.338C30.9027 16.2647 30.709 16.2283 30.5139 16.2312C30.3188 16.234 30.1263 16.276 29.9477 16.3546C29.7691 16.4332 29.6081 16.5468 29.4742 16.6887C29.2138 16.9648 29.0712 17.3314 29.0768 17.7108C29.0823 18.0903 29.2355 18.4526 29.5038 18.7209C29.7721 18.9892 30.1345 19.1424 30.5139 19.148C30.8933 19.1535 31.26 19.0109 31.536 18.7505Z"
          fill="#F2B705" />
      </svg>
    </a>
    <a href="#" target="_blank" class="x-share hover:scale-105 transform transition-transform duration-300">
      <!-- prettier-ignore -->
      <svg width="48" height="48" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
        <circle cx="24" cy="24" r="23" stroke="#F2B705" stroke-width="2" />
        <path
          d="M36 16.3089C35.1013 16.707 34.148 16.9683 33.1719 17.0842C34.1887 16.4748 34.9693 15.5098 35.3369 14.3601C34.3704 14.9336 33.3129 15.3377 32.2103 15.5549C31.312 14.598 30.0324 14 28.6162 14C25.8968 14 23.6921 16.2046 23.6921 18.9238C23.6921 19.3097 23.7357 19.6855 23.8196 20.0459C19.7274 19.8405 16.0993 17.8803 13.6707 14.9013C13.247 15.6285 13.0042 16.4744 13.0042 17.3767C13.0042 19.085 13.8735 20.592 15.1946 21.4751C14.4127 21.4506 13.648 21.2394 12.9643 20.8591C12.964 20.8798 12.964 20.9004 12.964 20.9211C12.964 23.3068 14.6613 25.2969 16.9137 25.7492C16.1886 25.9464 15.4281 25.9753 14.6902 25.8336C15.3167 27.7898 17.1352 29.2133 19.2897 29.2531C17.6046 30.5737 15.4814 31.3609 13.1746 31.3609C12.7771 31.3609 12.3852 31.3376 12 31.2921C14.179 32.6892 16.7672 33.5043 19.5478 33.5043C28.6047 33.5043 33.5573 26.0014 33.5573 19.4948C33.5573 19.2812 33.5526 19.0689 33.543 18.8578C34.507 18.1609 35.339 17.2978 36 16.3089Z"
          fill="#F2B705" />
      </svg>
    </a>
  </div>
</div>
{% else %}
<h2>Nenhum ingresso encontrado</h2>
{% endif %}
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/flowbite_datepicker.js') }}" type="text/javascript" defer></script>
<script src="{{ url_for('static', filename='js/event.js') }}" type="text/javascript" defer></script>
{% endblock %}