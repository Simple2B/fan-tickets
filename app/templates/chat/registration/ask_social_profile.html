{% from 'chat/_macros_chat_message.html' import bot_message, bot_message_without_date, user_message,
submit_message_get
%}

<div id="chat-main" class="py-3 px-4 h-475 flex-col justify-start items-stretch overflow-y-scroll">
  {% include 'chat/chat_messages.html' %}
  {% include 'chat/chat_spinner.html' %}

  {% set all_filters = "[name='room_unique_id'], [name='user_unique_id']" %}

  {% set html_element %}
  <input type="hidden" name="room_unique_id" value="{{ room.unique_id }}" />
  <input type="hidden" name="user_unique_id" value="{{ user_unique_id }}" />
  <div class="mt-2 flex gap-2">
    <button type="button" hx-get="{{ url_for('chat.create_user_social_profile') }}" hx-target="#chat-body"
      hx-swap="innerHTML" hx-trigger="click" hx-include="{{ all_filters }}"
      class="link p-2 w-full text-center text-secondary border border-secondary rounded-2xl transition-colors duration-200">
      Yes
    </button>
    <button type="button" hx-get="{{ url_for('chat.create_user_social_profile', without_social_profile=True) }}"
      hx-target="#chat-body" hx-swap="innerHTML" hx-trigger="click" hx-include="{{ all_filters }}"
      class="link p-2 w-full text-center text-secondary border border-secondary rounded-2xl transition-colors duration-200">
      No
    </button>
  </div>
  {% endset %}

  <div id="chat-message-container" data-send-message>
    {% if error_message %}
    {% include 'chat/chat_message_error.html' %}
    {% endif %}
    {{ bot_message("Do you want to add your social profile?", html_element) }}
  </div>
</div>

<input type="hidden" name="room_unique_id" value="{{ room.unique_id }}" />
<input type="hidden" name="user_unique_id" value="{{ user_unique_id }}" />
{{ submit_message_get('chat.create_user_birth_date', "[name='room_unique_id'], [name='user_unique_id'],
[name='user_message']") }}

{% block scripts %}
<!-- prettier-ignore -->
<script src="{{ url_for('static', filename='js/chat.js') }}" type="text/javascript" defer></script>
{% endblock %}



<div>
  {% include 'chat/chat_messages.html' %}
  <div class="flex text-white justify-end">
    <small class="pt-1">FanTicket {{ now }}</small>
  </div>

  <div class="mb-8 flex text-black justify-end">
    <p class="w-5/6 p-2 rounded-lg bg-secondary">
      Do you want to add your social profile?
    </p>
  </div>

  {% if error_message %}
  <div class="mb-8 flex text-black justify-end">
    <p class="w-5/6 p-2 rounded-lg text-white bg-red-600">
      {{ error_message }}
    </p>
  </div>
  {% endif %}
  <!-- prettier-ignore -->
  {% set all_filters = "[name='room_unique_id'], [name='user_unique_id']" %}
  <div class="flex justify-end">
    <div class="w-5/6 flex gap-2">
      <input type="hidden" name="room_unique_id" value="{{ room.unique_id }}" />
      <input type="hidden" name="user_unique_id" value="{{ user_unique_id }}" />
      <button type="button" hx-get="{{ url_for('chat.create_user_social_profile') }}" hx-target="#chat-body"
        hx-swap="innerHTML" hx-trigger="click" hx-include="{{ all_filters }}"
        class="p-2 w-1/2 text-center text-grey border border-r-grey rounded-xl hover:bg-gray-200 hover:text-black active:bg-gray-400">
        Yes
      </button>
      <button type="button" hx-get="{{ url_for('chat.create_user_social_profile', without_social_profile=True) }}"
        hx-target="#chat-body" hx-swap="innerHTML" hx-trigger="click" hx-include="{{ all_filters }}"
        class="p-2 w-1/2 text-center text-grey border border-r-grey rounded-xl hover:bg-gray-200 hover:text-black active:bg-gray-400">
        No
      </button>
    </div>
  </div>
</div>

{% include 'chat/chat_submit_message_get.html' %}

{% block scripts %}
<!-- prettier-ignore -->
<script src="{{ url_for('static', filename='js/chat.js') }}" type="text/javascript" defer></script>
{% endblock %}