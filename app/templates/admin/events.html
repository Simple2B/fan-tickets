{% extends 'base.html' %} {% block links %}
<link rel="stylesheet" href="" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/flowbite/1.8.0/datepicker.min.js"></script>
{% endblock %} {% block content %}
<div class="relative overflow-x-auto shadow-md sm:rounded-lg">
  <div class="relative overflow-x-auto shadow-md sm:rounded-lg">
    <div class="mt-3 flex justify-between">
      <p class="mt-6 mb-2 ml-3 text-3xl dark:text-gray-400">Events</p>

      <div class="flex items-center justify-center bg-white dark:bg-black">
        <label for="table-search" class="sr-only">Search</label>
        <div class="relative">
          <div class="absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none">
            <svg class="w-5 h-5 text-gray-500 dark:text-gray-400" aria-hidden="true" fill="currentColor"
              viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd"
                d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                clip-rule="evenodd"></path>
            </svg>
          </div>

          <input {% if q %}value={{ q }}{% endif %} type="search" id="table-search-users"
            hx-get="{{url_for('admin.event.get_events', search=True)}}" hx-swap="outerHTML" hx-target="#events_list"
            hx-trigger="keyup changed delay:1000ms" hx-include="[name='q']" name="q" autocomplete="off"
            class="block p-2 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-gray-500 focus:border-gray-500 dark:bg-black dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-gray-500 dark:focus:border-gray-500"
            placeholder="Search for events" />
        </div>

        <button type="button" id="table-search-user-button"
          class="px-3 py-2 text-xs text-gray-600 border border-gray-600 hover:bg-blue-800 hover:text-white hover:border-white focus:ring-4 focus:outline-none focus:ring-blue-300 ml-2 font-medium rounded-lg text-center inline-flex items-center mr-2 dark:hover:bg-gray-500 dark:focus:ring-blue-800"><svg
            class="w-5 h-5 text-white-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            stroke-width="1.5" stroke="currentColor" class="w-6 h-6 ml-0 mr-1">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M15.75 15.75l-2.489-2.489m0 0a3.375 3.375 0 10-4.773-4.773 3.375 3.375 0 004.774 4.774zM21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg></button>
      </div>

      <a href="{{url_for('admin.event.get_events')}}" class="w-44 mx-3 my-6">
        <button type="button"
          class="link p-2 w-44 text-center text-secondary border border-secondary rounded-xl transition-colors duration-200">
          Add
        </button>
      </a>
    </div>

    <form action="{{url_for('admin.event.get_events')}}" class="m-3">
      <div class="flex flex-col lg:flex-row gap-2 justify-between">
        <div class="cursor-pointer">
          <p class="text-gray-400">Location {{location_selected}}</p>
          <select name="location_id"
            class="admin-select w-40 bg-black text-gray-400 border border-gray-400 rounded-lg cursor-pointer">
            <option value="all">All</option>
            {% for location in locations %}
            {% if location.unique_id == location_unique_id %}
            <option value="{{ location.id }}" selected>{{ location.name }}</option>
            {% else %}
            <option value="{{ location.id }}">{{ location.name }}</option>
            {% endif %}
            {% endfor %}
          </select>
        </div>

        <div class="relative w-max cursor-pointer">
          <p class="text-gray-400">Dates</p>
          <div id="event-dates"
            class="admin-select w-40 h-10 flex items-center bg-black text-gray-400 border border-gray-400 rounded-lg cursor-pointer">
            <p class="ms-3">Choose dates</p>
          </div>

          <div id="event-dates-dropdown"
            class="hidden absolute bg-black border border-gray-400 rounded-lg text-gray-400">
            <p class="m-2">Date from</p>
            <input datepicker type="text" name="date_from" autocomplete="off" id="date-from"
              class="max-w-2xl border-0 text-black placeholder:text-black text-sm rounded-lg focus:ring-secondary block w-full p-2 dark:bg-black dark:placeholder-white dark:text-white dark:focus:ring-secondary cursor-pointer"
              placeholder="{{ today() }}">

            <p class="m-2">Date to</p>
            <input datepicker type="text" name="date_to" autocomplete="off" id="date-to"
              class="max-w-2xl border-0 text-black placeholder:text-black text-sm rounded-lg focus:ring-secondary block w-full p-2 dark:bg-black dark:placeholder-white dark:text-white dark:focus:ring-secondary cursor-pointer"
              placeholder="{{ today() }}">
          </div>
          <svg class="absolute right-2 top-1/2 w-5 fill-current" width="24" height="24" viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg">
            <path fill-rule="evenodd" clip-rule="evenodd"
              d="M18.601 8.39897C18.269 8.06702 17.7309 8.06702 17.3989 8.39897L12 13.7979L6.60099 8.39897C6.26904 8.06702 5.73086 8.06702 5.39891 8.39897C5.06696 8.73091 5.06696 9.2691 5.39891 9.60105L11.3989 15.601C11.7309 15.933 12.269 15.933 12.601 15.601L18.601 9.60105C18.9329 9.2691 18.9329 8.73091 18.601 8.39897Z"
              fill="rgb(120 120 120)"></path>
          </svg>
        </div>

        <div class="cursor-pointer">
          <p class="text-gray-400">Category</p>
          <select name="category_id"
            class="admin-select w-40 bg-black text-gray-400 border border-gray-400 rounded-lg cursor-pointer">
            <option value="all">All</option>
            {% for category in categories %}
            {% if category.name == category_selected %}
            <option value="{{ category.id }}" selected>{{ category.name }}</option>
            {% else %}
            <option value="{{ category.id }}">{{ category.name }}</option>
            {% endif %}
            {% endfor %}
          </select>
        </div>

        <div class="cursor-pointer">
          <p class="text-gray-400">Status</p>
          <select name="status"
            class="admin-select w-40 bg-black text-gray-400 border border-gray-400 rounded-lg cursor-pointer">
            <option value="all">All</option>
            {% if status_selected == "pending" %}
            <option value="pending" selected>Pending</option>
            {% else %}
            <option value="pending">Pending</option>
            {% endif %}

            {% if status_selected == "pending" %}
            <option value="users" selected>Created by users</option>
            {% else %}
            <option value="users">Created by users</option>
            {% endif %}

            {% if status_selected == "pending" %}
            <option value="admins" selected>Created by admin</option>
            {% else %}
            <option value="admins">Created by admin</option>
            {% endif %}
          </select>
        </div>
      </div>

      <div class="my-5 flex justify-center">
        <div>
          <button type="submit"
            class="link mx-2 p-2 w-44 text-center text-secondary border border-secondary rounded-xl transition-colors duration-200">
            Apply
          </button>
        </div>

        <a href="{{url_for('admin.event.get_events')}}">
          <button type="button"
            class="link mx-2 p-2 w-44 text-center text-gray-400 border border-gray-400 rounded-xl transition-colors duration-200">
            reset
          </button>
        </a>
      </div>
    </form>

    <!-- Events list -->
    {% include 'admin/events_list.html' %}
  </div>

  <!-- Pagination -->
  {% if page.pages > 1 %}
  <div class="container content-center pagination-block-centered w-full mt-3 flex bg-white dark:bg-black">
    <nav aria-label="Page navigation example" class="mx-auto">
      <ul class="inline-flex items-center -space-x-px">
        <li>
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page=1&q={{page.query}}"
            class="block px-3 py-2 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-black dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
            <span class="sr-only">First</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd"
                d="M15.79 14.77a.75.75 0 01-1.06.02l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 111.04 1.08L11.832 10l3.938 3.71a.75.75 0 01.02 1.06zm-6 0a.75.75 0 01-1.06.02l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 111.04 1.08L5.832 10l3.938 3.71a.75.75 0 01.02 1.06z"
                clip-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li>
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page={{page.page-1 if page.page > 1 else 1}}&q={{page.query}}"
            class="block px-3 py-2 ml-0 leading-tight text-gray-500 bg-white border border-gray-300 rounded-l-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-black dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
            <span class="sr-only">Previous</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd"
                d="M12.79 5.23a.75.75 0 01-.02 1.06L8.832 10l3.938 3.71a.75.75 0 11-1.04 1.08l-4.5-4.25a.75.75 0 010-1.08l4.5-4.25a.75.75 0 011.06.02z"
                clip-rule="evenodd" />
            </svg>
          </a>
        </li>

        <!-- prettier-ignore -->
        {% for p in page.pages_for_links %}
        <li>
          <!-- prettier-ignore -->
          {% if p == page.page %}
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page={{p}}&q={{page.query}}" aria-current="page"
            class="z-10 px-3 py-2 leading-tight text-blue-600 border border-blue-300 bg-blue-50 hover:bg-blue-100 hover:text-blue-700 dark:border-gray-700 dark:bg-gray-700 dark:text-white">{{p}}</a>
          {% else %}
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page={{p}}&q={{page.query}}"
            class="px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 hover:bg-gray-100 hover:text-gray-700 dark:bg-black dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">{{p}}</a>
          {% endif %}
        </li>
        {% endfor %}

        <li>
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page={{page.page+1 if page.page < page.pages else page.pages}}&q={{page.query}}"
            class="block px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-black dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
            <!-- prettier-ignore -->
            <span class="sr-only">Next</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd"
                d="M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd" />
            </svg>
          </a>
        </li>
        <li>
          <!-- prettier-ignore -->
          <a href="{{ url_for('admin.event.get_events') }}?page={{page.pages}}&q={{page.query}}"
            class="block px-3 py-2 leading-tight text-gray-500 bg-white border border-gray-300 rounded-r-lg hover:bg-gray-100 hover:text-gray-700 dark:bg-black dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white">
            <!-- prettier-ignore -->
            <span class="sr-only">Last</span>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-5 h-5">
              <path fill-rule="evenodd"
                d="M10.21 14.77a.75.75 0 01.02-1.06L14.168 10 10.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd" />
              <path fill-rule="evenodd"
                d="M4.21 14.77a.75.75 0 01.02-1.06L8.168 10 4.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z"
                clip-rule="evenodd" />
            </svg>
          </a>
        </li>
      </ul>
    </nav>
  </div>
</div>
{% endif %}

{% endblock %} {% block scripts %}
<script src="{{ url_for('static', filename='js/admin.js') }}" type="text/javascript" defer></script>
{% endblock %}